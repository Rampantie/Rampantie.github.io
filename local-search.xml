<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>LLM基础</title>
    <link href="/2026/02/14/LLM%E5%9F%BA%E7%A1%80/"/>
    <url>/2026/02/14/LLM%E5%9F%BA%E7%A1%80/</url>
    
    <content type="html"><![CDATA[<h1>LLM Basic</h1><h2 id="1-主流的开源模型体系">1 主流的开源模型体系</h2><ul><li><p>prefix Decoder</p><p>输入双向注意力，输出单向注意力</p></li><li><p>casual Decoder</p><p>从左到右单向注意力，文本生成效果好</p></li><li><p>Encoder-Decoder</p><p>输入双向注意力，输出单向注意力，偏理解的NLP效果好</p></li></ul><h2 id="2-能力涌现">2 能力涌现</h2><p>可能是任务评价指标不够平滑或是子任务复杂任务的原因</p><h2 id="3-Decoder-only架构">3 Decoder-only架构</h2><p>zero-shot表现能力最好，不需要微调</p><h2 id="4-激活函数">4 激活函数</h2><ul><li>前馈神经网络FFN</li><li>GeLU</li><li>Swish</li><li>GLU</li><li>几者结合</li></ul><h2 id="5-损失函数">5 损失函数</h2><ul><li>KL散度：衡量两个概率分布之间的差异</li><li>交叉熵函数</li><li>交叉熵函数用于分类问题，均方误差用于回归问题</li><li>信息增益</li></ul><h2 id="6-相似度函数">6 相似度函数</h2><ul><li>余弦相似度</li><li>欧氏距离</li><li>曼哈顿距离</li><li>Jaccard相似度</li><li>皮尔逊相关系数</li><li>对比学习：无监督学习，使用对比损失函数</li></ul><h2 id="7-生成式大模型">7 生成式大模型</h2><ul><li><p>如何让生成的文本丰富：</p><ul><li>训练：大规模参数、微调技术、合适的损失函数</li><li>推理：Transformer的基础上可以引入各种参数和策略</li></ul></li><li><p>LLM复读机问题：字符级别、语句级别、章节级别重复</p><p>出现原因：数据偏差。训练目标的限制、缺乏多样性的训练数据、模型结构和参数设置</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>人工智能</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Machine Learning</tag>
      
      <tag>LLM</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>RAG</title>
    <link href="/2026/02/12/RAG/"/>
    <url>/2026/02/12/RAG/</url>
    
    <content type="html"><![CDATA[<h1>RAG</h1><h2 id="1-基本定义">1 基本定义</h2><ul><li>RAG为了解决LLM的幻觉问题、时效性问题和数据安全问题而生。</li><li>Retrieval Augmented Generation，检索增强生成，先从大量文档中检索出相关信息，然后基于这些内容提高预测质量。</li><li>检索器+生成器：<ul><li>检索器：<ol><li>准确的语义表示：块优化和微调嵌入模型</li><li>协调查询和文档的语义空间：查询重写和嵌入变换</li><li>对其检索器和LLM的偏好：利用LLM进行检索器的监督训练、适配器、PKG</li></ol></li><li>生成器：<ol><li>后检索处理：信息压缩和结果重新排序</li></ol></li></ul></li><li>RAG优势：可扩展性，准确性，可控性，可解释性，多功能性，及时性，定制性，安全性</li><li>RAG与SFT的比较：动态静态数据，外部知识更新频率，是否支持模型行为风格的改动，幻觉，推理是否透明，训练方式不同</li><li>RAG的问题：<ul><li>检索结果依赖嵌入和检索算法</li><li>对如何使用检索到的文本仍是黑盒的</li><li>对所有任务都检索到k个结果</li></ul></li></ul><h2 id="2-实现方法">2 实现方法</h2><h3 id="2-1-数据索引">2.1 数据索引</h3><ul><li><p>将私域数据向量化后构建索引存入数据库。</p></li><li><p>步骤：</p><ol><li>数据提取：<ul><li>数据获取：Doc/PDF/PPT</li><li>数据清洗：对源数据去重、过滤、格式化、压缩</li><li>信息提取：提取关键信息</li></ul></li><li>文本分割：考虑到embedding模型tokens的限制和语义完整性<ul><li>分块的方式有：句分割、固定大小分块、基于意图的分块方式（句分割、递归分割、特殊分割）</li><li>langchain.textsplitter的CharacterTextSplitter</li></ul></li><li>向量化及创建索引:<ul><li>向量化：常见的embedding模型：ChatGPT-embedding，ERNIE-Embedding V1，M3E，BGE</li><li>创建索引：Faiss，ChromaDB，ES，milvus</li></ul></li></ol></li></ul><h3 id="2-2-数据检索">2.2 数据检索</h3><ul><li>元数据过滤</li><li>图关系检索</li><li>检索技术：向量化相似度检索、关键词检索、全文检索、SQL检索</li><li>重排序</li><li>查询轮换：子查询（LlamaIndex），Hyde</li></ul><h2 id="3-典型案例">3 典型案例</h2><ul><li>ChatPDF</li><li>Baichuan</li><li>多模态</li></ul><h2 id="4-细节问题">4 细节问题</h2><h3 id="4-1-PDF的解析">4.1 PDF的解析</h3><ul><li>两条思路：基于AI（OCR）、基于规则</li><li>一些图片和表格不易转为text</li><li>对长文档提取关键信息：分块索引，文本摘要、多级标题构建文本摘要</li><li>提取文章标题的方法：pdf转为图片，使用目标检测模型识别元素，标题级别判断</li><li>通过目标检测和OCR提取表格和图片中的数据</li></ul><h4 id="4-1-1-PDF内表格的识别">4.1.1 PDF内表格的识别</h4><ul><li>表格定位</li><li>表格元素解析与结构重建</li><li>传统方法：利用规则指导和图像处理技术</li><li>pdfplumber</li><li>深度学习方法-语义分割：OCR</li></ul><h3 id="4-2-文本分块">4.2 文本分块</h3><ul><li>价值：不分块会有信息丢失的风险和分块大小的限制</li><li>方法有：固定长度，正则拆分，Space Text Splitter,langchain的CharacterTextSplitter,langchain的递归字符切分，HTML，MD，Python，LaTex</li></ul><h3 id="4-3-大模型辅助召回">4.3 大模型辅助召回</h3><h4 id="4-3-1-HYDE">4.3.1 HYDE</h4><p>先生成k个假答案，然后向量化，k+1个向量取平均，然后用这个向量去召回文档。</p><h4 id="4-3-2-FLARE">4.3.2 FLARE</h4><ul><li>随着文本生成，多次从向量库召回内容。</li><li>每生成n个token、每生成一句话，分解query为子问题</li><li>Search(…)</li><li>去除概率较低的词或依据此开始检索</li></ul><h3 id="4-4-几个关键问题">4.4 几个关键问题</h3><ul><li>内容缺失问题：优化数据源，改进提示方式</li><li>错过排名靠前的文档：重新排名检索结果，调整参数</li><li>脱离上下文：优化检索策略，微调嵌入模型</li><li>未能提取答案：清理数据，提示压缩，LongContextRecorder</li><li>格式错误：更精准的提示，输出解析，Pydantic，JSON</li><li>特异性错误</li><li>回答不全面：查询优化</li><li>数据处理能力的挑战：并行技术</li><li>结构化数据查询的难题</li><li>PDF中数据的提取：转换为HTML再用工具提取</li><li>备用模型</li><li>安全挑战</li></ul><h2 id="5-RAG的评测">5 RAG的评测</h2><h3 id="5-1-RAG评估数据集">5.1 RAG评估数据集</h3><p>数据集包含问题、真实答案、RAG答案、RAG召回文档。</p><p>首先由随机选择的根上下文构建一个更大的相关的上下文，随机生成问题和真实答案元组。然后使用RAG召回文档、生成答案。</p><h3 id="5-2-RAG评估方法">5.2 RAG评估方法</h3><ul><li><p>独立评估：答案相关性、忠实度、上下文精确度、答案正确性</p><p>指标有：命中率、平均排名导数归一化折扣累计增益、精确度</p></li><li><p>端到端评估：答案准确性、相关性和无害性，准确率和精准匹配。</p></li></ul><h3 id="5-3-RAG的关键指标和能力">5.3 RAG的关键指标和能力</h3><ul><li>关键指标：答案准确性、相关性和上下文的相关性</li><li>关键能力：抗噪声能力、拒绝无效回答能力、信息综合能力和反事实稳健性</li></ul><h3 id="5-4-RAG的评估框架">5.4 RAG的评估框架</h3><ul><li>RAGAS：答案忠实度、答案相关性、上下文相关性</li><li>ARES：自动化RAGAS流程</li></ul><h2 id="6-RAG的优化">6 RAG的优化</h2><ul><li><p>各模块优化：文档快切分的优化、文本嵌入模型、提示词优化、大模型迭代</p></li><li><p>RAG<strong>架构</strong>优化策略：</p><ul><li><p><strong>利用知识图谱进行上下文增强</strong></p><ol><li>为了解决向量数据库信息密度低、无法获取长程关联知识的问题</li><li>增加一路与向量库平行的KG上下文增强策略</li><li>抽取实体选取根节点获取子图扩写为片段</li></ol></li><li><p><strong>Self RAG</strong></p><img src="/2026/02/12/RAG/SelfRAG.jpg" class="" title="Self RAG"><p>Critical 和 Retrieve两类反思标记</p></li><li><p><strong>多向量检索器多模态RAG</strong></p><ul><li><p>支持文本+表格</p><p>版面分析（基于非结构化工具），交予summaryLLM处理，再将文本和表格summary交予同一个嵌入模型处理。</p></li><li><p>如果多一个图片</p></li></ul></li><li><p><strong>RAG Fusion</strong></p><p>用LLM生成五到十个相似的query，一起去召回文档，精排取样来拼接</p><p>RRF逆向排名融合</p><p>优质原材料、增强用户意图、丰富输出、自动纠正用户查询、处理复杂查询、搜索中意外发现</p><p>过于冗长的风险，平衡上下文窗口，伦理与用户体验考虑</p></li><li><p><strong>模块化RAG</strong></p><p>搜索模块、记忆模块、额外生成模块、任务适应模块、对齐模块、验证模块</p></li><li><p><strong>增加、替换模块，改变模块的工作流程</strong></p></li><li><p><strong>RAG结合SFT</strong>：</p><p>RA-DIT方法：更新LLM和检索器</p></li><li><p><strong>查询转换</strong>：将用户的查询转化为最适合检索的查询</p></li></ul></li><li><p>RAG<strong>索引</strong>优化策略：</p><ul><li>嵌入优化：微调嵌入、动态嵌入、检索后处理流程</li><li>RAG检索召回率低的解决方法：知识库覆盖不全、知识是否被分割、query和doc是字相关还是语义相关</li><li>优化索引结构：优化块大小</li><li>混合检索</li><li>重新排名</li></ul></li><li><p>RAG<strong>索引数据</strong>优化策略：</p><ul><li>提升索引数据质量：清理特殊字符编码、删除无关文档和冗余文档</li><li>添加元数据</li><li>输入查询与文档对齐</li><li>提示压缩</li><li>查询重写和扩展</li></ul></li><li><p>RAG未来发展方向：</p><ul><li>RAG垂直优化：长上下文处理，召回效率质量，数据安全等</li><li>RAG水平扩展：扩展至多模态数据</li><li>RAG生态系统</li></ul></li></ul><h2 id="7-Graph-RAG">7 Graph RAG</h2><p>基于知识图谱的检索增强技术</p><p>将用户查询提取实体，构建子图形成上下文，最后送入大模型</p>]]></content>
    
    
    <categories>
      
      <category>人工智能</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RAG</tag>
      
      <tag>知识增强检索</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>统计模型：理论与实践</title>
    <link href="/2025/12/27/%E7%BB%9F%E8%AE%A1%E6%A8%A1%E5%9E%8B%EF%BC%9A%E7%90%86%E8%AE%BA%E4%B8%8E%E5%AE%9E%E8%B7%B5/"/>
    <url>/2025/12/27/%E7%BB%9F%E8%AE%A1%E6%A8%A1%E5%9E%8B%EF%BC%9A%E7%90%86%E8%AE%BA%E4%B8%8E%E5%AE%9E%E8%B7%B5/</url>
    
    <content type="html"><![CDATA[<h1>统计模型：理论与实践</h1><h2 id="1-聚类方法">1 聚类方法</h2><h3 id="1-1-K-means">1.1 K-means</h3><h4 id="1-1-1-算法">1.1.1 算法</h4><p>K-Means聚类步骤是一个循环迭代的算法，具体·步骤如下：</p><ul><li>1、先随机选取K个对象作为初始的聚类中心，随机选择K个初始中心点；</li><li>2、计算每个对象与各个种子聚类中心之间的距离，按照<strong>距离初始中心点最小</strong>的原则，把每个对象分配给距离它最近的聚类中心。聚类中心以及分配给它们的对象就代表一个聚类。</li><li>3、一旦全部对象都被分配了，每个聚类的聚类中心会根据聚类中现有的对象被重新计算。这个过程将不断重复直到满足某个终止条件。终止条件可以是以下任何一个：</li></ul><p>1）没有（或最小数目）对象被重新分配给不同的聚类。 2）没有（或最小数目）聚类中心再发生变化。 3）误差平方和局部最小。4）达到固定的迭代次数终止条件。</p><p>因此得到相互分离的球状聚类，在这些聚类中，均值点趋向收敛于聚类中心。 一般会希望得到的聚类大小大致相当，这样把每个观测都分配到离它最近的聚类中心（即均值点）就是比较正确的分配方案。</p><h4 id="1-1-2-细节">1.1.2 细节</h4><ul><li><p>选择正确的k：观察随着k变化到中心的平均距离，会先快速下降然后几乎不变。</p></li><li><p>优缺点：</p><p><strong>优点</strong></p><ul><li>效率较高：时间复杂度为 (O(tkn))，其中 n 为数据对象数量，k 为聚类数量，t 为迭代次数。通常情况下，k 和 t 远小于 n（(k, t &lt;&lt; n)）。</li><li>通常会收敛到局部最优解。可通过模拟退火、遗传算法等技术求解全局最优解。</li></ul><p><strong>缺点</strong></p><ul><li>仅适用于均值有定义的数据（分类数据该如何处理？）。</li><li>需预先指定聚类数量 k。</li><li>对噪声数据和离群点敏感（处理此类数据时存在困难）。</li><li>不适合发现非凸形状的聚类。</li></ul></li></ul><h3 id="1-2">1.2</h3><h2 id="2-EM">2 EM</h2><h3 id="2-1-基本原理">2.1 基本原理</h3><img src="/2025/12/27/%E7%BB%9F%E8%AE%A1%E6%A8%A1%E5%9E%8B%EF%BC%9A%E7%90%86%E8%AE%BA%E4%B8%8E%E5%AE%9E%E8%B7%B5/EM1.jpg" class="" title="EM数学原理-1"><img src="/2025/12/27/%E7%BB%9F%E8%AE%A1%E6%A8%A1%E5%9E%8B%EF%BC%9A%E7%90%86%E8%AE%BA%E4%B8%8E%E5%AE%9E%E8%B7%B5/EM2.jpg" class="" title="EM数学原理-2"><h3 id="2-2-优缺点">2.2 优缺点</h3><img src="/2025/12/27/%E7%BB%9F%E8%AE%A1%E6%A8%A1%E5%9E%8B%EF%BC%9A%E7%90%86%E8%AE%BA%E4%B8%8E%E5%AE%9E%E8%B7%B5/EM4.jpg" class="" title="EM优缺点"><h3 id="2-3-应用场景">2.3 应用场景</h3><img src="/2025/12/27/%E7%BB%9F%E8%AE%A1%E6%A8%A1%E5%9E%8B%EF%BC%9A%E7%90%86%E8%AE%BA%E4%B8%8E%E5%AE%9E%E8%B7%B5/EM-3.jpg" class="" title="EM适用场景"><h3 id="2-4-最大似然估计">2.4 最大似然估计</h3><p>给定一个<a href="https://baike.baidu.com/item/%E6%A6%82%E7%8E%87%E5%88%86%E5%B8%83/0?fromModule=lemma_inlink">概率分布</a>D，假定其<a href="https://baike.baidu.com/item/%E6%A6%82%E7%8E%87%E5%AF%86%E5%BA%A6%E5%87%BD%E6%95%B0/0?fromModule=lemma_inlink">概率密度函数</a>（<a href="https://baike.baidu.com/item/%E8%BF%9E%E7%BB%AD%E5%88%86%E5%B8%83/22719278?fromModule=lemma_inlink">连续分布</a>）或概率聚集函数（<a href="https://baike.baidu.com/item/%E7%A6%BB%E6%95%A3%E5%88%86%E5%B8%83/22719277?fromModule=lemma_inlink">离散分布</a>）为<em>f**D</em>，以及一个分布参数θ，我们可以从这个分布中抽出一个具有<em>n</em>个值的采样X1,X2,…,Xn，通过利用<em>f**D</em>，我们就能计算出其概率：</p><p><img src="https://bkimg.cdn.bcebos.com/formula/b8585932ec03431bfb99e8bc9e71b0e5.svg" alt="img"></p><p>但是，我们可能不知道θ的值，尽管我们知道这些采样数据来自于分布D。那么我们如何才能估计出θ呢？一个自然的想法是从这个分布中抽出一个具有<em>n</em>个值的采样X1,X2,…,Xn，然后用这些采样数据来估计θ。</p><p>一旦我们获得，我们就能从中找到一个关于θ的估计。最大似然估计会寻找关于 θ的最可能的值（即，在所有可能的θ取值中，寻找一个值使这个采样的“可能性”最大化）。这种方法正好同一些其他的估计方法不同，如θ的非偏估计，非偏估计未必会输出一个最可能的值，而是会输出一个既不高估也不<a href="https://baike.baidu.com/item/%E4%BD%8E%E4%BC%B0/0?fromModule=lemma_inlink">低估</a>的θ值。</p><p>要在数学上实现最大似然<a href="https://baike.baidu.com/item/%E4%BC%B0%E8%AE%A1%E6%B3%95/0?fromModule=lemma_inlink">估计法</a>，我们首先要定义可能性：</p><p><img src="https://bkimg.cdn.bcebos.com/formula/10879047f080bb0c3c4a633857c9a145.svg" alt="img"></p><p>并且在θ的所有取值上，使这个函数最大化。这个使可能性最大的值即被称为θ的<strong>最大似然估计</strong>。</p><p><strong>基于对似然函数L(θ)形式(一般为连乘式且各因式&gt;0)的考虑，求θ的最大似然估计的一般步骤如下：</strong></p><p>(1)写出似然函数</p><p>总体X为离散型时：</p><p><img src="https://bkimg.cdn.bcebos.com/formula/6a1d02c5b9c843affb0dbd114d4c5e50.svg" alt="img"></p><p>总体X为连续型时：</p><p><img src="https://bkimg.cdn.bcebos.com/formula/93c0a560786d51ceb45a966017226b51.svg" alt="img"></p><p>(2)对似然函数两边取对数有</p><p>总体X为离散型时：</p><p><img src="https://bkimg.cdn.bcebos.com/formula/10d6f4a0aa95d6f43c0d00337198fe3d.svg" alt="img"></p><p>总体X为连续型时：</p><p><img src="https://bkimg.cdn.bcebos.com/formula/18eec2867cad0719b88aa85f3dce25dc.svg" alt="img"></p><p>(3)对</p><p><img src="https://bkimg.cdn.bcebos.com/formula/b971eeefaf3de15ffebda311893d6b70.svg" alt="img"></p><p>求导数并令之为0：</p><p><img src="https://bkimg.cdn.bcebos.com/formula/138a1fe311759c96a4e5a5f64b8edd55.svg" alt="img"></p><p>此方程为对数似然方程。解对数似然方程所得，即为未知参数 的最大似然估计值。</p><h2 id="3-分类——决策树">3 分类——决策树</h2><ul><li>结点和有向边组成</li><li>结点有内部结点和叶结点俩种类型</li><li>内部结点表示一个特征，叶节点表示 一个类</li></ul><h3 id="3-1-选择节点特征——信息熵与信息增益">3.1 选择节点特征——信息熵与信息增益</h3><p>对于有K个类别的分类问题来说，假定 样本集合D中第 k 类样本所占的比例 为pk（k=1,2,…,K）,则样本集合D的 <strong>信息熵</strong>定义为:</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>E</mi><mi>n</mi><mi>t</mi><mo stretchy="false">(</mo><mi>D</mi><mo stretchy="false">)</mo><mo>=</mo><mo>−</mo><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>K</mi></munderover><msub><mi>p</mi><mi>k</mi></msub><mo>⋅</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><msub><mi>p</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">Ent(D) = -\sum_{k=1}^{K} p_k \cdot log_2 p_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3.1304em;vertical-align:-1.3021em;"></span><span class="mord">−</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283em;"><span style="top:-1.8479em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.3021em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p><p>在决策树的分类问题中，信息增益 (information gain)是针对一个特定的 分支标准（branching criteria）T，计 算原有数据的信息熵与引入该分支标 准后的信息熵之差。信息增益的定义 如下：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>G</mi><mi>a</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>D</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo>=</mo><mi>E</mi><mi>n</mi><mi>t</mi><mo stretchy="false">(</mo><mi>D</mi><mo stretchy="false">)</mo><mo>−</mo><munderover><mo>∑</mo><mrow><mi>v</mi><mo>=</mo><mn>1</mn></mrow><mi>V</mi></munderover><mfrac><mrow><mi mathvariant="normal">∣</mi><msup><mi>D</mi><mi>v</mi></msup><mi mathvariant="normal">∣</mi></mrow><mrow><mi mathvariant="normal">∣</mi><mi>D</mi><mi mathvariant="normal">∣</mi></mrow></mfrac><mi>E</mi><mi>n</mi><mi>t</mi><mo stretchy="false">(</mo><msup><mi>D</mi><mi>v</mi></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Gain(D, a) = Ent(D) - \sum_{v=1}^{V} \frac{|D^v|}{|D|} Ent(D^v)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">G</span><span class="mord mathnormal">ain</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:3.0954em;vertical-align:-1.2671em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283em;"><span style="top:-1.8829em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">V</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2671em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mord">∣</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span></span></span></span></span><span class="mord">∣</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><h3 id="3-2-ID3算法">3.2 ID3算法</h3><ul><li>使用所有没有使用的属性并计算与之 相关的样本熵值</li><li>选取其中熵值最小的属性</li><li>生成包含该属性的节点</li></ul><h3 id="3-3-C4-5算法">3.3 C4.5算法</h3><h3 id="3-4-CART算法">3.4 CART算法</h3><h2 id="4-Gamma函数计算">4 Gamma函数计算</h2><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="normal">Γ</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mo>=</mo><msubsup><mo>∫</mo><mn>0</mn><mi mathvariant="normal">∞</mi></msubsup><msup><mi>t</mi><mrow><mi>z</mi><mo>−</mo><mn>1</mn></mrow></msup><msup><mi>e</mi><mrow><mo>−</mo><mi>t</mi></mrow></msup><mi>d</mi><mi>t</mi><mo separator="true">,</mo><mspace width="1em"/><mtext>其中 </mtext><mi>z</mi><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\Gamma(z) = \int_{0}^{\infty} t^{z-1} e^{-t} dt, \quad 其中\ z &gt; 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Γ</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.3262em;vertical-align:-0.9119em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4143em;"><span style="top:-1.7881em;margin-left:-0.4445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span><span style="top:-3.8129em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">∞</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8436em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathnormal mtight">t</span></span></span></span></span></span></span></span></span><span class="mord mathnormal">d</span><span class="mord mathnormal">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:1em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">其中</span><span class="mspace"> </span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></span></p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="normal">Γ</mi><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><mi>x</mi><mi mathvariant="normal">Γ</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mi mathvariant="normal">Γ</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">!</mo></mrow><annotation encoding="application/x-tex">\Gamma(x+1)=x\Gamma(x)\\\Gamma(n)=(n-1)!</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Γ</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">x</span><span class="mord">Γ</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Γ</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)!</span></span></span></span></span></p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="normal">Γ</mi><mrow><mo fence="true">(</mo><mi>n</mi><mo>+</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo fence="true">)</mo></mrow><mo>=</mo><mfrac><mrow><mo stretchy="false">(</mo><mn>2</mn><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">!</mo><mo stretchy="false">!</mo></mrow><msup><mn>2</mn><mi>n</mi></msup></mfrac><msqrt><mi>π</mi></msqrt></mrow><annotation encoding="application/x-tex">\Gamma\left(n + \frac{1}{2}\right) = \frac{(2n-1)!!}{2^n} \sqrt{\pi}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="mord">Γ</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.113em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5904em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord">2</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mclose">)!!</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8492em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal" style="margin-right:0.03588em;">π</span></span></span><span style="top:-2.8092em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1908em;"><span></span></span></span></span></span></span></span></span></span></p><h2 id="5-四个基础分布">5 四个基础分布</h2><h3 id="5-1-二项分布（Binomial-Distribution）">5.1 二项分布（Binomial Distribution）</h3><h4 id="核心特性">核心特性</h4><ul><li>属于<strong>离散分布</strong>，适用于 dichotomous 结果场景（仅两种可能结果，如成功 / 失败、合格 / 不合格）。</li><li>关键前提：每次试验 “成功” 概率恒定、各试验相互独立。</li></ul><h4 id="数学表达">数学表达</h4><ul><li>概率质量函数（PMF）：(P_{B}(R=r | n, p) = \binom{n}{r} p^{r}(1-p)^{n-r})，其中(\binom{n}{r} = \frac{n!}{r!(n-r)!})。</li><li>符号说明：R为二项随机变量（成功次数），n为试验次数，p为单次试验成功概率，(q=1-p)为失败概率。</li><li>累积分布函数（CDF）：(F(x \leq k) = \sum_{x=0}^{k} \binom{n}{x} p^{x} q^{n-x})（表示 k 次及以下成功的概率）。</li></ul><h4 id="数字特征">数字特征</h4><ul><li>均值：(E® = \mu = np)</li><li>方差：(Var® = \sigma^{2} = np(1-p) = npq)</li></ul><h4 id="应用场景与近似">应用场景与近似</h4><ul><li>常见场景：质量控制（产品合格判定）、可靠性分析、抽样调查。</li><li>近似条件：当(p \to 0)且(n \to \infty)时，可近似为泊松分布；当(p \leq 0.5)且(np &gt; 5)（或(p &gt; 0.5)且(nq &gt; 5)）时，可近似为正态分布。</li></ul><h4 id="实例">实例</h4><ul><li>问题：批量生产中，每件产品缺陷率 10%，随机抽取 20 件，样本中缺陷数≤3 则接收该批次，求接收概率。</li><li>计算：(F(x \leq 3) = \sum_{x=0}^{3} \binom{20}{x}(0.1)^{x}(0.9)^{20-x} = 0.867)，即接收概率为 86.7%。</li></ul><hr><h3 id="5-2-泊松分布（Poisson-Distribution）">5.2 泊松分布（Poisson Distribution）</h3><h4 id="核心特性-2">核心特性</h4><ul><li>属于<strong>离散分布</strong>，用于描述一定时间 / 空间内 “稀有事件” 的发生次数。</li><li>关键前提：事件发生概率小、相互独立、发生速率恒定。</li></ul><h4 id="数学表达-2">数学表达</h4><ul><li>概率质量函数（PMF）：(P_{P}(X=k | m) = \frac{e^{-m} m^{k}}{k!})，也可表示为(f(x) = \frac{e^{-\lambda} \lambda^{x}}{x!})。</li><li>符号说明：X为泊松随机变量（事件发生次数），(e=2.718…)（自然常数），(m=\lambda)为事件平均发生次数。</li><li>累积分布函数（CDF）：(F(x \leq k) = \sum_{x=0}^{k} \frac{e^{-\lambda} \lambda^{x}}{x!})（表示 k 次及以下发生的概率）。</li></ul><h4 id="数字特征-2">数字特征</h4><ul><li>均值：(E(X) = \mu = m = \lambda)</li><li>方差：(Var(X) = \sigma^{2} = m = \lambda)（均值与方差相等是泊松分布的重要特征）。</li></ul><h4 id="应用场景与近似-2">应用场景与近似</h4><ul><li>常见场景：质量控制（缺陷数统计）、排队论（顾客到达次数）、物理现象（粒子撞击次数）。</li><li>近似条件：当(\lambda &gt; 5)时，可近似为正态分布。</li></ul><h4 id="实例-2">实例</h4><ul><li>问题：某种血清注射的不良反应率为 0.001，1000 人注射，求 2 人及以上出现不良反应的概率。</li><li>计算：(\lambda = np = 1000×0.001 = 1)，(1 - F(x \leq 1) = 1 - \sum_{x=0}^{1} \frac{e^{-1} 1^{x}}{x!} = 0.264)，即概率为 26.4%。</li></ul><hr><h3 id="5-3-指数分布（Exponential-Distribution）">5.3 指数分布（Exponential Distribution）</h3><h4 id="核心特性-3">核心特性</h4><ul><li>属于<strong>连续分布</strong>，描述 “两次稀有事件发生的时间 / 距离间隔”。</li><li>关键前提：需满足泊松分布的所有特性（事件独立、速率恒定等），是泊松分布的 “间隔分布”。</li></ul><h4 id="数学表达-3">数学表达</h4><ul><li>概率密度函数（PDF）：(f_{E}(T=t | m) = me^{-mt})，也可表示为(f(x) = \lambda e^{-\lambda x})。</li><li>符号说明：T为指数随机变量（间隔时间），(m=\lambda)为泊松分布的平均发生速率，(t=x)为间隔时长。</li><li>累积分布函数（CDF）：(F(x \leq k) = \int_{0}^{k} \lambda e^{-\lambda x} dx = 1 - e^{-\lambda k})（表示间隔≤k 的概率）。</li></ul><h4 id="数字特征-3">数字特征</h4><ul><li>均值：(E(T) = \mu = \frac{1}{m} = \frac{1}{λ})（平均间隔时间）。</li><li>方差：(Var(T) = \sigma^{2} = \frac{1}{m^{2}} = \frac{1}{λ^{2}})。</li></ul><h4 id="应用场景">应用场景</h4><ul><li>常见场景：可靠性分析（产品寿命、灯泡使用时长）、排队论（顾客到达间隔）、质量控制（故障间隔时间）。</li></ul><h4 id="实例-3">实例</h4><ul><li>问题：某品牌灯泡寿命服从指数分布，平均寿命 1000 小时，求灯泡使用超过 1000 小时的概率。</li><li>计算：(\lambda = \frac{1}{1000} = 0.001)，(1 - F(x \leq 1000) = 1 - (1 - e^{-0.001×1000}) = e^{-1} = 0.368)，即概率为 36.8%。</li></ul><hr><h3 id="5-4-正态分布（Normal-Gaussian-Distribution）">5.4 正态分布（Normal/Gaussian Distribution）</h3><h4 id="核心特性-4">核心特性</h4><ul><li>属于<strong>连续分布</strong>，呈 “钟形曲线”，是统计学中应用最广泛的分布。</li><li>关键特性：对称性、单峰性，受均值(\mu)（位置参数）和标准差(\sigma)（尺度参数）控制；许多自然现象和测量结果（如身高、体重、误差）均服从或近似服从该分布。</li></ul><h4 id="数学表达-4">数学表达</h4><ul><li>概率密度函数（PDF）：(f_{n}(y | \mu, \sigma^{2}) = \frac{1}{\sqrt{2\pi\sigma^{2}}} exp\left[ -\frac{(y - \mu)^{2}}{2\sigma^{2}} \right])。</li><li>符号说明：(y=x)为随机变量取值，(\pi=3.14159…)，(exp(\cdot))为指数函数，(\mu)为均值，(\sigma)为标准差。</li><li>累积分布函数（CDF）：(F(x) = \frac{1}{\sqrt{2\pi\sigma^{2}}} \int_{-\infty}^{x} exp\left[ -\frac{(v - \mu)^{2}}{2\sigma^{2}} \right] dv)，需通过标准正态分布表或软件计算。</li><li>标准正态变换：令(Z = \frac{x - \mu}{\sigma})，则(Z \sim N(0,1))（均值 0、方差 1 的标准正态分布）。</li></ul><h4 id="数字特征-4">数字特征</h4><ul><li>均值：(E(Y) = \mu)</li><li>方差：(Var(Y) = \sigma^{2})</li></ul><h4 id="应用场景与近似-3">应用场景与近似</h4><ul><li>常见场景：测量数据分析（如实验误差）、多因素叠加结果分析、其他分布的近似（二项、泊松）。</li><li>68-95-99.7 规则：约 68% 的数据在(\mu \pm \sigma)内，95% 在(\mu \pm 2\sigma)内，99.7% 在(\mu \pm 3\sigma)内。</li></ul><h4 id="实例-4">实例</h4><ul><li>问题：某公司员工年龄服从正态分布，均值 50 岁，标准差 5 岁，求年龄在 50-52.5 岁之间的员工占比。</li><li>计算：(Z_{50} = \frac{50-50}{5} = 0)（(F(Z \leq 0) = 0.5)），(Z_{52.5} = \frac{52.5-50}{5} = 0.5)（(F(Z \leq 0.5) = 0.6915)），占比为(0.6915 - 0.5 = 0.1915)，即 19.15%。</li></ul><hr><h3 id="5-5-Beta-分布（Beta-Distribution）">5.5 Beta 分布（Beta Distribution）</h3><h4 id="核心特性-5">核心特性</h4><ul><li>属于<strong>连续分布</strong>，随机变量取值范围被限制在 [0,1]（或指定区间([\omega_1, \omega_2])），可灵活拟合多种形状（均匀、偏态、对称）。</li><li>核心用途：建模比例或百分比数据（如成功率、通过率、占比）。</li></ul><h4 id="数学表达-5">数学表达</h4><ul><li>通用概率密度函数（PDF）：(f(x | \lambda_1, \lambda_2, \omega_1, \omega_2))，其中(\omega_1 \leq x \leq \omega_2)，(\lambda_1, \lambda_2 \geq 0)。</li><li>常用简化形式（(0 \leq x \leq 1)）：(f(x | \lambda_1, \lambda_2) = \frac{\Gamma(\lambda_1 + \lambda_2)}{\Gamma(\lambda_1)\Gamma(\lambda_2)} x^{\lambda_1 - 1}(1 - x)^{\lambda_2 - 1})。</li><li>整数参数简化（(\lambda_1, \lambda_2)为正整数）：(f(x | \lambda_1, \lambda_2) = \frac{(\lambda_1 + \lambda_2 - 1)!}{(\lambda_1 - 1)!(\lambda_2 - 1)!} x^{\lambda_1 - 1}(1 - x)^{\lambda_2 - 1})。</li><li>另一种表达（伯努利试验场景）：(f_{\beta}(q | r, n) = \frac{(n - 1)!}{(r - 1)!(n - r)!} q^{r - 1}(1 - q)^{n - r})，其中q为比例，r为成功次数，n为试验次数。</li><li>累积分布函数（CDF）：(F(Q \leq q | r, n) = \frac{(n - 1)!}{(r - 1)!(n - r)!} \int_{0}^{q} v^{r - 1}(1 - v) dv)，称为 “不完全 Beta 函数”。</li></ul><h4 id="数字特征-5">数字特征</h4><ul><li>均值：(E(Q) = \mu = \frac{r}{n} = \frac{\lambda_1}{\lambda_1 + \lambda_2})。</li><li>方差：(Var(Q) = \sigma^{2} = \frac{r(n - r)}{n^{2}(n + 1)} = \frac{\lambda_1\lambda_2}{(\lambda_1 + \lambda_2)^2(\lambda_1 + \lambda_2 + 1)})。</li></ul><h4 id="应用场景与近似-4">应用场景与近似</h4><ul><li>常见场景：比例数据建模（如员工福利申领率、产品合格率）、质量控制中的公差分析、PERT 网络规划、贝叶斯分析中的先验分布。</li><li>近似条件：当(\lambda_1 + \lambda_2 \geq 30)时，可通过两个正态分布的差值近似。</li></ul><h4 id="实例-5">实例</h4><ul><li>问题：某公司 40 名员工，预计 30% 会提交医疗福利申领，求超过 16 人申领的概率。</li><li>计算：(\mu = 0.3)（即(r = 0.3×40 = 12)），申领比例(q = \frac{16}{40} = 0.4)，查 Beta 分布表得(F_{\beta}(Q \leq 0.4 | 12, 40) = 0.91)，故超过 16 人申领的概率为(1 - 0.91 = 0.09)，即 9%。</li></ul><h2 id="6-NLP">6 NLP</h2><h3 id="6-1-典型任务">6.1 典型任务</h3><p>根据文档内容，NLP 的典型任务围绕文本处理的核心流程展开，涵盖从基础预处理到高级语义分析的全链路，具体包括以下类别：</p><h4 id="1-文本预处理任务">1. 文本预处理任务</h4><ul><li><strong>分词（Word Segmentation）</strong>：将连续字序列重组为词序列（中文核心任务，英文可通过空格分隔），核心算法包括基于字符串匹配（<strong>正向 / 逆向 / 双向最大匹配、最佳匹配</strong>）、基于理解（专家系统、神经网络）、基于统计（N-gram、隐马尔可夫模型）的方法。</li><li><strong>停用词去除（Stop-Words Removal）</strong>：过滤无意义功能词（如 “的”“the”“is”），保留核心词汇。</li><li><strong>词形还原与词干提取（Lemmatization &amp; Stemming）</strong>：针对非汉语（如英语），将词汇还原为基础形式（词形还原保留完整语义，词干提取仅保留词根）。</li><li><strong>词根化与去时态化</strong>：针对非汉语的形态变化处理，统一词汇表达形式。</li></ul><h4 id="2-文本特征提取与表示任务">2. 文本特征提取与表示任务</h4><ul><li><strong>词性标注（Part of Speech Tagging）</strong>：标注词的语法类别（如名词、动词），方法包括规则匹配、隐马尔可夫模型（HMM）、条件随机场（CRF）。</li><li><strong>命名实体识别（Named Entity Recognition, NER）</strong>：识别文本中的人名、机构名、地名、日期、货币等实体，核心流程为 “实体边界识别 + 类别划分”，方法分为基于规则（模板匹配，如 “地名 + 公司 / 工厂”）和基于统计（HMM、最大熵模型、SVM、CRF）。</li><li><strong>词向量化（Word Vector）</strong>：将词汇转化为可计算的数学向量，常用技术包括 One-Hot 编码、词袋模型（BoW）、基于共现矩阵的向量表示。</li><li><strong>特征工程</strong>：提取文本关键特征，包括词频、共现频率、虚词个数、句子长度、编辑距离、情感特征（肯定 / 否定）、句法 / 文法特征等。</li></ul><h4 id="3-语义与结构分析任务">3. 语义与结构分析任务</h4><ul><li><strong>句法分析（Parsing）</strong>：基于上下文无关文法（CFG）构建句法树，解析句子的主谓宾等结构关系。</li><li><strong>语义角色标注（Semantic Role Labeling, SRL）</strong>：标注词汇在句子中的语义角色（如施事、受事）。</li><li><strong>文本相似性判断</strong>：衡量文本间语义关联度，用于聚类或信息检索，核心度量方法包括编辑距离、余弦相似度、Tanimoto 系数、KL 散度。</li><li><strong>主题提取（Topic Extraction）</strong>：通过 TF-IDF、LDA（隐含狄利克雷分布）、LSA（隐含语义分析）等模型，挖掘文本核心主题词。</li></ul><h4 id="4-高级语义分析任务">4. 高级语义分析任务</h4><ul><li><strong>文本情感分析（Sentiment Analysis）</strong>：识别文本的情感倾向（肯定 / 否定），核心依赖情感特征提取与统计模型（如最大熵模型）。</li><li><strong>文本质量评估</strong>：判断文本的完整性、准确性或可用性。</li><li><strong>文本生成（Text Generation）</strong>：基于语义规则或模型生成符合自然语言规范的文本（文档提及相关任务方向）。</li></ul><h3 id="6-2-NLP-的经典应用">6.2 NLP 的经典应用</h3><p>文档明确提及的 NLP 经典应用场景，均围绕核心任务的实际落地展开，覆盖信息处理、检索、决策支持等领域：</p><h4 id="1-信息过滤与识别应用">1. 信息过滤与识别应用</h4><ul><li><strong>垃圾邮件 / 短信识别</strong>：基于文本特征（如关键词、情感倾向）区分正常信息与垃圾信息，核心依赖特征提取与分类模型。</li></ul><h4 id="2-信息检索与匹配应用">2. 信息检索与匹配应用</h4><ul><li><strong>信息检索（Information Retrieval）</strong>：通过主题模型（LDA、LSA）提取文档语义特征，结合相似度度量（如 KL 距离）实现查询文本与语料的匹配排序，典型场景包括搜索引擎（基于 TF-IDF 提取关键词建立索引）。</li><li><strong>网络爬虫（Scrawler）</strong>：利用 TF-IDF 提取网页关键信息，建立页面相关度索引，支撑搜索引擎的内容检索。</li></ul><h4 id="3-文本分析与挖掘应用">3. 文本分析与挖掘应用</h4><ul><li><strong>文本聚类</strong>：基于文本相似性将海量文本分组，实现无监督的信息归类。</li><li><strong>主题建模（Topic Model）</strong>：以非监督学习方式挖掘文本隐含语义结构，应用包括文档主题词提取（通过 TF-IDF 排序选取高权重词）、词云可视化。</li><li><strong>智能输入联想</strong>：基于词共现频率（如 “我” 与 “的” 高频共现），实现输入预测与联想推荐。</li></ul><h4 id="4-语言理解与决策应用">4. 语言理解与决策应用</h4><ul><li><strong>歧义消解</strong>：解决词汇或句子的多义问题（如拼音 “Wang-Xiao-Bo” 对应 “王小波”“王晓波” 的区分），依赖上下文信息与最大熵模型。</li><li><strong>跨语言处理</strong>：文档提及自然语言涵盖英语、汉语、法语、拉丁语等，隐含跨语言文本转换与理解的应用场景（基于规则或统计模型处理不同语言的语法差异）。</li></ul><h4 id="5-工具与平台支撑应用">5. 工具与平台支撑应用</h4><ul><li>基于 NLP 工具包的工程化落地，常用工具包括 NLTK（全流程任务支持）、Spacy（高效预处理）、Scikit-learn（特征提取与建模）、Gensim（主题模型、TF-IDF）、中文专用工具（jieba、哈工大 LTP、斯坦福 CoreNLP）等，支撑上述所有任务的工程实现。</li></ul><h3 id="6-2-N-gram">6.2 N-gram</h3><h4 id="1-基础概念">1. 基础概念</h4><p>N-Gram 模型的核心假设：<strong>相邻出现频率高的字 / 词，更有可能构成一个整体（或符合语言逻辑）</strong>，其中 “N” 代表 “相邻的字 / 词个数”：</p><ul><li><strong>unigram（一元文法）</strong>：仅考虑单个词 / 字的独立出现，不依赖上下文（即 “单字 / 单词级” 统计）。</li><li><strong>bigram（二元文法）</strong>：考虑相邻 2 个词 / 字的共现关系（即 “词对级” 统计，如 “我→的”“like→deep”）。</li><li><strong>trigram（三元文法）</strong>：考虑相邻 3 个词 / 字的共现关系（即 “词 triples 级” 统计，如 “我→的→书”“like→deep→learning”）。</li></ul><h4 id="2-理论基础：马尔可夫假设">2. 理论基础：马尔可夫假设</h4><p>N-Gram 模型基于 <strong>马尔可夫链的无记忆性</strong>：当前词的出现概率仅与前 N-1 个词相关，无需依赖所有历史上下文。数学表达（以句子概率建模为例）：</p><ul><li><p>原始句子概率：(P(S)=P(w_1,w_2,…,w_n))（直接计算不可行）</p></li><li><p>基于马尔可夫假设拆解为条件概率：</p><p>(P(w_1,w_2,…,w_n)=P(w_1)·P(w_2|w_1)·P(w_3|w_1,w_2)·…·P(w_n|w_1,…,w_{n-1}))</p></li><li><p>N-Gram 简化规则：</p><ul><li>unigram：(P(w_n|w_1,…,w_{n-1})≈P(w_n))（仅考虑单个词的概率）</li><li>bigram：(P(w_n|w_1,…,w_{n-1})≈P(w_n|w_{n-1}))（仅依赖前 1 个词）</li><li>trigram：(P(w_n|w_1,…,w_{n-1})≈P(w_n|w_{n-2},w_{n-1}))（仅依赖前 2 个词）</li></ul></li></ul><h3 id="二、核心应用场景">二、核心应用场景</h3><h4 id="1-分词任务">1. 分词任务</h4><ul><li><p>核心逻辑：通过统计相邻字的共现频率，判断是否构成一个词（共现频率越高，成词概率越大）。</p><p>例：“人民” 的共现频率远高于 “人” 和 “民” 单独出现的组合，因此分词时将其作为整体切分。</p></li><li><p>与词典匹配结合：实际应用中常与正向 / 逆向最大匹配等规则方法结合，兼顾效率与准确性。</p></li></ul><h4 id="2-文本概率评估与质量判断">2. 文本概率评估与质量判断</h4><ul><li><p>用于衡量句子的 “自然度”：通过 N-Gram 计算句子的概率，概率越高说明句子越符合语言习惯，可用于文本质量评估、语法纠错等。</p><p>例：“我喜欢学习” 的 bigram 概率（</p><p>(P(喜欢|我)·P(学习|喜欢))</p><p>）高于 “我学习喜欢”，因此前者更自然。</p></li></ul><h4 id="3-共现矩阵构建">3. 共现矩阵构建</h4><ul><li><p>bigram 是构建 “词共现矩阵” 的核心基础：通过滑动窗口统计语料中所有相邻词对的出现次数，矩阵元素表示两个词的共现频率，可用于词向量生成、语义相似度计算。</p><p>文档示例：语料 “我喜欢深度学习”“我喜欢 NLP”“我享受飞行” 的 bigram 共现矩阵中，“I-like” 的共现频率为 2，“like-deep” 为 1。</p></li></ul><h4 id="4-输入联想与文本生成">4. 输入联想与文本生成</h4><ul><li><p>基于共现概率预测下一个词：统计语料中 unigram/bigram/trigram 的出现频率，生成条件概率模型，用于输入法联想、文本续写等场景。</p><p>例：通过 bigram 统计 “我” 与 “的” 的共现概率最高，因此输入 “我” 后优先联想 “的”；输入 “要我” 后，计算</p><p>(P(的|要我))</p><p>和</p><p>(P(去|要我))</p><p>的大小，排序推荐联想结果。</p></li></ul><h4 id="5-词性标注与-NER-辅助">5. 词性标注与 NER 辅助</h4><ul><li><p>作为统计模型的基础组件：unigram/bigram 模型可用于词性标注（如通过前一个词的词性预测当前词的词性）、NER（通过相邻词的实体类型预测当前词是否为实体），提升任务准确性。</p><p>文档示例：NLTK 中基于 unigram/bigram 模型的词性标注，准确率可达 93%~97%。</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>研究生课程</category>
      
    </categories>
    
    
    <tags>
      
      <tag>NLP</tag>
      
      <tag>EM</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>大数据理论与实践</title>
    <link href="/2025/12/26/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%90%86%E8%AE%BA%E4%B8%8E%E5%AE%9E%E8%B7%B5/"/>
    <url>/2025/12/26/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%90%86%E8%AE%BA%E4%B8%8E%E5%AE%9E%E8%B7%B5/</url>
    
    <content type="html"><![CDATA[<h1>大数据理论与实践 Ⅰ 2025 年秋季 - 复习提纲</h1><h2 id="CHAPTER-01-大数据综述与发展脉络">CHAPTER 01 大数据综述与发展脉络</h2><h3 id="核心掌握：大数据-4V-特性、Google-三大论文及生态基础">核心掌握：大数据 4V 特性、Google 三大论文及生态基础</h3><h3 id="一、大数据-4V-特性深度解析">一、大数据 4V 特性深度解析</h3><h4 id="V1-Volume・数据规模">V1 Volume・数据规模</h4><ul><li>定义：数据规模巨大，从 GB 到 PB 甚至 EB 级，单机存储与计算不可行。</li><li>系统约束：必须采用<strong>水平扩展</strong>架构，优先考虑<strong>容错</strong>设计。典型组件如 HDFS 提供分布式存储。</li></ul><h4 id="V2-Variety・数据类型">V2 Variety・数据类型</h4><ul><li>定义：数据类型多样，结构化 (数据库表)、半结构化 ( XML/JSON )、非结构化 (日志 / 图片 / 视频) 并存。</li><li>系统约束：需要<strong>多格式接入</strong>与<strong>统一处理抽象</strong> , 如 Hive 支持多种存储格式。</li></ul><h4 id="V3-Velocity・处理速度">V3 Velocity・处理速度</h4><ul><li>定义：数据生成与处理速度快，要求实时或准实时响应。</li><li>系统约束：系统需具备<strong>高吞吐</strong>与<strong>低延迟</strong>能力，强调<strong>流批协同</strong> , 如 Spark/Flink 分别处理批 / 流场景。</li></ul><h4 id="V4-Value・价值密度">V4 Value・价值密度</h4><ul><li>定义：价值密度低，海量数据中只有少量有价值信息，价值获取依赖 “提纯” 过程。</li><li>系统约束：倒逼系统强调<strong>批处理 + 统计建模</strong> , 通过特征工程、机器学习等手段提取价值。</li></ul><blockquote><p>✅ 答题框架: 4V → 系统需求 → 典型组件4V 给出定义后，补充 “带来的系统约束”，例如 Volume 对应分布式扩展、 Velocity 对应吞吐与延迟权衡。将约束落到生态视角：存储系统 (HDFS) + 计算框架 ( MapReduce/Spark ) + 协调服务 ( ZooKeeper ) 构成工程闭环。</p></blockquote><h3 id="二、Google-三大奠基论文与生态闭环">二、Google 三大奠基论文与生态闭环</h3><h4 id="GFS-Google-File-System">GFS - Google File System</h4><ul><li>定位：面向海量数据的分布式存储系统</li><li>设计目标：大文件存储、顺序读写优化、容错优先</li><li>开源实现: HDFS (Hadoop Distributed File System)</li><li>核心思想: Block 存储 + 多副本 + Master / Slave 架构</li></ul><h4 id="MR-MapReduce">MR - MapReduce</h4><ul><li>定位：面向海量数据的离线批处理计算模型</li><li>编程抽象: Map (映射)+ Reduce (归并) 两个阶段</li><li>核心能力：自动并行化、容错、任务调度</li><li>设计哲学：移动计算比移动数据更经济</li></ul><h4 id="BT-Bigtable">BT - Bigtable</h4><ul><li>定位：面向大规模结构化数据的在线服务存储</li><li>数据模型：列族存储模型，支持稀疏数据</li><li>设计特点：高吞吐、可扩展、容错</li><li>开源实现: HBase、Cassandra</li></ul><h3 id="三、存储-计算-服务的分工与协作">三、存储 / 计算 / 服务的分工与协作</h3><ol><li>存储层：GFS / HDFS 负责数据持久化，提供高容错、高吞吐的分布式存储能力，支持大文件顺序读写。</li><li>计算层：MapReduce / Spark 负责数据处理，提供分布式计算框架，支持批处理、流处理等多种计算模式。</li><li>服务层：Bigtable / HBase 负责在线服务，提供低延迟、高并发的随机读写能力，支持海量结构化数据访问。</li></ol><h3 id="四、高频考点与易错点辨析">四、高频考点与易错点辨析</h3><ol><li>论文级概念 vs 开源实现：论文描述设计思想与系统模型，开源实现 (如 HDFS/Spark) 是具体的工程实现。题干出现具体开源组件名时，通常不是论文原名。</li><li>高频表达：吞吐优先与顺序 I/O —— 大数据底座系统常优先优化顺序读写吞吐与故障容忍，而不是单次随机访问的低延迟，这是与 OLTP 系统的本质区别。</li><li>典型易错题<ul><li>❌ 错误选项: “HDFS 是 Google 三大论文之一” | ✅ 正确答案: GFS/MapReduce/Bigtable</li><li>❌ 错误理解: “大数据系统优先优化随机访问低延迟” | ✅ 正确理解：优先优化顺序读写吞吐与容错</li><li>❌ 错误表述: “Value 密度高所以适合实时处理” | ✅ 正确表述: Value 密度低需批处理 + 统计建模提纯</li></ul></li></ol><hr><h2 id="CHAPTER-02-分布式协调与一致性基础">CHAPTER 02 分布式协调与一致性基础</h2><h3 id="核心掌握：ZooKeeper-定位、数据模型、集群架构与-Watch-机制">核心掌握：ZooKeeper 定位、数据模型、集群架构与 Watch 机制</h3><h3 id="一、ZooKeeper-核心定位与数据模型">一、ZooKeeper 核心定位与数据模型</h3><h4 id="核心定位">核心定位</h4><ul><li>核心定位: <strong>分布式协调服务</strong>，解决分布式系统中的协调问题</li><li>解决的问题：提供少量关键元数据的一致性存储与变更通知（选主 / 成员管理 / 配置分发 / 分布式锁）</li><li>不擅长：存储大量业务数据或高吞吐写入 (设计目标不是数据仓库或消息系统)</li></ul><h4 id="数据模型：ZNode-目录树">数据模型：ZNode 目录树</h4><ul><li>ZNode : 类文件系统的层级节点，可存放少量数据与 ACL ，维护版本号等元信息<ul><li>持久节点：显式删除前一直存在，适合配置、服务目录</li><li>临时节点：与 Session 绑定， Session 失效后自动删除</li><li>顺序节点：创建时自动追加单调递增序号</li></ul></li><li>Session 与临时节点的故障语义：Session 是客户端与 ZooKeeper 集群的逻辑连接，临时节点绑定 Session 可实现故障自动感知，支撑选主、存活探测等能力。</li></ul><h4 id="Watch-机制：变更通知的基础">Watch 机制：变更通知的基础</h4><ul><li>Watch : <strong>一次性触发</strong>的监听，触发后若需持续观察必须重新注册</li><li>工程含义：客户端需要处理边界情况（事件丢失、事件重放、重复触发、重新注册）</li></ul><h3 id="二、集群角色与多数派机制">二、集群角色与多数派机制</h3><h4 id="集群角色：Leader-Follower-Observer">集群角色：Leader/Follower/Observer</h4><ol><li><strong>Leader・领导者</strong>：负责事务请求的提案与提交，是集群中唯一处理写请求的角色</li><li><strong>Follower・跟随者</strong>：参与多数派确认，对客户端提供读服务，可成为 Leader 候选者</li><li><strong>Observer・观察者</strong>：不参与投票，用于扩展读吞吐，跨区域部署时降低网络延迟</li></ol><h4 id="写入与读取路径">写入与读取路径</h4><ul><li>写入路径：客户端写请求→Leader→生成提案→Follower 投票→多数派确认→提交生效</li><li>读取路径：客户端读请求→任意节点 (Leader / Follower / Observer)→返回本地数据</li><li>工程直觉：写入要<strong>过多数派</strong>，读取尽量就近，但读到的状态是否 “最新” 取决于同步语义</li></ul><h4 id="多数派-Quorum-基本原则">多数派 (Quorum) 基本原则</h4><ol><li>核心目的：写入与选主依赖多数派仲裁以避免脑裂 (Split-Brain)，任何两个多数派集合必然有交集，从而保障一致性推进。</li><li>容错能力公式：<strong>2n + 1</strong> → 容忍 n 台故障需要 2n+1 台节点（3 台容 1、5 台容 2、7 台容 3）</li><li>集群规模取奇数原因：奇数节点的容错能力优于偶数，偶数节点资源利用率低。</li></ol><h3 id="三、生态依赖与典型应用场景">三、生态依赖与典型应用场景</h3><ul><li>HDFS HA：ZooKeeper + ZKFC 完成 Active/Standby 的健康检查、选主与自动切换</li><li>HBase 依赖：ZooKeeper 做 Master / RegionServer 协调，管理 Master 选举、RS 存活监控、元数据定位</li><li>Kafka 历史依赖：依赖 ZK 做控制器选举、元数据管理，新版逐步移除 ZK 依赖，转向 KRaft 模式</li></ul><blockquote><p>✅ 答题框架：定位 → 核心抽象 → 典型能力 → 生态依赖定位：分布式协调服务 (不是存储 / 计算引擎)核心抽象：Session + ZNode + Watch典型能力：选主、配置管理、命名服务、分布式锁、成员管理生态依赖：HDFS HA、HBase、Kafka 历史依赖</p></blockquote><hr><h2 id="CHAPTER-03-HDFS-基础机制与读写路径">CHAPTER 03 HDFS 基础机制与读写路径</h2><h3 id="核心掌握：HDFS-架构组件、-Block-机制、元数据管理与读写流程">核心掌握：HDFS 架构组件、 Block 机制、元数据管理与读写流程</h3><h3 id="一、HDFS-架构与-Block-存储机制">一、HDFS 架构与 Block 存储机制</h3><h4 id="核心组件">核心组件</h4><ol><li><strong>NN - NameNode</strong>：Master 管理节点，管理命名空间、元数据、权限，协调副本策略与集群状态；不在数据读写路径上传输实际数据。</li><li><strong>DN - DataNode</strong>：Slave 工作节点，存储实际数据块 (Block) 与校验和，执行客户端读写请求；周期性向 NameNode 发送心跳与块报告。</li><li><strong>Client</strong>：与 NameNode 交互获取元数据，与 DataNode 交互传输数据；先问 NN 拿地址 (控制流)，再找 DN 传数据 (数据流)。</li></ol><h4 id="Block-与副本机制">Block 与副本机制</h4><ul><li>Block 概念：文件被切分为固定大小的 Block (默认 128 MiB)，最后一个 Block 可小于默认值。</li><li>副本策略：默认 3 副本，机架感知策略：本地→同机架→跨机架，平衡容错与带宽。</li><li>存储适用性：<strong>适合高吞吐量的顺序读写、大文件存储</strong>；<strong>不适合海量小文件</strong>（NN 内存瓶颈、寻址开销大、存储浪费）。</li></ul><h3 id="二、元数据持久化与安全模式">二、元数据持久化与安全模式</h3><h4 id="FSImage-静态快照">FSImage : 静态快照</h4><ul><li>定义：文件系统元数据的静态快照，包含目录树、权限、文件属性等</li><li>存储内容：文件到 Block 的映射关系、文件权限、 ACL 、修改时间等</li><li>关键: <strong>Block 的位置信息不持久化到 FSImage</strong></li></ul><h4 id="EditLog-增量日志">EditLog : 增量日志</h4><ul><li>定义：记录所有元数据变更操作的增量日志，如创建文件、删除文件、修改权限</li><li>作用：保证元数据变更的持久性，支持故障恢复</li><li>恢复机制: NameNode 启动时加载 FSImage ，重放 EditLog 恢复到最新状态</li></ul><h4 id="Block-位置信息的特殊处理">Block 位置信息的特殊处理</h4><ul><li>关键设计: Block 的位置信息 不持久化到 FSImage，原因是位置动态变化，持久化会导致 EditLog 急剧膨胀。</li><li>维护方式: DataNode 启动时上报并动态维护在 NameNode 内存中，通过 Block Report 定期上报 (默认 6 小时)。</li></ul><h4 id="安全模式-Safe-Mode">安全模式 (Safe Mode)</h4><ul><li>定义: NameNode 启动时的保护状态，<strong>只读不写</strong></li><li>目的：等待 DataNode 上报 Block 信息，直到满足 “最小副本率” 等阈值后自动退出</li><li>触发条件: NN 启动时 Block 上报率低、DN 存活数过少、NN 磁盘空间不足</li></ul><h3 id="三、HDFS-读写流程与性能优化">三、HDFS 读写流程与性能优化</h3><h4 id="读流程-Client-→-NameNode-→-DataNode">读流程: Client → NameNode → DataNode</h4><ol><li>Client 请求 NameNode，指定文件路径</li><li>NameNode 返回 Block 位置（按距离排序）</li><li>Client 直连 DataNode 读取数据</li><li>故障切换与校验：DN 故障自动切换副本，读取完成校验完整性</li></ol><h4 id="写流程-Client-→-NameNode-→-Pipeline">写流程: Client → NameNode → Pipeline</h4><ol><li>Client 请求 NameNode 创建文件，NN 检查权限与文件是否存在</li><li>建立 Pipeline 客户端与 DN 建立数据流管道，数据按 Packet 写入</li><li>Pipeline 写入与复制：Client→DN1→DN2→DN3 逐级写入</li><li>Ack 确认与完成：DN3→DN2→DN1→Client 逐级返回 Ack，所有副本写完才算成功</li></ol><h4 id="核心要点">核心要点</h4><ul><li>控制流 vs 数据流：先问 NN 拿地址 (控制流)，再找 DN 传数据 (数据流)，读写流程的关键在于分离两种流。</li><li>空间占用计算公式：HDFS 空间 = 文件大小 × 副本数，Block 大小不影响总空间占用。</li></ul><hr><h2 id="CHAPTER-04-HDFS-高可用与扩展能力">CHAPTER 04 HDFS 高可用与扩展能力</h2><h3 id="核心掌握：HDFS-Federation-、-HA-架构及故障切换机制">核心掌握：HDFS Federation 、 HA 架构及故障切换机制</h3><h3 id="一、HDFS-Federation-扩展命名空间">一、HDFS Federation: 扩展命名空间</h3><h4 id="单-NameNode-的扩展性瓶颈">单 NameNode 的扩展性瓶颈</h4><ul><li>问题：单 NameNode 内存受限，无法存储海量文件元数据（每个文件 / Block 占用约 150 字节元数据）</li><li>影响：限制集群扩展性，无法支持更多文件存储</li></ul><h4 id="Federation-核心思想">Federation 核心思想</h4><ul><li>架构特点: <strong>多个 NameNode 独立管理不同的命名空间，互不干扰</strong>；DataNode 共享，物理存储不隔离。</li><li>逻辑划分：通过块池 (Block Pool) 划分，每个 NN 管理一个 Block Pool。</li></ul><blockquote><p>✅ 核心辨析：Federation 扩容命名空间，HA 容错命名空间；Federation 不是 HA，两者可以独立部署或组合使用。</p></blockquote><h3 id="二、HDFS-HA-消除单点故障">二、HDFS HA: 消除单点故障</h3><h4 id="HA-解决的问题">HA 解决的问题</h4><ul><li>问题：单 NameNode 存在单点故障 (SPOF)，一旦宕机，整个 HDFS 集群不可用。</li><li>目标：保证服务高可用， RTO (恢复时间目标) 在分钟级。</li><li>方案: Active / Standby 双 NameNode 架构，同一命名空间由两个 NN 管理。</li></ul><h4 id="HA-核心组件与职责">HA 核心组件与职责</h4><ol><li><strong>Active NameNode</strong>：处理所有客户端请求，对外提供服务</li><li><strong>Standby NameNode</strong>：同步 EditLog，定期 Checkpoint，时刻准备接管</li><li><strong>QJM</strong>：基于 Paxos 算法管理共享 Edits 存储，防止脑裂</li><li><strong>ZKFC</strong>：与 NN 同机部署，监控进程健康，向 ZK 抢占锁</li><li><strong>ZooKeeper</strong>：提供分布式锁与选主协调服务</li></ol><h4 id="QJM-Quorum-Journal-Manager-原理">QJM (Quorum Journal Manager) 原理</h4><ul><li>基于 Paxos，Active NN 写入，Standby NN 读取；只有多数派 (2N+1) 写入成功才算提交，防止脑裂。</li><li>JournalNode 数量必须部署奇数个 (至少 3 个)，遵循多数派原则。</li></ul><h3 id="三、自动故障切换流程详解">三、自动故障切换流程详解</h3><ol><li><strong>故障检测</strong>：Active NN 的 ZKFC 检测到进程异常，ZK 会话丢失。</li><li><strong>选主竞争</strong>：Standby NN 的 ZKFC 抢占 ZK 临时节点，保证只有一个 ZKFC 能成功。</li><li><strong>隔离 (Fencing)</strong>：成功抢锁的 ZKFC 强制杀掉旧 Active 进程，防止双写 / 脑裂。</li><li><strong>状态切换</strong>：新 Active 从 QJM 同步 EditLog，提升状态为 Active，客户端自动重试连接。</li></ol><hr><h2 id="CHAPTER-05-MapReduce-编程模型与-Shuffle">CHAPTER 05 MapReduce 编程模型与 Shuffle</h2><h3 id="核心掌握：MapReduce-执行阶段、-Shuffle-机制及优化策略">核心掌握：MapReduce 执行阶段、 Shuffle 机制及优化策略</h3><h3 id="一、MapReduce-编程模型完整流程">一、MapReduce 编程模型完整流程</h3><p><strong>标准执行阶段</strong>: InputSplit → Map → Shuffle → Reduce → Output</p><ol><li><strong>InputSplit</strong>：数据的逻辑切分，决定 MapTask 并行度；与 Block 区别：Split 是计算视角，Block 是存储视角。</li><li><strong>Map</strong>：对每条记录执行 map () 函数，输出中间键值对。</li><li><strong>Shuffle</strong>：连接 Map 与 Reduce 的桥梁，数据重分布，<strong>性能瓶颈</strong>。</li><li><strong>Reduce</strong>：对相同 key 的 value 列表聚合处理。</li><li><strong>Output</strong>：输出最终结果到 HDFS。</li></ol><h3 id="二、Shuffle-阶段详解">二、Shuffle 阶段详解</h3><ol><li><strong>分区 (Partition)</strong>：决定数据分发到哪个 Reducer，默认 hash (key) % numReducers。</li><li><strong>排序 (Sort)</strong>：按 key 排序，为 Reduce 阶段的有序输入做准备。</li><li><strong>溢写 (Spill)</strong>：内存缓冲区满后溢写到磁盘，生成临时文件。</li><li><strong>归并 (Merge)</strong>：Map 端合并多个溢写文件，Reduce 端合并来自不同 Map 的输出。</li><li><strong>拷贝 (Copy)</strong>：ReduceTask 从 MapTask 所在节点拉取数据。</li><li><strong>分组 (Group)</strong>：按 key 分组，相同 key 的 value 列表传递给 reduce () 函数。</li></ol><h3 id="三、Shuffle-性能瓶颈与优化策略">三、Shuffle 性能瓶颈与优化策略</h3><h4 id="核心定位-2">核心定位</h4><p>Shuffle 是 MapReduce 的心脏与性能瓶颈 —— 涉及大量网络带宽、磁盘 I/O、序列化、排序开销。</p><h4 id="核心优化手段">核心优化手段</h4><ol><li><strong>Combiner</strong>: Map 端本地预聚合，减少网络传输数据量；适用满足交换律 / 结合律的操作（sum/count/max/min），<strong>可选优化、不能改变业务逻辑</strong>。</li><li><strong>Partitioner</strong>: 决定数据分发策略，核心目标是<strong>将相同 key 汇聚到同一 Reducer</strong>，而非单纯的负载均衡；自定义分区可缓解数据倾斜。</li></ol><h3 id="四、适用场景与高频考点">四、适用场景与高频考点</h3><h4 id="适用场景">适用场景</h4><p>离线批处理、ETL、日志分析、倒排索引构建。</p><h4 id="不适用场景">不适用场景</h4><p>低延迟流式计算、迭代计算、内存密集型计算。</p><h4 id="易错点">易错点</h4><ul><li>MapTask 并行度由 InputSplit 个数决定，不是文件大小 / Block 大小。</li><li>Shuffle 是最耗时阶段，调优重点在于减少数据量、优化网络传输、减少磁盘 I/O。</li></ul><hr><h2 id="CHAPTER-06-YARN-资源管理与调度">CHAPTER 06 YARN 资源管理与调度</h2><h3 id="核心掌握：YARN-架构演进、核心组件与调度策略">核心掌握：YARN 架构演进、核心组件与调度策略</h3><h3 id="一、从-MRv1-到-YARN-架构演进与解耦">一、从 MRv1 到 YARN : 架构演进与解耦</h3><h4 id="MRv1-的痛点">MRv1 的痛点</h4><ul><li>JobTracker 单点瓶颈：资源管理 + 任务调度耦合，压力大，扩展性差。</li><li>扩展性差：集群规模受限，无法支持上万节点。</li><li>不支持非 MR 任务：只能运行 MapReduce 任务。</li></ul><h4 id="YARN-的核心：解耦">YARN 的核心：解耦</h4><ul><li>资源管理 (RM) 与任务调度 ( AM ) 解耦，RM 全局管理，AM 应用级管理。</li><li>支持多种计算框架：Spark 、 Flink 、 MapReduce 等共享集群资源。</li><li>提升扩展性：支持更大规模集群，资源利用率提升。</li></ul><h3 id="二、YARN-核心组件与职责">二、YARN 核心组件与职责</h3><ol><li><strong>RM - ResourceManager</strong>：全局资源管理器，资源分配与调度，处理 Client 请求，监控 NM。</li><li><strong>NM - NodeManager</strong>：单节点代理，管理容器生命周期，汇报资源使用情况。</li><li><strong>AM - ApplicationMaster</strong>：每个应用一个，向 RM 申请资源，与 NM 交互启动 / 停止 Container。</li><li><strong>C - Container</strong>：资源抽象单位，<strong>不负责 HDFS 数据存储</strong>。</li></ol><h3 id="三、YARN-调度器与容错机制">三、YARN 调度器与容错机制</h3><h4 id="三大调度器">三大调度器</h4><ol><li><strong>FIFO 调度器</strong>：先进先出，简单但不支持多租户 / 优先级；适用单用户、小集群测试环境。</li><li><strong>Capacity 调度器</strong>：多队列，预留容量，支持多租户；保证各组织最小资源，资源空闲可共享；适用生产环境。</li><li><strong>Fair 调度器</strong>：公平共享，动态调整资源分配；资源空闲时可被其他队列借用，弹性好。</li></ol><h4 id="容错机制">容错机制</h4><ul><li>Task 失败：AM 会重试 (默认 4 次)，不影响整个应用。</li><li>NodeManager 失败：RM 检测心跳超时，将其上 Container 标记失败，由 AM 重新申请资源。</li><li>ApplicationMaster 失败：RM 重启 AM。</li></ul><blockquote><p>✅ 核心易错点：RM 负责 “集群级” 资源分配，不负责具体作业内部的任务监控与容错（AM 负责）；Container 是 “计算资源 + 环境” 的封装，不是 HDFS 的 Block。</p></blockquote><hr><h2 id="CHAPTER-07-Spark-核心抽象与执行机制">CHAPTER 07 Spark 核心抽象与执行机制</h2><h3 id="核心掌握：Spark-技术栈、-RDD-DataFrame-Dataset-及依赖关系">核心掌握：Spark 技术栈、 RDD/DataFrame/Dataset 及依赖关系</h3><h3 id="一、Spark-技术栈">一、Spark 技术栈</h3><ol><li><strong>Spark Core</strong>：基础引擎，负责任务调度、内存管理、故障恢复、存储系统交互。</li><li><strong>Spark SQL</strong>：结构化数据处理，操作 DataFrame/Dataset (非 RDD)，兼容 Hive。</li><li><strong>Spark Streaming</strong>：微批处理 (Micro-batch)，高吞吐，秒级延迟。</li><li><strong>MLlib &amp; GraphX</strong>：机器学习与图计算库，GraphX 是图计算框架 (不是图数据库)。</li></ol><h3 id="二、RDD-vs-DataFrame-vs-Dataset">二、RDD vs DataFrame vs Dataset</h3><ol><li><strong>RDD</strong>：弹性分布式数据集，底层对象，强类型，不可变，Lazy 执行，需手动优化。</li><li><strong>DataFrame</strong>：RDD + Schema (类似 Table)，弱类型，Catalyst 优化器可优化执行计划。</li><li><strong>Dataset</strong>：DataFrame + Type Safety (强类型)，兼具类型安全与优化。</li></ol><ul><li>转换关系：三者可相互转换 (<code>.rdd</code>, <code>.toDF()</code>, <code>.as[]</code>)；DataSet 在 Scala/Java 中常用，Python 中主要是 DataFrame。</li></ul><h3 id="三、依赖关系、Stage-划分与容错成本">三、依赖关系、Stage 划分与容错成本</h3><h4 id="窄依赖-vs-宽依赖">窄依赖 vs 宽依赖</h4><ol><li><strong>窄依赖 (Narrow)</strong>：父 RDD 分区只被一个子 RDD 分区使用，可 Pipeline 执行，无 Shuffle；容错成本低，只需重算丢失分区。</li><li><strong>宽依赖 (Wide)</strong>：父 RDD 分区被多个子 RDD 分区使用，涉及网络传输，有 Shuffle；容错成本高，可能级联重算所有父分区。</li></ol><h4 id="Stage-划分原理">Stage 划分原理</h4><ul><li>划分边界：以宽依赖 (Shuffle) 为边界划分 Stage。</li><li>窄依赖处理：窄依赖合并在同一个 Task 中流水线执行。</li><li>性能瓶颈: Shuffle 是性能瓶颈，调优重点。</li></ul><blockquote><p>✅ 核心：Spark 基于内存计算 + DAG 优化 + 线程级 Task，比 MapReduce 快 10-100 倍；持久化与缓存可避免重复计算，加速迭代算法。</p></blockquote><hr><h2 id="CHAPTER-08-Hive-数据仓库与表设计">CHAPTER 08 Hive 数据仓库与表设计</h2><h3 id="核心掌握：Hive-定位、内外表区别、存储格式与分区分桶">核心掌握：Hive 定位、内外表区别、存储格式与分区分桶</h3><h3 id="一、Hive-核心定位与内外表辨析">一、Hive 核心定位与内外表辨析</h3><h4 id="核心定位-3">核心定位</h4><ul><li>定位：基于 HDFS 的数据仓库工具，提供 HiveQL (类 SQL)，将 SQL 转换为 MapReduce / Spark 任务执行。</li><li>元数据 (Metadata): 表名、列、分区等信息存放在 Metastore (通常是 MySQL)；实际数据存放在 HDFS。</li></ul><h4 id="内部表-vs-外部表">内部表 vs 外部表</h4><ol><li><strong>内部表 (Managed)</strong><ul><li>Hive 管理元数据和数据，DROP TABLE 时，元数据和 HDFS 数据都被删除。</li><li>适用：数据由 Hive 独占、临时表、中间结果表。</li></ul></li><li><strong>外部表 (External)</strong><ul><li>Hive 只管理元数据，DROP TABLE 时，只删元数据，保留 HDFS 数据。</li><li>适用：数据多工具共享、防止误删数据、数据安全性要求高。</li></ul></li></ol><h3 id="二、存储格式-TextFile-vs-ORC-vs-Parquet">二、存储格式: TextFile vs ORC vs Parquet</h3><ol><li><strong>TextFile</strong>：行式存储，文本格式，可读性好；缺点：占用空间大，压缩比低，解析慢，不支持列裁剪；适用小数据量测试、数据交换。</li><li><strong>ORC</strong>：列式存储，专为 Hadoop 设计；优点：压缩比高，查询快，支持列裁剪，内置索引；适用 Hive 数仓、OLAP 查询。</li><li><strong>Parquet</strong>：列式存储，跨语言、跨平台；优点：压缩比高，支持嵌套数据结构；适用 Spark 、复杂数据结构。</li></ol><blockquote><p>✅ 核心：列式存储适合 OLAP，行式存储适合 OLTP；大数据数仓优先选择 ORC/Parquet，大幅减少 I/O 和存储成本。</p></blockquote><h3 id="三、分区-Partition-与分桶-Bucketing-设计">三、分区 (Partition) 与分桶 ( Bucketing ) 设计</h3><h4 id="分区-Partition">分区 (Partition)</h4><ul><li>本质: HDFS 上的目录，如 …/date=20251222/ 。</li><li>作用：裁剪扫描范围，提升查询效率。</li><li>字段选择：低基数、查询过滤高频字段 (如日期、地域)。</li></ul><h4 id="分桶-Bucketing">分桶 (Bucketing)</h4><ul><li>本质: HDFS 上的文件，将数据按哈希取模分散到 N 个文件。</li><li>作用：优化 Join 、优化抽样、缓解数据倾斜。</li><li>字段选择：高基数、离散分布字段 (如 UserID)。</li></ul><blockquote><p>✅ 易错点：分区是 “分目录”，分桶是 “分文件”；表可同时分区和分桶，但不能用同一字段既分区又分桶；分桶写入必须使用 INSERT … SELECT 触发。</p></blockquote><hr><h2 id="CHAPTER-09-HBase-列族存储模型与系统架构">CHAPTER 09 HBase 列族存储模型与系统架构</h2><h3 id="核心掌握：HBase-定位、数据模型、-LSM-Tree-及-RowKey-设计">核心掌握：HBase 定位、数据模型、 LSM-Tree 及 RowKey 设计</h3><h3 id="一、HBase-核心定位与数据模型">一、HBase 核心定位与数据模型</h3><h4 id="核心定位-4">核心定位</h4><ul><li>定位：基于 Google BigTable 论文实现的分布式列式数据库 (NoSQL)。</li><li>适用场景：海量数据 (PB 级)、高吞吐随机读写、稀疏数据存储。</li><li>特点：高可靠、高性能、可伸缩、实时读写。</li></ul><h4 id="数据模型详解">数据模型详解</h4><ol><li><strong>表 (Table)</strong>：逻辑上由行和列组成，物理上按列族存储。</li><li><strong>行键 (RowKey)</strong>：唯一标识一行，按字典序排序，设计核心：<strong>避免热点</strong>。</li><li><strong>列族与时间戳</strong>：列族是物理存储的基本单元，权限 / 压缩 / 缓存都在列族级别设置；支持多版本，默认返回最新版本。</li><li><strong>列 (Column)</strong>：列族下的具体列，动态扩展，无需预定义。</li></ol><h3 id="二、HBase-系统架构">二、HBase 系统架构</h3><h4 id="核心组件-2">核心组件</h4><ol><li><strong>HM - HMaster</strong>：管理节点，Region 分配、负载均衡、DDL 操作；<strong>不参与读写路径</strong>。</li><li><strong>RS - RegionServer</strong>：工作节点，处理读写请求，管理 Region；核心操作：Split/Compact。</li><li><strong>ZK - ZooKeeper</strong>：协调节点，选主、状态监控、元数据入口；存储 hbase:meta 表位置。</li><li><strong>HDFS</strong>：底层存储，持久化 HFile 和 WAL。</li></ol><h4 id="客户端读写流程">客户端读写流程</h4><ol><li>客户端通过 ZK 找到 hbase:meta 表位置。</li><li>从 meta 表获取 RowKey 所在 RegionServer。</li><li>直连 RegionServer 读写数据，无需经过 HMaster。</li></ol><h3 id="三、LSM-Tree-写入流程与-Compaction-机制">三、LSM-Tree: 写入流程与 Compaction 机制</h3><h4 id="写流程-WAL-→-MemStore-→-Flush">写流程: WAL → MemStore → Flush</h4><ol><li>写入 WAL 保证持久性，即使宕机也能恢复。</li><li>写入内存 MemStore，按 key 排序，提供快速查询。</li><li>MemStore 达到阈值触发 Flush，生成磁盘文件 HFile。</li></ol><blockquote><p>核心优势: LSM-Tree 将随机写转换为顺序写，写性能极高，适合写多读少场景。</p></blockquote><h4 id="读流程-BlockCache-→-MemStore-→-HFile">读流程: BlockCache → MemStore → HFile</h4><ol><li>BlockCache (读缓存)：优先查询读缓存。</li><li>MemStore (写缓存)：查询尚未刷盘的最新数据。</li><li>HFile (磁盘)：使用 BloomFilter 快速判断行 / 列是否存在。</li></ol><h4 id="Compaction-机制">Compaction 机制</h4><ol><li><strong>Minor Compaction</strong>：合并少量 HFile，减少文件数；不清理过期数据，开销小，频繁触发。</li><li><strong>Major Compaction</strong>：合并所有 HFile 为一个；清理过期 / 删除数据，开销大，手动或低峰期触发。</li></ol><h3 id="四、RowKey-设计与列族优化">四、RowKey 设计与列族优化</h3><h4 id="RowKey-设计三大原则">RowKey 设计三大原则</h4><ol><li>长度原则：越短越好 (建议 10-100 字节)，过长影响内存和性能。</li><li>散列原则：避免热点，使数据均匀分布（反转、加盐、Hash）。</li><li>唯一原则：必须唯一，避免数据覆盖。</li></ol><h4 id="列族数量优化">列族数量优化</h4><ul><li>建议 1-3 个，过多会导致性能问题：一个列族 Flush 会触发该 Region 下所有列族 Flush，产生大量小文件。</li></ul><hr><h2 id="CHAPTER-10-Kafka-分布式消息队列与分区有序性">CHAPTER 10 Kafka 分布式消息队列与分区有序性</h2><h3 id="核心掌握：Kafka-核心概念、消息交付语义与-Consumer-Group-并行度">核心掌握：Kafka 核心概念、消息交付语义与 Consumer Group 并行度</h3><h3 id="一、Kafka-核心概念与架构">一、Kafka 核心概念与架构</h3><ol><li><strong>Broker</strong>：Kafka 节点，集群中的服务器，无状态，可水平扩展。</li><li><strong>Topic</strong>：消息的逻辑分类，类似于数据库的表。</li><li><strong>Partition</strong>：Topic 的物理分片，并行处理单元，有序、不可变的追加日志。</li><li><strong>Offset</strong>：消息在 Partition 中的唯一标识，用于定位消息。</li><li><strong>Producer</strong>：消息生产者，决定消息写入哪个 Partition（Hash Key / 轮询）。</li><li><strong>Consumer Group</strong>：消费者组，组内消费者共同消费一个 Topic；一个 Partition 在同一时刻只能被组内的一个 Consumer 消费。</li></ol><blockquote><p>并行度公式: Max 并行度 = Partition 数量；Consumer 数量超过 Partition 数量时，多余的 Consumer 会空闲。</p></blockquote><h3 id="二、消息有序性与-Consumer-Group-并行度">二、消息有序性与 Consumer Group 并行度</h3><h4 id="消息有序性">消息有序性</h4><ul><li><strong>Partition 级别有序</strong>：Kafka 能保证 Partition 内的消息是有序的。</li><li><strong>Topic 级别无序</strong>：不同 Partition 之间的消息无序。</li></ul><blockquote><p>业务应用：要求严格顺序则将相关消息发送到同一 Partition，或 Topic 只配置 1 个 Partition（牺牲并行度）。</p></blockquote><h3 id="三、消息交付语义与高吞吐原因">三、消息交付语义与高吞吐原因</h3><h4 id="三大交付语义">三大交付语义</h4><ol><li><strong>At-most-once 至多一次</strong>：可能丢，不重复；场景：日志收集；实现：自动提交 offset。</li><li><strong>At-least-once 至少一次</strong>：不丢，可能重复 (默认)；场景：大多数业务；实现：处理完业务再提交 offset。</li><li><strong>Exactly-once 精确一次</strong>：不丢，不重复；场景：金融交易；实现：幂等性 Producer + 事务支持。</li></ol><h4 id="Kafka-高吞吐的三大原因">Kafka 高吞吐的三大原因</h4><ol><li><strong>顺序写磁盘</strong>：消息追加到文件末尾，性能接近内存操作。</li><li><strong>零拷贝 (Zero-Copy)</strong>：数据直接从磁盘到网卡，减少 CPU 拷贝次数。</li><li><strong>页缓存 (PageCache)</strong>：依赖 OS 的页缓存，减少上下文切换，提高缓存命中率。</li></ol><hr><h2 id="CHAPTER-11-数据采集与流处理基础">CHAPTER 11 数据采集与流处理基础</h2><h3 id="核心掌握：Flume-架构与-Spark-Streaming-vs-Flink-对比">核心掌握：Flume 架构与 Spark Streaming vs Flink 对比</h3><h3 id="一、Flume-分布式日志采集系统">一、Flume : 分布式日志采集系统</h3><h4 id="核心定位-5">核心定位</h4><ul><li>定位：分布式、可靠、高可用的海量日志采集、聚合和传输系统。</li><li>特点：支持多种数据源、可靠传输、实时处理。</li><li>架构: Agent 是基本单元，包含 <strong>Source → Channel → Sink</strong> 三组件。</li></ul><h4 id="Agent-三组件模型">Agent 三组件模型</h4><ol><li><strong>Source (采集)</strong>：接收数据，支持多种数据源 (Avro、Thrift、Exec、Kafka 等)。</li><li><strong>Channel (缓冲)</strong>：临时存储数据，保证数据传输可靠性，支持事务；分 Memory Channel（快、丢数据）和 File Channel（可靠、慢）。</li><li><strong>Sink (输出)</strong>：将数据发送到目标系统 (HDFS、Kafka、HBase 等)。</li></ol><h3 id="二、流处理框架对比-Spark-Streaming-vs-Flink">二、流处理框架对比: Spark Streaming vs Flink</h3><h4 id="Spark-Streaming">Spark Streaming</h4><ul><li>模型: <strong>微批处理 (Micro-batch)</strong>，将实时流拆分为小的时间片 (RDD)，按批次处理。</li><li>特点：高吞吐，秒级延迟；与 Spark 生态无缝集成；延迟较高，不是真正流处理。</li></ul><h4 id="Flink">Flink</h4><ul><li>模型: <strong>原生流处理 (Native Streaming)</strong>，事件驱动，逐条处理数据。</li><li>特点：低延迟 (毫秒级)；支持状态管理和事件时间；真正流处理，批处理是流的特例。</li></ul><h4 id="窗口类型">窗口类型</h4><ol><li><strong>滚动窗口 (Tumbling)</strong>：固定大小，不重叠。</li><li><strong>滑动窗口 (Sliding)</strong>：固定大小，可重叠。</li><li><strong>会话窗口 (Session)</strong>：基于活动间隙动态划分。</li></ol><hr><h2 id="CHAPTER-12-数仓、数据集市与数据湖">CHAPTER 12 数仓、数据集市与数据湖</h2><h3 id="核心掌握：数据仓库特征、分层架构与数据湖对比">核心掌握：数据仓库特征、分层架构与数据湖对比</h3><h3 id="一、数据仓库：定义与分层架构">一、数据仓库：定义与分层架构</h3><h4 id="数据仓库四大特征">数据仓库四大特征</h4><ol><li><strong>面向主题 (Subject-Oriented)</strong>：围绕特定主题组织数据。</li><li><strong>集成 (Integrated)</strong>：整合来自多个数据源的数据，统一格式和编码。</li><li><strong>相对稳定 (Non-Volatile)</strong>：数据一旦入库很少修改，主要是追加操作。</li><li><strong>反映历史变化 (Time-Variant)</strong>：记录历史变化，支持时间维度分析。</li></ol><h4 id="数仓分层架构">数仓分层架构</h4><ol><li><strong>ODS (贴源层)</strong>：原始数据层，与源系统保持一致。</li><li><strong>DWD (明细层)</strong>：明细数据层，清洗、去重、规范化。</li><li><strong>DWS (汇总层)</strong>：汇总数据层，轻度汇总，按主题汇总。</li><li><strong>ADS (应用层)</strong>：应用数据层，面向业务，报表、分析。</li></ol><blockquote><p>分层价值：数据解耦、复用、易于维护、性能优化。</p></blockquote><h3 id="二、数据湖">二、数据湖</h3><h4 id="数据湖-Data-Lake-定义">数据湖 (Data Lake) 定义</h4><ul><li>存储原始数据 (Raw Data) 的集中式存储库，支持结构化、半结构化、非结构化数据。</li><li>Schema 策略: <strong>Schema-on-Read (读时模式)</strong>，使用时定义结构，灵活性高，适合数据科学家。</li></ul><h4 id="数据沼泽-Data-Swamp">数据沼泽 (Data Swamp)</h4><ul><li>定义：不加治理的数据湖就是数据沼泽，数据难以发现、理解和使用。</li><li>避免方式：建立元数据管理、制定数据质量标准、实施生命周期管理、提供数据发现工具。</li></ul><h3 id="三、ETL-vs-ELT-与整体对比">三、ETL vs ELT 与整体对比</h3><h4 id="ETL-vs-ELT">ETL vs ELT</h4><ol><li><strong>ETL (传统数仓)</strong>：Extract → Transform → Load，先转换再加载，转换在专用 ETL 服务器执行。</li><li><strong>ELT (大数据 / 云数仓)</strong>：Extract → Load → Transform，先加载再转换，利用目标库的算力进行转换。</li></ol><blockquote><p>趋势: ELT 更适合大数据场景，利用分布式计算能力，减少数据传输。</p></blockquote><h4 id="数据仓库-vs-数据湖">数据仓库 vs 数据湖</h4><table><thead><tr><th>特性</th><th>数据仓库</th><th>数据湖</th></tr></thead><tbody><tr><td>数据类型</td><td>结构化数据</td><td>结构化、半结构化、非结构化</td></tr><tr><td>Schema</td><td>写时模式 (Schema-on-Write)</td><td>读时模式 (Schema-on-Read)</td></tr><tr><td>灵活性</td><td>低，需预定义模型</td><td>高，敏捷探索</td></tr><tr><td>用户群体</td><td>业务分析师 (报表)</td><td>数据科学家 (挖掘 / ML)</td></tr><tr><td>成本</td><td>较高 (需建模清洗)</td><td>较低 (原始存储)</td></tr><tr><td>治理</td><td>严格 (元数据 / 质量)</td><td>需加强 (防数据沼泽)</td></tr></tbody></table><hr><h2 id="ECOSYSTEM-大数据技术生态全景图">ECOSYSTEM 大数据技术生态全景图</h2><h3 id="存储层">存储层</h3><p>HDFS（分布式文件存储）、HBase（列式数据库）、Kafka（消息队列）</p><h3 id="计算层">计算层</h3><p>MapReduce（离线批处理）、Spark（内存计算）、Flink（原生流处理）</p><h3 id="协调与服务">协调与服务</h3><p>YARN（资源调度）、ZooKeeper（分布式协调）、Hive（数据仓库）</p><h3 id="数据采集">数据采集</h3><p>Flume（日志采集）、Sqoop（关系库导入导出）、Logstash（ELK 日志收集）</p><h3 id="数据流动路径">数据流动路径</h3><p>数据采集 (Flume/Sqoop) → 存储 (HDFS/HBase/Kafka ) → 计算 ( MapReduce/Spark/Flink ) → 应用 ( Hive/BI )</p><hr><h2 id="复习建议与答题技巧">复习建议与答题技巧</h2><ol><li>系统复习，理解本质：不要死记硬背，理解每个组件的定位、设计思想和适用场景，建立知识体系。</li><li>建立框架，分层作答：使用 “定位→核心抽象→典型能力→生态依赖” 等框架组织答案，逻辑清晰。</li><li>辨析概念，避免陷阱：注意区分相似概念，识别题干中的干扰项。</li><li>思考题要举一反三：通过思考题深入理解知识点，培养工程思维。</li></ol>]]></content>
    
    
    <categories>
      
      <category>研究生课程</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Big Data</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>语音情绪识别</title>
    <link href="/2025/12/26/%E8%AF%AD%E9%9F%B3%E6%83%85%E7%BB%AA%E8%AF%86%E5%88%AB/"/>
    <url>/2025/12/26/%E8%AF%AD%E9%9F%B3%E6%83%85%E7%BB%AA%E8%AF%86%E5%88%AB/</url>
    
    <content type="html"><![CDATA[<h2 id="什么是语音情感识别">什么是语音情感识别</h2><h2 id="语音情感识别">语音情感识别</h2><p>老师情感识别：LSTM HMM</p><h2 id="如何应对用户情绪？">如何应对用户情绪？</h2><p>中性</p><p>一般人如何面对，转移到用户界面上</p><p>大部分回应以中性为主</p><p>情绪因性别有差别，男性中性，女性范围更大</p><h2 id="如何通过这个技术评价用户体验">如何通过这个技术评价用户体验</h2><p>提取用户语音特征</p>]]></content>
    
    
    <categories>
      
      <category>讲座记录</category>
      
    </categories>
    
    
    <tags>
      
      <tag>HCI</tag>
      
      <tag>Voice Recognition</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>软件工程管理</title>
    <link href="/2025/12/25/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E7%AE%A1%E7%90%86/"/>
    <url>/2025/12/25/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E7%AE%A1%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h1>软件工程管理</h1>]]></content>
    
    
    <categories>
      
      <category>研究生课程</category>
      
    </categories>
    
    
    <tags>
      
      <tag>软件过程</tag>
      
      <tag>软件工程</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>高级软件设计</title>
    <link href="/2025/12/25/%E9%AB%98%E7%BA%A7%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/"/>
    <url>/2025/12/25/%E9%AB%98%E7%BA%A7%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/</url>
    
    <content type="html"><![CDATA[<h1>高级软件设计</h1><h2 id="1-O-O-Classes-and-Class-Diagrams">1 O-O, Classes and Class Diagrams</h2><img src="/2025/12/25/%E9%AB%98%E7%BA%A7%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/1-%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE.png" class="" title="思维导图"><h3 id="一、面向对象（O-O）核心基础">一、面向对象（O-O）核心基础</h3><ol><li><p><strong>核心特性</strong></p><ul><li><p><strong>封装</strong>：将相关思想分组为一个单元，对象封装属性（抽象定义的特性）和方法，属性仅通过方法访问，例：子程序是早期封装形式。</p></li><li><p><strong>信息 / 实现隐藏</strong>：利用封装限制外部对对象内部信息或实现细节的可见性，设计良好的对象是 “黑盒”，如 Auction 集合的管理方式对外隐藏。</p></li><li><p><strong>状态保留</strong>：函数执行完毕后状态丢失，而对象可在多次方法调用间保留状态（对象超出作用域除外），封装、隐藏与状态保留共同构成抽象数据类型。</p></li><li><p><strong>对象标识</strong>：每个对象可被识别为独立软件实体，通过唯一句柄（可能是内存地址、网络位置等）标识，生命周期内句柄不变，无两个对象句柄相同。</p></li><li><p><strong>消息传递</strong>： sender 对象向 target 对象传递执行方法的需求，需包含对象句柄、方法名、参数，O-O 中参数本身可为对象；消息分三类：</p><table><thead><tr><th>消息类型</th><th>作用</th><th>示例</th></tr></thead><tbody><tr><td>Informative</td><td>提供信息供对象更新自身</td><td>auctionItem1.BidMade(amount, accepted)</td></tr><tr><td>Interrogative</td><td>请求对象提供信息</td><td>auctionItem1.IsSold()</td></tr><tr><td>Imperative</td><td>请求对象执行操作</td><td>auction.Insert(auctionItem3)</td></tr></tbody></table></li></ul></li><li><p><strong>核心机制</strong></p><ul><li><strong>类</strong>：创建对象（实例）的模板，同一类的对象有相同属性和方法，但句柄与状态不同；对象属性专属，方法共享，类本身可含静态变量、构造函数等。</li><li><strong>继承</strong>：子类（child）继承父类（parent）的所有属性和操作，可基于通用类扩展专用类，例：基于 Auction 派生 SecondPriceAuction、DutchAuction。</li><li><strong>多态</strong>：同一属性或操作可在多个类中定义且实现不同，句柄可指向不同类的对象；相关概念包括动态绑定（运行时确定执行代码）、重写（子类重定义父类方法）、重载（同类中同名不同参数操作）。</li><li><strong>泛型</strong>：运行时才提供类内部使用的一个或多个类，模板类需编译时指定类型，Strategy 模式是更优示例。</li></ul></li></ol><h3 id="二、UML-类图详解">二、UML 类图详解</h3><ol><li><p><strong>基本表示</strong></p><ul><li><p><strong>类的表示</strong>：表格形式，含名称、属性、操作；属性和操作的访问修饰符：+（public，可读写）、-（private）、#（protected）、默认（包内可见）。</p><table><thead><tr><th>类示例（Prisoner）</th></tr></thead><tbody><tr><td>-myMove: int</br>-myStrategy: Strategy</td></tr><tr><td>+Prisoner(s: Strategy)</br>+nextMove(payoff: int[][]): int</td></tr></tbody></table></li><li><p><strong>对象的表示</strong>：含对象名：类名，属性与操作可选择性展示。</p></li><li><p><strong>特殊类标识</strong>：</p><ul><li>抽象类：类名旁标注 {abstract}，例：{abstract} Window。</li><li>Stereotypes：用 &lt;&lt;&gt;&gt; 表示，用于区分用途（如 &lt;<utility>&gt;、&lt;<interface>&gt;）。</li><li>参数化类：如 Set<T>，使用时需指定具体类型（如 Set<Car>）。</li></ul></li></ul></li><li><p><strong>类间关系</strong></p><ul><li><strong>继承</strong>：分为单继承（一个子类继承一个父类，如 RandomStrategy 继承 Strategy）和多继承（一个子类继承多个父类，如 AugmentedClass 继承 ExistingClass 和 Mixin）。</li><li><strong>关联</strong>：对应 ERD 中的 “R”，是多个链接（实例间耦合）的集合，可添加名称、角色、基数（如 Person 与 Company 的 employment 关联，基数 0…*:0…1）；关联可转为关联类（含属性和方法，如 Employment 类含 hireDate:Date）。</li><li><strong>组合</strong>：整体（复合对象）依赖组件存在，组件同一时间仅归属一个复合对象，组件类型可能混合，例：Window 由 scrollbar（2 个）、title（0…1）、body 组成。</li><li><strong>聚合</strong>：整体（聚合对象）可独立于部分（组成对象）存在，部分可归属多个整体，部分类型通常相同，例：Network 包含 Node 和 Arc，Path 包含有序 Segment。</li></ul></li></ol><h3 id="三、对象交互图">三、对象交互图</h3><ol><li><strong>核心作用</strong>：类图展示静态结构，对象交互图展示运行时动态结构，用于展示对象间消息传递方式，通常对应每个用例，复杂用例可绘制多个图。</li><li><strong>两种类型</strong><ul><li><strong>协作图</strong>：以方框表示对象，箭头表示消息，标注消息序列号（需多次调整确保准确性），连接对象的线条为类图中定义的关联。</li><li><strong>序列图</strong>：是协作图的另一种格式，时间沿垂直方向向下推进，更清晰展示消息传递的时序关系，自动工具转换需依赖协作图的消息序列号。</li></ul></li><li><strong>特殊消息</strong>：包括迭代消息（如遍历集合）、自消息（无需显式标注 “self”，需传递句柄时除外）、多态消息（发送至包含所有可能对象的最高层级类）。</li></ol><h3 id="四、示例与实践任务">四、示例与实践任务</h3><ol><li><strong>典型示例</strong>：拍卖系统（Auction 与 AuctionItem 类交互）、囚徒困境游戏（Prisoner、Strategy、Game 类协作）、ATM 交易系统（支持取款、存款、转账 + 现金等交易类型）、体育比赛评分系统（含事件、参赛者、裁判、试跳等实体）。</li><li><strong>实践任务</strong>：根据场景描述判断层级关系（“is-a” 继承 /“has-a” 组合）、识别类与关联、绘制类图（含基数，组合 / 聚合关联需附加分析说明）。</li></ol><hr><h3 id="4-关键问题">4. 关键问题</h3><h4 id="问题-1：面向对象中的封装与信息-实现隐藏的区别与联系是什么？">问题 1：面向对象中的封装与信息 / 实现隐藏的区别与联系是什么？</h4><p><strong>答案</strong>：联系是信息 / 实现隐藏依赖封装实现，二者均是面向对象的核心特性，共同支撑抽象数据类型的构建；区别在于核心目标不同 —— 封装侧重 “将相关思想、属性与方法分组为统一单元，便于统一引用”，是一种组织形式；信息 / 实现隐藏侧重 “通过封装限制外部对对象内部细节的访问”，是一种访问控制策略，最终让对象成为 “黑盒”，降低外部依赖。</p><h4 id="问题-2：UML-类图中组合与聚合的核心区别，以及如何通过实例判断二者？">问题 2：UML 类图中组合与聚合的核心区别，以及如何通过实例判断二者？</h4><p><strong>答案</strong>：核心区别体现在三个维度：</p><table><thead><tr><th>对比维度</th><th>组合</th><th>聚合</th></tr></thead><tbody><tr><td>整体与部分依赖关系</td><td>复合对象不存在，组件则不存在</td><td>聚合对象可独立于部分存在</td></tr><tr><td>部分归属限制</td><td>组件同一时间仅归属一个复合对象</td><td>部分可归属多个聚合对象</td></tr><tr><td>部分类型特征</td><td>组件类型可能混合</td><td>部分类型通常相同</td></tr><tr><td>判断实例的关键：①是否能说 “部分是整体的一部分”；②整体消失后部分是否仍有独立存在意义。例：“Window 与 scrollbar” 是组合（Window 消失则 scrollbar 无意义，且仅归属一个 Window）；“Book 与 Chapter” 是聚合（Book 损坏后 Chapter 可单独存在，Chapter 理论上可归属多个 Book 摘要集）。</td><td></td><td></td></tr></tbody></table><h4 id="问题-3：对象交互图（协作图与序列图）的适用场景与核心差异是什么？">问题 3：对象交互图（协作图与序列图）的适用场景与核心差异是什么？</h4><p><strong>答案</strong>：适用场景：二者均用于展示面向对象系统运行时的动态消息传递，针对每个用例绘制，复杂用例可拆分多个图，前提是已明确系统中的对象。核心差异：①展示重点不同 —— 协作图侧重对象间的关联结构（谁与谁交互），序列图侧重消息传递的时序关系（何时交互）；②格式不同 —— 协作图以对象为核心布局，用序列号标注时序；序列图以时间轴为核心，对象横向排列，消息沿纵向时间轴向下传递；③工具适配不同 —— 序列图可通过协作图的消息序列号自动转换生成。</p>]]></content>
    
    
    <categories>
      
      <category>研究生课程</category>
      
    </categories>
    
    
    <tags>
      
      <tag>软件架构</tag>
      
      <tag>设计模式</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>什么是Langchain</title>
    <link href="/2025/12/24/%E4%BB%80%E4%B9%88%E6%98%AFLangchain/"/>
    <url>/2025/12/24/%E4%BB%80%E4%B9%88%E6%98%AFLangchain/</url>
    
    <content type="html"><![CDATA[<h1>Langchain</h1><h2 id="1-介绍">1 介绍</h2><p><strong>LangChain</strong> 是一个用于构建基于大型语言模型（LLM）应用程序的开源框架。它提供了模块化的组件和链式调用能力，让开发者能够更容易地将LLM与其他数据源、工具和记忆系统集成。</p><h2 id="2-核心设计理念">2 核心设计理念</h2><ol><li><strong>模块化</strong> - 提供可组合的组件</li><li><strong>链式调用</strong> - 将多个组件连接成工作流</li><li><strong>上下文感知</strong> - 让LLM能够访问相关上下文</li><li><strong>代理系统</strong> - 让LLM能够使用工具和采取行动</li></ol><h2 id="3-主要组件">3 主要组件</h2><h3 id="1-Models-支持多种LLM提供商">1. <strong>Models</strong> - 支持多种LLM提供商</h3><ul><li>OpenAI GPT系列</li><li>Anthropic Claude</li><li>开源模型（Llama、ChatGLM等）</li><li>Hugging Face模型</li></ul><h3 id="2-Prompts-提示模板管理">2. <strong>Prompts</strong> - 提示模板管理</h3><ul><li>模板化提示词</li><li>少量示例学习</li><li>输出解析器</li></ul><h3 id="3-Chains-任务链">3. <strong>Chains</strong> - 任务链</h3><ul><li>简单链：单一任务</li><li>顺序链：多个任务串联</li><li>路由链：条件分支</li></ul><h3 id="4-Memory-对话记忆">4. <strong>Memory</strong> - 对话记忆</h3><ul><li>短期记忆（对话历史）</li><li>长期记忆（向量存储）</li></ul><h3 id="5-Indexes-文档索引">5. <strong>Indexes</strong> - 文档索引</h3><ul><li>文档加载器</li><li>文本分割器</li><li>向量存储</li></ul><h3 id="6-Agents-智能代理">6. <strong>Agents</strong> - 智能代理</h3><ul><li>工具调用能力</li><li>自主决策</li><li>行动执行</li></ul><p><strong>为什么要用LangChain而不是直接调API？</strong></p><table><thead><tr><th>对比维度</th><th>直接调用ChatGPT API</th><th>使用LangChain</th></tr></thead><tbody><tr><td>上下文处理</td><td>需手动拼接历史对话</td><td>自动维护对话上下文</td></tr><tr><td>文件处理</td><td>无法直接读取PDF</td><td>内置文档加载器</td></tr><tr><td>复杂任务</td><td>需编写大量逻辑代码</td><td>可视化链式编排</td></tr><tr><td>多步骤推理</td><td>需多次人工干预</td><td>支持自动化多步调用</td></tr></tbody></table><h2 id="4-示例：文档问答系统">4 示例：文档问答系统</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> glob<br><span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv<br><span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI<br><span class="hljs-keyword">from</span> langchain_community.document_loaders <span class="hljs-keyword">import</span> PyPDFLoader<br><span class="hljs-keyword">from</span> langchain.text_splitter <span class="hljs-keyword">import</span> RecursiveCharacterTextSplitter<br><span class="hljs-keyword">from</span> langchain_community.embeddings <span class="hljs-keyword">import</span> HuggingFaceEmbeddings<br><span class="hljs-keyword">from</span> langchain_community.vectorstores <span class="hljs-keyword">import</span> FAISS<br><span class="hljs-keyword">from</span> langchain.chains <span class="hljs-keyword">import</span> RetrievalQA<br><span class="hljs-keyword">from</span> langchain.prompts <span class="hljs-keyword">import</span> PromptTemplate<br><br><span class="hljs-comment"># 加载环境变量</span><br>load_dotenv()<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">PDFQASystem</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, pdf_folder=<span class="hljs-string">&quot;documents&quot;</span>, vectorstore_path=<span class="hljs-string">&quot;vectorstore&quot;</span></span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        初始化PDF问答系统</span><br><span class="hljs-string">        </span><br><span class="hljs-string">        参数:</span><br><span class="hljs-string">            pdf_folder: PDF文件存放的文件夹路径</span><br><span class="hljs-string">            vectorstore_path: 向量数据库保存路径</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-variable language_">self</span>.pdf_folder = pdf_folder<br>        <span class="hljs-variable language_">self</span>.vectorstore_path = vectorstore_path<br>        <span class="hljs-variable language_">self</span>.vectorstore = <span class="hljs-literal">None</span><br>        <span class="hljs-variable language_">self</span>.qa_chain = <span class="hljs-literal">None</span><br>        <br>        <span class="hljs-comment"># 初始化DeepSeek模型</span><br>        <span class="hljs-variable language_">self</span>.llm = ChatOpenAI(<br>            model=<span class="hljs-string">&quot;deepseek-chat&quot;</span>,<br>            api_key=os.getenv(<span class="hljs-string">&quot;DEEPSEEK_API_KEY&quot;</span>),<br>            base_url=<span class="hljs-string">&quot;https://api.deepseek.com&quot;</span>,<br>            temperature=<span class="hljs-number">0.1</span>,  <span class="hljs-comment"># 降低温度以获得更准确的答案</span><br>            max_tokens=<span class="hljs-number">1000</span><br>        )<br>        <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">load_and_split_documents</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;加载并分割PDF文档&quot;&quot;&quot;</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;📚 正在加载PDF文档...&quot;</span>)<br>        <br>        <span class="hljs-comment"># 获取所有PDF文件</span><br>        pdf_files = glob.glob(os.path.join(<span class="hljs-variable language_">self</span>.pdf_folder, <span class="hljs-string">&quot;*.pdf&quot;</span>))<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> pdf_files:<br>            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f&quot;在 <span class="hljs-subst">&#123;self.pdf_folder&#125;</span> 文件夹中未找到PDF文件&quot;</span>)<br>        <br>        all_documents = []<br>        <br>        <span class="hljs-keyword">for</span> pdf_file <span class="hljs-keyword">in</span> pdf_files:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;  正在处理: <span class="hljs-subst">&#123;os.path.basename(pdf_file)&#125;</span>&quot;</span>)<br>            <span class="hljs-keyword">try</span>:<br>                <span class="hljs-comment"># 使用PyPDFLoader加载PDF</span><br>                loader = PyPDFLoader(pdf_file)<br>                documents = loader.load()<br>                all_documents.extend(documents)<br>            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;  处理 <span class="hljs-subst">&#123;pdf_file&#125;</span> 时出错: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br>        <br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;✅ 共加载 <span class="hljs-subst">&#123;<span class="hljs-built_in">len</span>(all_documents)&#125;</span> 页文档&quot;</span>)<br>        <br>        <span class="hljs-comment"># 分割文本</span><br>        text_splitter = RecursiveCharacterTextSplitter(<br>            chunk_size=<span class="hljs-number">1000</span>,      <span class="hljs-comment"># 每个块的大小</span><br>            chunk_overlap=<span class="hljs-number">200</span>,    <span class="hljs-comment"># 块之间的重叠</span><br>            length_function=<span class="hljs-built_in">len</span>,<br>            separators=[<span class="hljs-string">&quot;\n\n&quot;</span>, <span class="hljs-string">&quot;\n&quot;</span>, <span class="hljs-string">&quot;。&quot;</span>, <span class="hljs-string">&quot;！&quot;</span>, <span class="hljs-string">&quot;？&quot;</span>, <span class="hljs-string">&quot;；&quot;</span>, <span class="hljs-string">&quot;，&quot;</span>, <span class="hljs-string">&quot; &quot;</span>, <span class="hljs-string">&quot;&quot;</span>]<br>        )<br>        <br>        chunks = text_splitter.split_documents(all_documents)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;📝 分割为 <span class="hljs-subst">&#123;<span class="hljs-built_in">len</span>(chunks)&#125;</span> 个文本块&quot;</span>)<br>        <br>        <span class="hljs-keyword">return</span> chunks<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">create_vectorstore</span>(<span class="hljs-params">self, chunks</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;创建向量数据库&quot;&quot;&quot;</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;🔍 正在创建向量数据库...&quot;</span>)<br>        <br>        <span class="hljs-comment"># 使用本地嵌入模型（无需API调用）</span><br>        embeddings = HuggingFaceEmbeddings(<br>            model_name=<span class="hljs-string">&quot;sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2&quot;</span><br>        )<br>        <br>        <span class="hljs-comment"># 创建向量存储</span><br>        vectorstore = FAISS.from_documents(chunks, embeddings)<br>        <br>        <span class="hljs-comment"># 保存向量数据库</span><br>        vectorstore.save_local(<span class="hljs-variable language_">self</span>.vectorstore_path)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;💾 向量数据库已保存到: <span class="hljs-subst">&#123;self.vectorstore_path&#125;</span>&quot;</span>)<br>        <br>        <span class="hljs-keyword">return</span> vectorstore<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">load_vectorstore</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;加载现有的向量数据库&quot;&quot;&quot;</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;🔍 正在加载向量数据库...&quot;</span>)<br>        <br>        embeddings = HuggingFaceEmbeddings(<br>            model_name=<span class="hljs-string">&quot;sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2&quot;</span><br>        )<br>        <br>        <span class="hljs-keyword">if</span> os.path.exists(<span class="hljs-variable language_">self</span>.vectorstore_path):<br>            vectorstore = FAISS.load_local(<br>                <span class="hljs-variable language_">self</span>.vectorstore_path, <br>                embeddings, <br>                allow_dangerous_deserialization=<span class="hljs-literal">True</span><br>            )<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;✅ 向量数据库加载成功&quot;</span>)<br>            <span class="hljs-keyword">return</span> vectorstore<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;❌ 未找到向量数据库，请先处理文档&quot;</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">initialize_system</span>(<span class="hljs-params">self, force_reprocess=<span class="hljs-literal">False</span></span>):<br>        <span class="hljs-string">&quot;&quot;&quot;初始化系统：处理PDF或加载现有向量数据库&quot;&quot;&quot;</span><br>        <span class="hljs-keyword">if</span> force_reprocess <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> os.path.exists(<span class="hljs-variable language_">self</span>.vectorstore_path):<br>            <span class="hljs-comment"># 处理PDF并创建向量数据库</span><br>            chunks = <span class="hljs-variable language_">self</span>.load_and_split_documents()<br>            <span class="hljs-variable language_">self</span>.vectorstore = <span class="hljs-variable language_">self</span>.create_vectorstore(chunks)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-comment"># 加载现有的向量数据库</span><br>            <span class="hljs-variable language_">self</span>.vectorstore = <span class="hljs-variable language_">self</span>.load_vectorstore()<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-variable language_">self</span>.vectorstore:<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        <br>        <span class="hljs-comment"># 创建问答链</span><br>        <span class="hljs-variable language_">self</span>._create_qa_chain()<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_create_qa_chain</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;创建问答链&quot;&quot;&quot;</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;🔗 创建问答链...&quot;</span>)<br>        <br>        <span class="hljs-comment"># 自定义提示模板</span><br>        prompt_template = <span class="hljs-string">&quot;&quot;&quot;请根据以下上下文信息回答问题。如果你不知道答案，请诚实地说你不知道，不要编造信息。</span><br><span class="hljs-string"></span><br><span class="hljs-string">上下文信息：</span><br><span class="hljs-string">&#123;context&#125;</span><br><span class="hljs-string"></span><br><span class="hljs-string">问题：&#123;question&#125;</span><br><span class="hljs-string"></span><br><span class="hljs-string">请基于上述上下文信息，用中文提供详细、准确的回答：&quot;&quot;&quot;</span><br>        <br>        PROMPT = PromptTemplate(<br>            template=prompt_template,<br>            input_variables=[<span class="hljs-string">&quot;context&quot;</span>, <span class="hljs-string">&quot;question&quot;</span>]<br>        )<br>        <br>        <span class="hljs-comment"># 创建检索器</span><br>        retriever = <span class="hljs-variable language_">self</span>.vectorstore.as_retriever(<br>            search_kwargs=&#123;<span class="hljs-string">&quot;k&quot;</span>: <span class="hljs-number">4</span>&#125;  <span class="hljs-comment"># 检索4个最相关的文档块</span><br>        )<br>        <br>        <span class="hljs-comment"># 创建问答链</span><br>        <span class="hljs-variable language_">self</span>.qa_chain = RetrievalQA.from_chain_type(<br>            llm=<span class="hljs-variable language_">self</span>.llm,<br>            chain_type=<span class="hljs-string">&quot;stuff&quot;</span>,<br>            retriever=retriever,<br>            return_source_documents=<span class="hljs-literal">True</span>,<br>            chain_type_kwargs=&#123;<span class="hljs-string">&quot;prompt&quot;</span>: PROMPT&#125;<br>        )<br>        <br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;✅ 问答系统初始化完成！&quot;</span>)<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">ask_question</span>(<span class="hljs-params">self, question</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;提出问题并获取答案&quot;&quot;&quot;</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-variable language_">self</span>.qa_chain:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;❌ 问答系统未初始化，请先调用 initialize_system()&quot;</span>)<br>            <span class="hljs-keyword">return</span><br>        <br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\n🤔 你的问题: <span class="hljs-subst">&#123;question&#125;</span>&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;🔍 正在检索相关信息...&quot;</span>)<br>        <br>        <span class="hljs-keyword">try</span>:<br>            result = <span class="hljs-variable language_">self</span>.qa_chain.invoke(&#123;<span class="hljs-string">&quot;query&quot;</span>: question&#125;)<br>            <br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n📄 答案:&quot;</span>)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;-&quot;</span> * <span class="hljs-number">50</span>)<br>            <span class="hljs-built_in">print</span>(result[<span class="hljs-string">&quot;result&quot;</span>])<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;-&quot;</span> * <span class="hljs-number">50</span>)<br>            <br>            <span class="hljs-comment"># 显示来源信息</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;source_documents&quot;</span> <span class="hljs-keyword">in</span> result:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n📑 相关来源:&quot;</span>)<br>                <span class="hljs-keyword">for</span> i, doc <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(result[<span class="hljs-string">&quot;source_documents&quot;</span>][:<span class="hljs-number">2</span>]):  <span class="hljs-comment"># 显示前2个来源</span><br>                    source = doc.metadata.get(<span class="hljs-string">&quot;source&quot;</span>, <span class="hljs-string">&quot;未知&quot;</span>)<br>                    page = doc.metadata.get(<span class="hljs-string">&quot;page&quot;</span>, <span class="hljs-string">&quot;未知&quot;</span>)<br>                    content_preview = doc.page_content[:<span class="hljs-number">150</span>] + <span class="hljs-string">&quot;...&quot;</span><br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;  <span class="hljs-subst">&#123;i+<span class="hljs-number">1</span>&#125;</span>. 文件: <span class="hljs-subst">&#123;os.path.basename(source)&#125;</span> (第<span class="hljs-subst">&#123;page&#125;</span>页)&quot;</span>)<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;     内容预览: <span class="hljs-subst">&#123;content_preview&#125;</span>&quot;</span>)<br>            <br>            <span class="hljs-keyword">return</span> result[<span class="hljs-string">&quot;result&quot;</span>]<br>            <br>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;❌ 回答问题时出错: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">interactive_mode</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;进入交互式问答模式&quot;&quot;&quot;</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n&quot;</span> + <span class="hljs-string">&quot;=&quot;</span>*<span class="hljs-number">60</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;📖 PDF文档问答系统&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span>*<span class="hljs-number">60</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;输入 &#x27;退出&#x27; 或 &#x27;quit&#x27; 结束对话&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;输入 &#x27;重新处理&#x27; 或 &#x27;reprocess&#x27; 重新处理PDF文档&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=&quot;</span>*<span class="hljs-number">60</span>)<br>        <br>        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>            question = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;\n请输入你的问题: &quot;</span>).strip()<br>            <br>            <span class="hljs-keyword">if</span> question.lower() <span class="hljs-keyword">in</span> [<span class="hljs-string">&#x27;退出&#x27;</span>, <span class="hljs-string">&#x27;quit&#x27;</span>, <span class="hljs-string">&#x27;exit&#x27;</span>]:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;👋 再见！&quot;</span>)<br>                <span class="hljs-keyword">break</span><br>            <span class="hljs-keyword">elif</span> question.lower() <span class="hljs-keyword">in</span> [<span class="hljs-string">&#x27;重新处理&#x27;</span>, <span class="hljs-string">&#x27;reprocess&#x27;</span>]:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;🔄 重新处理PDF文档...&quot;</span>)<br>                <span class="hljs-variable language_">self</span>.initialize_system(force_reprocess=<span class="hljs-literal">True</span>)<br>                <span class="hljs-keyword">continue</span><br>            <span class="hljs-keyword">elif</span> question == <span class="hljs-string">&quot;&quot;</span>:<br>                <span class="hljs-keyword">continue</span><br>            <br>            <span class="hljs-variable language_">self</span>.ask_question(question)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;主函数&quot;&quot;&quot;</span><br>    <span class="hljs-comment"># 检查API密钥</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.getenv(<span class="hljs-string">&quot;DEEPSEEK_API_KEY&quot;</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;❌ 请在 .env 文件中设置 DEEPSEEK_API_KEY&quot;</span>)<br>        <span class="hljs-keyword">return</span><br>    <br>    <span class="hljs-comment"># 创建问答系统实例</span><br>    qa_system = PDFQASystem(<br>        pdf_folder=<span class="hljs-string">&quot;documents&quot;</span>,       <span class="hljs-comment"># PDF文件夹</span><br>        vectorstore_path=<span class="hljs-string">&quot;vectorstore&quot;</span> <span class="hljs-comment"># 向量数据库保存位置</span><br>    )<br>    <br>    <span class="hljs-comment"># 确保documents文件夹存在</span><br>    os.makedirs(<span class="hljs-string">&quot;documents&quot;</span>, exist_ok=<span class="hljs-literal">True</span>)<br>    <br>    <span class="hljs-comment"># 检查是否有PDF文件</span><br>    pdf_files = glob.glob(os.path.join(<span class="hljs-string">&quot;documents&quot;</span>, <span class="hljs-string">&quot;*.pdf&quot;</span>))<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> pdf_files:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;📁 请将PDF文件放入 &#x27;documents&#x27; 文件夹中&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;   支持多个PDF文件，系统会自动处理所有PDF&quot;</span>)<br>        <span class="hljs-keyword">return</span><br>    <br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;📄 找到 <span class="hljs-subst">&#123;<span class="hljs-built_in">len</span>(pdf_files)&#125;</span> 个PDF文件:&quot;</span>)<br>    <span class="hljs-keyword">for</span> pdf <span class="hljs-keyword">in</span> pdf_files:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;  - <span class="hljs-subst">&#123;os.path.basename(pdf)&#125;</span>&quot;</span>)<br>    <br>    <span class="hljs-comment"># 初始化系统（第一次会处理PDF，后续会直接加载向量数据库）</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n🔄 正在初始化系统...&quot;</span>)<br>    <span class="hljs-keyword">if</span> qa_system.initialize_system():<br>        <span class="hljs-comment"># 进入交互模式</span><br>        qa_system.interactive_mode()<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;❌ 系统初始化失败&quot;</span>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><h2 id="5-Langchain-Prompt模板">5 Langchain Prompt模板</h2><p>LangChain的Prompt模板是<strong>预定义的文本结构</strong>，用于将用户输入、上下文和其他变量组合成完整的提示词发送给LLM。</p><h3 id="1-PromptTemplate（基础模板）">1. PromptTemplate（基础模板）</h3><p>最基本的提示模板，使用<code>{变量名}</code>占位符：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> langchain.prompts <span class="hljs-keyword">import</span> PromptTemplate<br><br><span class="hljs-comment"># 创建简单模板</span><br>template = <span class="hljs-string">&quot;请将以下文本翻译成&#123;language&#125;: &#123;text&#125;&quot;</span><br>prompt = PromptTemplate(<br>    input_variables=[<span class="hljs-string">&quot;language&quot;</span>, <span class="hljs-string">&quot;text&quot;</span>],<br>    template=template<br>)<br><br><span class="hljs-comment"># 格式化</span><br>formatted_prompt = prompt.<span class="hljs-built_in">format</span>(language=<span class="hljs-string">&quot;法语&quot;</span>, text=<span class="hljs-string">&quot;Hello, world!&quot;</span>)<br><span class="hljs-built_in">print</span>(formatted_prompt)<br><span class="hljs-comment"># 输出: 请将以下文本翻译成法语: Hello, world!</span><br></code></pre></td></tr></table></figure><h3 id="📚-2-ChatPromptTemplate（聊天模板）">📚 2. ChatPromptTemplate（聊天模板）</h3><p>专门为聊天模型设计，区分不同角色的消息：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> langchain.prompts <span class="hljs-keyword">import</span> ChatPromptTemplate<br><span class="hljs-keyword">from</span> langchain_core.messages <span class="hljs-keyword">import</span> HumanMessagePromptTemplate, SystemMessagePromptTemplate<br><br><span class="hljs-comment"># 创建角色模板</span><br>system_template = <span class="hljs-string">&quot;你是一个专业的&#123;role&#125;，请用&#123;style&#125;风格回答&quot;</span><br>human_template = <span class="hljs-string">&quot;&#123;text&#125;&quot;</span><br><br><span class="hljs-comment"># 组合成聊天提示</span><br>chat_prompt = ChatPromptTemplate.from_messages([<br>    (<span class="hljs-string">&quot;system&quot;</span>, system_template),<br>    (<span class="hljs-string">&quot;human&quot;</span>, human_template),<br>])<br><br><span class="hljs-comment"># 格式化</span><br>messages = chat_prompt.format_messages(<br>    role=<span class="hljs-string">&quot;翻译官&quot;</span>, <br>    style=<span class="hljs-string">&quot;正式&quot;</span>, <br>    text=<span class="hljs-string">&quot;将&#x27;Hello&#x27;翻译成中文&quot;</span><br>)<br><br><span class="hljs-comment"># messages是消息对象列表，可以直接发送给聊天模型</span><br><span class="hljs-keyword">for</span> msg <span class="hljs-keyword">in</span> messages:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;msg.<span class="hljs-built_in">type</span>&#125;</span>: <span class="hljs-subst">&#123;msg.content&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure><p><strong>更清晰的消息定义方式：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> ChatPromptTemplate, SystemMessagePromptTemplate, HumanMessagePromptTemplate<br><br><span class="hljs-comment"># 显式定义每种消息类型</span><br>system_message_prompt = SystemMessagePromptTemplate.from_template(<br>    <span class="hljs-string">&quot;你是&#123;role&#125;，擅长&#123;expertise&#125;领域&quot;</span><br>)<br>human_message_prompt = HumanMessagePromptTemplate.from_template(<br>    <span class="hljs-string">&quot;&#123;question&#125;&quot;</span><br>)<br><br>chat_prompt = ChatPromptTemplate.from_messages([<br>    system_message_prompt,<br>    human_message_prompt<br>])<br><br><span class="hljs-comment"># 使用</span><br>formatted = chat_prompt.<span class="hljs-built_in">format</span>(<br>    role=<span class="hljs-string">&quot;数据分析师&quot;</span>,<br>    expertise=<span class="hljs-string">&quot;统计和可视化&quot;</span>,<br>    question=<span class="hljs-string">&quot;如何分析销售数据？&quot;</span><br>)<br><span class="hljs-built_in">print</span>(formatted)<br></code></pre></td></tr></table></figure><h3 id="🎭-3-FewShotPromptTemplate（少样本模板）">🎭 3. FewShotPromptTemplate（少样本模板）</h3><p>包含示例的模板，帮助模型理解任务格式：</p><p>python</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> langchain.prompts <span class="hljs-keyword">import</span> FewShotPromptTemplate, PromptTemplate<br><br><span class="hljs-comment"># 定义示例</span><br>examples = [<br>    &#123;<br>        <span class="hljs-string">&quot;input&quot;</span>: <span class="hljs-string">&quot;高兴&quot;</span>,<br>        <span class="hljs-string">&quot;output&quot;</span>: <span class="hljs-string">&quot;😊&quot;</span><br>    &#125;,<br>    &#123;<br>        <span class="hljs-string">&quot;input&quot;</span>: <span class="hljs-string">&quot;伤心&quot;</span>,<br>        <span class="hljs-string">&quot;output&quot;</span>: <span class="hljs-string">&quot;😢&quot;</span><br>    &#125;,<br>    &#123;<br>        <span class="hljs-string">&quot;input&quot;</span>: <span class="hljs-string">&quot;惊讶&quot;</span>,<br>        <span class="hljs-string">&quot;output&quot;</span>: <span class="hljs-string">&quot;😲&quot;</span><br>    &#125;<br>]<br><br><span class="hljs-comment"># 定义单个示例的格式</span><br>example_prompt = PromptTemplate(<br>    input_variables=[<span class="hljs-string">&quot;input&quot;</span>, <span class="hljs-string">&quot;output&quot;</span>],<br>    template=<span class="hljs-string">&quot;输入: &#123;input&#125;\n输出: &#123;output&#125;&quot;</span><br>)<br><br><span class="hljs-comment"># 创建少样本模板</span><br>few_shot_prompt = FewShotPromptTemplate(<br>    examples=examples,<br>    example_prompt=example_prompt,<br>    prefix=<span class="hljs-string">&quot;将情感词语转换为表情符号:&quot;</span>,<br>    suffix=<span class="hljs-string">&quot;输入: &#123;user_input&#125;\n输出:&quot;</span>,<br>    input_variables=[<span class="hljs-string">&quot;user_input&quot;</span>],<br>    example_separator=<span class="hljs-string">&quot;\n\n&quot;</span><br>)<br><br><span class="hljs-comment"># 使用</span><br>result = few_shot_prompt.<span class="hljs-built_in">format</span>(user_input=<span class="hljs-string">&quot;生气&quot;</span>)<br><span class="hljs-built_in">print</span>(result)<br></code></pre></td></tr></table></figure><h2 id="6-Retriever">6 Retriever</h2><p>LangChain中的<strong>Retriever（检索器）</strong> 是一个核心组件，用于从知识库中<strong>检索与查询最相关的文档片段</strong>，是实现RAG（检索增强生成）的关键。</p><h3 id="📚-1-Retriever-的核心作用">📚 1. Retriever 的核心作用</h3><p><strong>Retriever = 智能搜索引擎</strong>，它：</p><ul><li>接收用户的查询（query）</li><li>从文档库（vectorstore等）中找到最相关的文档片段</li><li>将这些片段作为上下文提供给LLM，增强回答的准确性和专业性</li></ul><h3 id="🔍-2-Retriever-的工作原理">🔍 2. Retriever 的工作原理</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">用户问题 → Retriever → 向量相似度搜索 → 返回最相关文档 → 上下文 → <span class="hljs-keyword">LLM </span>→ 回答<br></code></pre></td></tr></table></figure><h3 id="📊-3-主要类型的Retriever">📊 3. 主要类型的Retriever</h3><h4 id="3-1-VectorStore-Retriever（最常用）">3.1 <strong>VectorStore Retriever</strong>（最常用）</h4><p><strong>核心思想</strong>：将文档转换为向量（嵌入），通过向量相似度搜索找到最相关的文档。</p><p><strong>工作流程</strong>：</p><ol><li><strong>文档向量化</strong>：使用嵌入模型（如BERT、OpenAI Embeddings）将文本转换为高维向量</li><li><strong>向量存储</strong>：将向量存入向量数据库（FAISS、Chroma等）</li><li><strong>查询向量化</strong>：将用户问题也转换为向量</li><li><strong>相似度计算</strong>：计算查询向量与所有文档向量的余弦相似度</li><li><strong>排序返回</strong>：返回相似度最高的K个文档</li></ol><p>基于向量相似度搜索：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> langchain_community.vectorstores <span class="hljs-keyword">import</span> FAISS<br><span class="hljs-keyword">from</span> langchain_community.embeddings <span class="hljs-keyword">import</span> HuggingFaceEmbeddings<br><span class="hljs-keyword">from</span> langchain.text_splitter <span class="hljs-keyword">import</span> RecursiveCharacterTextSplitter<br><span class="hljs-keyword">from</span> langchain_community.document_loaders <span class="hljs-keyword">import</span> TextLoader<br><br><span class="hljs-comment"># 1. 加载文档</span><br>loader = TextLoader(<span class="hljs-string">&quot;document.txt&quot;</span>)<br>documents = loader.load()<br><br><span class="hljs-comment"># 2. 分割文档</span><br>text_splitter = RecursiveCharacterTextSplitter(chunk_size=<span class="hljs-number">500</span>, chunk_overlap=<span class="hljs-number">50</span>)<br>chunks = text_splitter.split_documents(documents)<br><br><span class="hljs-comment"># 3. 创建向量存储</span><br>embeddings = HuggingFaceEmbeddings()<br>vectorstore = FAISS.from_documents(chunks, embeddings)<br><br><span class="hljs-comment"># 4. 创建Retriever</span><br>retriever = vectorstore.as_retriever(<br>    search_type=<span class="hljs-string">&quot;similarity&quot;</span>,  <span class="hljs-comment"># 相似度搜索</span><br>    search_kwargs=&#123;<span class="hljs-string">&quot;k&quot;</span>: <span class="hljs-number">4</span>&#125;      <span class="hljs-comment"># 返回4个最相关的文档块</span><br>)<br><br><span class="hljs-comment"># 使用Retriever</span><br>query = <span class="hljs-string">&quot;什么是机器学习？&quot;</span><br>relevant_docs = retriever.get_relevant_documents(query)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;找到 <span class="hljs-subst">&#123;<span class="hljs-built_in">len</span>(relevant_docs)&#125;</span> 个相关文档&quot;</span>)<br></code></pre></td></tr></table></figure><h4 id="3-2-BM25-Retriever（传统文本检索）">3.2 <strong>BM25 Retriever</strong>（传统文本检索）</h4><p><strong>核心思想</strong>：基于关键词频率统计的传统检索算法，不考虑语义。</p><p>基于词频和逆文档频率：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> langchain_community.retrievers <span class="hljs-keyword">import</span> BM25Retriever<br><span class="hljs-keyword">from</span> langchain_community.document_loaders <span class="hljs-keyword">import</span> TextLoader<br><br><span class="hljs-comment"># 加载文档</span><br>loader = TextLoader(<span class="hljs-string">&quot;document.txt&quot;</span>)<br>documents = loader.load()<br><br><span class="hljs-comment"># 创建BM25 Retriever</span><br>bm25_retriever = BM25Retriever.from_documents(documents)<br>bm25_retriever.k = <span class="hljs-number">3</span>  <span class="hljs-comment"># 返回3个结果</span><br><br><span class="hljs-comment"># 检索</span><br>results = bm25_retriever.get_relevant_documents(<span class="hljs-string">&quot;人工智能应用&quot;</span>)<br></code></pre></td></tr></table></figure><h4 id="3-3-Ensemble-Retriever（集成检索器）">3.3 <strong>Ensemble Retriever</strong>（集成检索器）</h4><p><strong>核心思想</strong>：结合多种检索方法的优势，通过加权投票提高检索质量。</p><p><strong>集成策略</strong>：</p><ol><li><strong>加权分数融合</strong>：<code>final_score = w1*score1 + w2*score2</code></li><li><strong>结果合并去重</strong>：按分数排序，去除重复文档</li><li><strong>重排序</strong>：用更复杂的模型对初筛结果重新排序</li></ol><p>结合多种检索方法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> langchain.retrievers <span class="hljs-keyword">import</span> EnsembleRetriever<br><span class="hljs-keyword">from</span> langchain_community.retrievers <span class="hljs-keyword">import</span> BM25Retriever<br><br><span class="hljs-comment"># 创建不同的retriever</span><br>vector_retriever = vectorstore.as_retriever(search_kwargs=&#123;<span class="hljs-string">&quot;k&quot;</span>: <span class="hljs-number">3</span>&#125;)<br>bm25_retriever = BM25Retriever.from_documents(chunks)<br>bm25_retriever.k = <span class="hljs-number">3</span><br><br><span class="hljs-comment"># 集成检索器</span><br>ensemble_retriever = EnsembleRetriever(<br>    retrievers=[vector_retriever, bm25_retriever],<br>    weights=[<span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>]  <span class="hljs-comment"># 权重各50%</span><br>)<br><br><span class="hljs-comment"># 检索</span><br>results = ensemble_retriever.get_relevant_documents(query)<br></code></pre></td></tr></table></figure><h4 id="3-4-Parent-Document-Retriever">3.4 <strong>Parent Document Retriever</strong></h4><p><strong>核心思想</strong>：维护文档的两级结构，用小文档块检索，返回大的父文档上下文。</p><p><strong>为什么需要</strong>：</p><ol><li><strong>检索精度</strong>：小文档块（子文档）更容易精确匹配</li><li><strong>上下文完整</strong>：返回父文档保持信息完整性</li><li><strong>避免碎片化</strong>：防止答案被切分到不同块</li></ol><p>检索大块文档，返回相关的小块：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> langchain.retrievers <span class="hljs-keyword">import</span> ParentDocumentRetriever<br><span class="hljs-keyword">from</span> langchain.storage <span class="hljs-keyword">import</span> InMemoryStore<br><span class="hljs-keyword">from</span> langchain_text_splitters <span class="hljs-keyword">import</span> RecursiveCharacterTextSplitter<br><br><span class="hljs-comment"># 创建不同粒度的splitter</span><br>child_splitter = RecursiveCharacterTextSplitter(chunk_size=<span class="hljs-number">200</span>)  <span class="hljs-comment"># 小块</span><br>parent_splitter = RecursiveCharacterTextSplitter(chunk_size=<span class="hljs-number">1000</span>) <span class="hljs-comment"># 大块</span><br><br><span class="hljs-comment"># 创建存储</span><br>vectorstore = FAISS.from_documents([], embeddings)<br>store = InMemoryStore()<br><br><span class="hljs-comment"># 创建ParentDocumentRetriever</span><br>retriever = ParentDocumentRetriever(<br>    vectorstore=vectorstore,<br>    docstore=store,<br>    child_splitter=child_splitter,<br>    parent_splitter=parent_splitter,<br>)<br><br><span class="hljs-comment"># 添加文档</span><br>retriever.add_documents(documents)<br><br><span class="hljs-comment"># 检索时返回子块，但可以获取父文档</span><br>docs = retriever.get_relevant_documents(query)<br></code></pre></td></tr></table></figure><h3 id="🛠️-4-Retriever-的关键配置参数">🛠️ 4. Retriever 的关键配置参数</h3><h4 id="搜索类型（search-type）：">搜索类型（search_type）：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python">retriever = vectorstore.as_retriever(<br>    <span class="hljs-comment"># 1. similarity: 余弦相似度（默认）</span><br>    search_type=<span class="hljs-string">&quot;similarity&quot;</span>,<br>    <br>    <span class="hljs-comment"># 2. mmr: 最大边际相关性（提高多样性）</span><br>    search_type=<span class="hljs-string">&quot;mmr&quot;</span>,<br>    search_kwargs=&#123;<br>        <span class="hljs-string">&quot;k&quot;</span>: <span class="hljs-number">5</span>,                    <span class="hljs-comment"># 检索5个文档</span><br>        <span class="hljs-string">&quot;fetch_k&quot;</span>: <span class="hljs-number">20</span>,             <span class="hljs-comment"># 从20个候选中选择</span><br>        <span class="hljs-string">&quot;lambda_mult&quot;</span>: <span class="hljs-number">0.7</span>         <span class="hljs-comment"># 多样性参数</span><br>    &#125;,<br>    <br>    <span class="hljs-comment"># 3. similarity_score_threshold: 相似度阈值</span><br>    search_type=<span class="hljs-string">&quot;similarity_score_threshold&quot;</span>,<br>    search_kwargs=&#123;<br>        <span class="hljs-string">&quot;score_threshold&quot;</span>: <span class="hljs-number">0.8</span>     <span class="hljs-comment"># 只返回相似度&gt;0.8的</span><br>    &#125;<br>)<br></code></pre></td></tr></table></figure><h4 id="搜索参数（search-kwargs）：">搜索参数（search_kwargs）：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">retriever = vectorstore.as_retriever(<br>    search_kwargs=&#123;<br>        <span class="hljs-string">&quot;k&quot;</span>: <span class="hljs-number">4</span>,                    <span class="hljs-comment"># 返回4个结果</span><br>        <span class="hljs-string">&quot;filter&quot;</span>: &#123;<span class="hljs-string">&quot;category&quot;</span>: <span class="hljs-string">&quot;技术&quot;</span>&#125;,  <span class="hljs-comment"># 过滤条件</span><br>        <span class="hljs-string">&quot;fetch_k&quot;</span>: <span class="hljs-number">20</span>,             <span class="hljs-comment"># 初始获取数量（MMR用）</span><br>    &#125;<br>)<br></code></pre></td></tr></table></figure><h3 id="📋-5-Retriever-类型对比表">📋 5. Retriever 类型对比表</h3><table><thead><tr><th style="text-align:left">Retriever类型</th><th style="text-align:left">优点</th><th style="text-align:left">缺点</th><th style="text-align:left">适用场景</th></tr></thead><tbody><tr><td style="text-align:left"><strong>VectorStore</strong></td><td style="text-align:left">语义理解强，准确率高</td><td style="text-align:left">需要预计算嵌入，存储空间大</td><td style="text-align:left">语义搜索，文档问答</td></tr><tr><td style="text-align:left"><strong>BM25</strong></td><td style="text-align:left">无需训练，速度快</td><td style="text-align:left">无法理解语义，关键词依赖</td><td style="text-align:left">关键词明确的传统检索</td></tr><tr><td style="text-align:left"><strong>Ensemble</strong></td><td style="text-align:left">结合多种方法，效果稳定</td><td style="text-align:left">计算成本高，复杂度大</td><td style="text-align:left">对准确率要求高的场景</td></tr><tr><td style="text-align:left"><strong>ParentDoc</strong></td><td style="text-align:left">保持上下文完整性</td><td style="text-align:left">实现复杂，存储开销大</td><td style="text-align:left">需要上下文连贯的长文档</td></tr><tr><td style="text-align:left"><strong>HyDE</strong></td><td style="text-align:left">提高检索相关性</td><td style="text-align:left">需要额外LLM调用</td><td style="text-align:left">复杂问题，需要推理</td></tr></tbody></table><h3 id="💡-6-最佳实践建议">💡 6. 最佳实践建议</h3><ol><li><strong>分块策略</strong>：根据文档类型调整chunk_size（技术文档500-1000，对话200-500）</li><li><strong>重叠设置</strong>：chunk_overlap设为chunk_size的10-20%，保持上下文连贯</li><li><strong>混合检索</strong>：对重要应用使用Ensemble Retriever提高稳定性</li><li><strong>过滤优化</strong>：为文档添加元数据（来源、日期、类别），便于过滤</li><li><strong>评估迭代</strong>：定期用测试集评估检索效果，调整参数</li><li><strong>缓存机制</strong>：对频繁查询实施缓存，提高响应速度</li></ol>]]></content>
    
    
    <categories>
      
      <category>人工智能</category>
      
    </categories>
    
    
    <tags>
      
      <tag>langchain</tag>
      
      <tag>ChatGPT</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>React框架</title>
    <link href="/2025/12/15/React/"/>
    <url>/2025/12/15/React/</url>
    
    <content type="html"><![CDATA[<h1>React</h1><h2 id="Let’s-start">Let’s start</h2><h3 id="方法一：使用官方推荐工具（最快）">方法一：使用官方推荐工具（最快）</h3><h4 id="1-使用-Vite（推荐）">1. 使用 Vite（推荐）</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 使用 npm</span><br>npm create vite@latest my-react-app -- --template react<br><span class="hljs-comment"># 或使用 yarn</span><br>yarn create vite my-react-app --template react<br><span class="hljs-comment"># 或使用 pnpm</span><br>pnpm create vite my-react-app --template react<br><br><span class="hljs-comment"># 进入项目目录</span><br><span class="hljs-built_in">cd</span> my-react-app<br><br><span class="hljs-comment"># 安装依赖</span><br>npm install<br><span class="hljs-comment"># 或</span><br>yarn<br><span class="hljs-comment"># 或</span><br>pnpm install<br><br><span class="hljs-comment"># 启动开发服务器</span><br>npm run dev<br></code></pre></td></tr></table></figure><h4 id="2-使用-Create-React-App（传统方式）">2. 使用 Create React App（传统方式）</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">npx create-react-app my-app<br><span class="hljs-built_in">cd</span> my-app<br>npm start<br></code></pre></td></tr></table></figure><h3 id="方法二：手动搭建（了解原理）">方法二：手动搭建（了解原理）</h3><h4 id="1-初始化项目">1. 初始化项目</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mkdir</span> my-react-app<br><span class="hljs-built_in">cd</span> my-react-app<br>npm init -y<br></code></pre></td></tr></table></figure><h4 id="2-安装依赖">2. 安装依赖</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 安装 React 核心库</span><br>npm install react react-dom<br><br><span class="hljs-comment"># 安装开发依赖</span><br>npm install -D @types/react @types/react-dom typescript vite<br><span class="hljs-comment"># 如果需要，可以安装其他工具如 eslint, prettier 等</span><br></code></pre></td></tr></table></figure><h4 id="3-创建项目结构">3. 创建项目结构</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">my-react-app/<br>├── index.html<br>├── package.json<br>├── tsconfig.json（如果使用 TypeScript）<br>├── vite.config.ts<br>├── public/<br>└── src/<br>    ├── App.tsx<br>    ├── main.tsx<br>    └── index.css<br></code></pre></td></tr></table></figure><h4 id="4-配置文件">4. 配置文件</h4><p><strong>index.html</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;zh-CN&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>React App<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/src/main.tsx&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>vite.config.ts</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; defineConfig &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vite&#x27;</span><br><span class="hljs-keyword">import</span> react <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@vitejs/plugin-react&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(&#123;<br>  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">react</span>()],<br>&#125;)<br></code></pre></td></tr></table></figure><p><strong>src/main.tsx</strong></p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-dom/client&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./index.css&#x27;</span><br><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;root&#x27;</span>)!).<span class="hljs-title function_">render</span>(<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">React.StrictMode</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">React.StrictMode</span>&gt;</span></span><br>)<br></code></pre></td></tr></table></figure><p><strong>src/App.tsx</strong></p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;App&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello React!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure><h4 id="5-添加脚本到-package-json">5. 添加脚本到 package.json</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;dev&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;vite&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;build&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;vite build&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;preview&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;vite preview&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="方法三：使用-Next-js（全栈方案）">方法三：使用 Next.js（全栈方案）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">npx create-next-app@latest my-app<br><span class="hljs-built_in">cd</span> my-app<br>npm run dev<br></code></pre></td></tr></table></figure><h2 id="组件">组件</h2><ul><li>React 允许你将标签、CSS 和 JavaScript 组合成自定义“组件”，即 <strong>应用程序中可复用的 UI 元素</strong></li><li>定义组件：<strong>React 组件是一段可以 使用标签进行扩展 的 JavaScript 函数</strong></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Profile</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://i.imgur.com/MK3eW3Am.jpg&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;Katherine Johnson&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">    /&gt;</span></span><br>  )<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><p>小写开头标签指的是 HTML 标签。</p><p>大写开头标签指的是自定义组件。</p></li><li><p>不要嵌套定义</p></li><li><p>分文件组织定义</p></li><li><p><strong>通常，文件中仅包含一个组件时，人们会选择默认导出，而当文件中包含多个组件或某个值需要导出时，则会选择具名导出。</strong></p></li><li><p><strong>在 React 中，渲染逻辑和标签共同存在于同一个地方——组件</strong></p></li><li><p><strong>JSX</strong></p><ul><li>只能返回一个根元素</li><li>标签必须闭合</li><li>使用驼峰式命名法给 所有 大部分属性命名</li><li>使用大括号来引用值，使用引号来引用字符串</li><li>使用 “双大括号”：JSX 中的 CSS 和 对象</li></ul></li><li><p><strong>Props</strong></p><ul><li>要传递 props，请将它们添加到 JSX，就像使用 HTML 属性一样。</li><li>要读取 props，请使用 <code>function Avatar({ person, size })</code> 解构语法。</li><li>你可以指定一个默认值，如 <code>size = 100</code>，用于缺少值或值为 <code>undefined</code> 的 props 。</li><li>你可以使用 <code>&lt;Avatar {...props} /&gt;</code> JSX 展开语法转发所有 props，但不要过度使用它！</li><li>像 <code>&lt;Card&gt;&lt;Avatar /&gt;&lt;/Card&gt;</code> 这样的嵌套 JSX，将被视为 <code>Card</code> 组件的 <code>children</code> prop。</li><li>Props 是只读的时间快照：每次渲染都会收到新版本的 props。</li><li>你不能改变 props。当你需要交互性时，你可以设置 state。</li></ul></li><li><p><strong>渲染</strong></p><ul><li>在 React，你可以使用 JavaScript 来控制分支逻辑。</li><li>你可以使用 <code>if</code> 语句来选择性地返回 JSX 表达式。</li><li>你可以选择性地将一些 JSX 赋值给变量，然后用大括号将其嵌入到其他 JSX 中。</li><li>在 JSX 中，<code>{cond ? &lt;A /&gt; : &lt;B /&gt;}</code> 表示 <em>“当 <code>cond</code> 为真值时, 渲染 <code>&lt;A /&gt;</code>，否则 <code>&lt;B /&gt;</code>”</em>。</li><li>在 JSX 中，<code>{cond &amp;&amp; &lt;A /&gt;}</code> 表示 <em>“当 <code>cond</code> 为真值时, 渲染 <code>&lt;A /&gt;</code>，否则不进行渲染”</em>。</li><li>快捷的表达式很常见，但如果你更倾向于使用 <code>if</code>，你也可以不使用它们。</li></ul></li><li><p><strong>响应事件</strong></p><ul><li>你可以通过将函数作为 prop 传递给元素如 <code>&lt;button&gt;</code> 来处理事件。</li><li>必须传递事件处理函数，<strong>而非函数调用！</strong> <code>onClick={handleClick}</code> ，不是 <code>onClick={handleClick()}</code>。</li><li>你可以单独或者内联定义事件处理函数。</li><li>事件处理函数在组件内部定义，所以它们可以访问 props。</li><li>你可以在父组件中定义一个事件处理函数，并将其作为 prop 传递给子组件。</li><li>你可以根据特定于应用程序的名称定义事件处理函数的 prop。</li><li>事件会向上传播。通过事件的第一个参数调用 <code>e.stopPropagation()</code> 来防止这种情况。</li><li>事件可能具有不需要的浏览器默认行为。调用 <code>e.preventDefault()</code> 来阻止这种情况。</li><li>从子组件显式调用事件处理函数 prop 是事件传播的另一种优秀替代方案。</li></ul></li><li><p><strong>State</strong></p><ul><li>当一个组件需要在多次渲染间“记住”某些信息时使用 state 变量。</li><li>State 变量是通过调用 <code>useState</code> Hook 来声明的。</li><li>Hook 是以 <code>use</code> 开头的特殊函数。它们能让你 “hook” 到像 state 这样的 React 特性中。</li><li>State 是组件私有的。如果你在两个地方渲染它，则每个副本都有独属于自己的 state。</li><li>在一个 React 应用中一次屏幕更新都会发生以下三个步骤：<ol><li>触发</li><li>渲染</li><li>提交</li></ol></li><li>设置 state 请求一次新的渲染。当你调用 <code>useState</code> 时，React 会为你提供<strong>该次渲染</strong> 的一张 state 快照。每个渲染（以及其中的函数）始终“看到”的是 React 提供给<strong>这个</strong> 渲染的 state 快照。</li><li>React 会在事件处理函数执行完成之后处理 state 更新。这被称为批处理。</li><li>要在一个事件中多次更新某些 state，你可以使用 <code>setNumber(n =&gt; n + 1)</code> 更新函数。</li><li>将 React 中所有的 state 都视为不可直接修改的。不要直接修改一个对象，而要为它创建一个 <strong>新</strong> 版本，并通过把 state 设置成这个新版本来触发重新渲染。想要减少重复的拷贝代码，可以使用 Immer。</li><li>更新数组的技巧</li></ul></li><li><p><strong>状态管理</strong></p><ul><li>声明式UI：声明式编程意味着为每个视图状态声明 UI 而非细致地控制 UI（命令式）。</li><li>state结构的选择：合并，减少出错更新，避免冗余和重复，扁平的state避免嵌套等等。</li><li>组件间共享状态：props，state</li><li>只要在相同位置渲染的是相同组件， React 就会保留状态。</li><li>state 不会被保存在 JSX 标签里。它与你在树中放置该 JSX 的位置相关联。</li><li>你可以通过为一个子树指定一个不同的 key 来重置它的 state。</li><li>不要嵌套组件的定义，否则你会意外地导致 state 被重置。</li><li>把 <code>useState</code> 转化为 <code>useReducer</code>：<ol><li>通过事件处理函数 dispatch actions；</li><li>编写一个 reducer 函数，它接受传入的 state 和一个 action，并返回一个新的 state；</li><li>使用 <code>useReducer</code> 替换 <code>useState</code></li></ol></li><li>Context 使组件向其下方的整个树提供信息。</li><li>传递 Context 的方法:<ol><li>通过 <code>export const MyContext = createContext(defaultValue)</code> 创建并导出 context。</li><li>在无论层级多深的任何子组件中，把 context 传递给 <code>useContext(MyContext)</code> Hook 来读取它。</li><li>在父组件中把 children 包在 <code>&lt;MyContext value={...}&gt;</code> 中来提供 context。</li></ol></li></ul></li><li><p><strong>脱围机制</strong></p><ul><li><strong>ref</strong><ul><li>与 state 不同，设置 ref 的 <code>current</code> 值不会触发重新渲染。</li><li>不要在渲染过程中读取或写入 <code>ref.current</code>。这使你的组件难以预测。</li><li>你通过传递 <code>&lt;div ref={myRef}&gt;</code> 指示 React 将 DOM 节点放入 <code>myRef.current</code>。</li><li>通常，你会将 refs 用于非破坏性操作，例如聚焦、滚动或测量 DOM 元素。</li></ul></li><li><strong>Effect</strong><ul><li>与事件不同，Effect 由渲染本身引起，而非特定的交互。</li><li>默认情况下，Effect 在每次渲染（包括初始渲染）后运行。</li><li>如果所有依赖项都与上一次渲染时相同，React 会跳过本次 Effect。</li><li>空的依赖数组（<code>[]</code>）对应于组件的“挂载”，即组件被添加到页面上时。</li><li>清理函数：如果你的 Effect 因为重新挂载而出现问题，那么你需要实现一个清理函数。React 会在 Effect 再次运行之前和在组件卸载时调用你的清理函数。</li><li>不需要Effect的诸多情况</li><li>在编写和读取 Effect 时，要独立地考虑每个 Effect（如何开始和停止同步），而不是从组件的角度思考（如何挂载、更新或卸载）。</li><li>检查工具验证在 Effect 内部使用的所有响应式值都被指定为依赖项。</li><li>事件处理函数和Effect的区别：响应式vs非响应式</li><li>你可以将非响应式逻辑从 Effect 移到 Effect Event 中。</li><li>只在 Effect 内部调用 Effect Event。</li><li>如果 Effect 的不同部分因不同原因需要重新运行，请将其拆分为多个 Effect。</li><li>如果你想读取最新值而不“反应”它，请从 Effect 中提取出一个 Effect Event。</li><li>自定义 Hook 让你可以在组件间共享逻辑。</li><li>自定义 Hook 命名必须以 <code>use</code> 开头，后面跟一个大写字母。</li><li>自定义 Hook 共享的只是状态逻辑，不是状态本身</li></ul></li></ul></li></ul><p>​</p>]]></content>
    
    
    <categories>
      
      <category>开发技术</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
      <tag>Web开发</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Transformer</title>
    <link href="/2025/12/14/Transformer/"/>
    <url>/2025/12/14/Transformer/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>人工智能</category>
      
    </categories>
    
    
    <tags>
      
      <tag>LLM</tag>
      
      <tag>NLP</tag>
      
      <tag>Transformer</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ASD儿童干预论文阅读（二）</title>
    <link href="/2025/11/27/ASD%E5%84%BF%E7%AB%A5%E5%B9%B2%E9%A2%84%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
    <url>/2025/11/27/ASD%E5%84%BF%E7%AB%A5%E5%B9%B2%E9%A2%84%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h2 id="Lessons-from-Real-World-Settings-What-Makes-It-Uniquely-Difficult-to-Design-Cognitive-Training-Programs-for-Children-with-Autism-Spectrum-Disorder-and-Other-Developmental-Disabilities">Lessons from Real-World Settings: What Makes It Uniquely Difficult to Design Cognitive Training Programs for Children with Autism Spectrum Disorder and Other Developmental Disabilities</h2><h2 id="1-系统细节">1 系统细节</h2><p><strong>目标用户：3-7 岁自闭症谱系障碍（ASD）及其他发育障碍儿童，需具备遵循简单指令、触屏操作精细运动能力，且能专注结构化活动 5-10 分钟，主要覆盖自闭症 1-2 级儿童。</strong></p><h3 id="1-1-三个独特功能">1.1 三个独特功能</h3><ul><li>正向强化（完成任务获得表扬、徽章、代币）</li><li>难度自适应（实时监测错误率和反应时间动态调整）</li><li>分步提示（言语、视觉、手势线索）</li></ul><h3 id="1-2-三个核心模块">1.2 三个核心模块</h3><table><thead><tr><th>模块</th><th>核心内容</th><th>设计目的</th></tr></thead><tbody><tr><td>自适应认知训练</td><td>每节含 3 个模块，每个模块 3-5 个任务，任务分解为 10-21 个递进难度；含互动教程、视听指令、反馈环节</td><td>针对性提升认知领域能力，适配个体技能水平</td></tr><tr><td>基础概念课程</td><td>40 + 独立认知模块，涵盖基础概念与表达</td><td>供低认知 / 运动功能儿童自主练习，灵活补充训练</td></tr><tr><td>游戏区</td><td>动画类游戏</td><td>作为完成训练后的奖励，提升动机与探索欲</td></tr></tbody></table><h2 id="2-实验观察">2 实验观察</h2><table><thead><tr><th>实验阶段</th><th>核心内容</th><th>目的</th></tr></thead><tbody><tr><td>2 个月实地观察</td><td>在 Dubu 临床中心观察 40 次（每次 10-15 分钟）儿童使用行为。</td><td>了解系统功能，观察儿童的互动方式，确定哪些功能得到了使用。探索最佳使用方式，聚焦于最关键的设计特征。</td></tr><tr><td>4 周用户研究</td><td>对话形式。看护者带儿童居家使用系统，配合基线访谈（30-40 分钟）、退出访谈（50-70 分钟）及每周调查</td><td><img src="/2025/11/27/ASD%E5%84%BF%E7%AB%A5%E5%B9%B2%E9%A2%84%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%EF%BC%88%E4%BA%8C%EF%BC%89/image-20251127192740005.png" class="" title="摘录"></td></tr><tr><td>专家访谈</td><td>与 6 名核心开发者 / 治疗师访谈（30 分钟 - 1 小时），了解设计决策与场试经验</td><td>这些问题分为两个部分：1）为满足自闭症儿童需求而设计的Dubupang的独特功能；2）在实地试验、开发过程、设计决策以及应用开发过程中面临的挑战方面所做的观察。</td></tr></tbody></table><h2 id="3-访谈结果">3 访谈结果</h2><h3 id="3-1-注意力与参与度：系统设计需适配个体与场景差异">3.1 注意力与参与度：系统设计需适配个体与场景差异</h3><ol><li><strong>注意力管理</strong>：固定任务量难以适配不同儿童的注意力基线。需看护者通过 “固定 10-15 分钟 / 次的训练 schedule”“限制训练环境为家庭” 等干预，结合 “难易任务交替” 的建议优化，提升任务完成率。</li><li><strong>时间调控</strong>：管理屏幕使用时间对儿童至关重要，尤其是有特殊需求的儿童，以确保数字媒体不会被过度使用。实际使用中，需看护者结合物理计时器手动分配各模块时间，会更符合实际使用情况。</li><li><strong>节奏调整与感官刺激</strong>：调整活动和指令的节奏对于儿童完成任务至关重要，因为这直接影响他们处理信息的能力。护理人员建议添加暂停和回放功能，以适应不同人的处理速度。</li><li><strong>感官刺激的管理</strong>：对自闭症儿童的感官刺激进行管理至关重要，这能防止他们过度受刺激。在实际使用中，护理人员要求在必要时进一步减少语音反馈和音效的功能，并建议音量控制应能实时调节，而不仅仅是通过设置页面。灵活、易操作且可按需使用的感官控制功能。</li><li><strong>个性化和情景化的自动定制</strong></li></ol><h3 id="3-2-个性化与适应性：系统预设功能难覆盖个体偏好，需人机协同优化">3.2 个性化与适应性：系统预设功能难覆盖个体偏好，需人机协同优化</h3><ol><li><strong>兴趣定制</strong>：系统提供 “自定义徽章奖励”，但无法满足个体特殊兴趣（如对特定恐龙物种的偏好），导致奖励激励效果有限。需看护者补充 “实物奖励（零食）”“情感鼓励” 等外部强化，同时建议增加 “自定义任务启动提示（如数字倒计时 / 交通灯切换可选）”，提升专注度。<strong>（提到可以借助生成式AI技术来定制用户的个性化奖励）</strong></li><li><strong>难度自适应</strong>：系统通过算法实时监测错误率 / 反应时间调整难度，并为需额外练习的儿童提供 “拓展模块”。看护者建议开放 “拓展模块手动选择权限”，并要求系统提供模块功能说明，以便根据儿童需求精准定制难度进阶路径。</li></ol><h3 id="3-3-教学设计与反馈：标准化设计存在认知负担，需看护者弥补理解缺口">3.3 教学设计与反馈：标准化设计存在认知负担，需看护者弥补理解缺口</h3><ol><li><strong>语言与多模态传递</strong>：系统采用 2-3 词（最长 5 词）的简化指令，适配 ASD 儿童语言理解能力，但部分儿童因词汇量有限或 “术语认知偏差”仍难理解；系统的 “视听 + 手势多模态教程” 虽符合文献建议，但儿童易因视觉元素吸引忽略听觉指令，需看护者通过 “重述指令”“手把手引导” 等干预，整合多模态信息。</li><li><strong>图像提示与反馈机制</strong>：图像放置位置在ASD儿童个性化和用户一致性中需要权衡，需要照顾者亲自指导。DubuPang的反馈机制会为正确答案提供庆祝性的动画和声音，同时将错误回应降至最低——仅使用简单、不突兀的声音或视觉提示，随后重置屏幕以便再次尝试。这种方法旨在减轻失败感和挫折感，反而向年轻学习者灌输自信。护理人员建议，在尝试错误后，延长屏幕重置前的时间，这段额外的时间能让护理人员更好地向孩子们解释他们所犯的错误</li></ol><h3 id="3-4-交互设计：技术无法替代物理引导，需强化看护者支持">3.4 交互设计：技术无法替代物理引导，需强化看护者支持</h3><ol><li><strong>触摸手势与冲动控制</strong>：系统集成了多种基于触摸的交互方式，但儿童（尤其执行功能弱的儿童）易在模块切换后沿用旧手势（此时需要父母教导、系统示范动作、口头提示等来帮助孩子们）；系统虽通过明确的任务开始和结束的提示减少冲动操作，但部分儿童仍会有冲动性的行为，需看护者 “手把手指导手势”“物理阻挡误触”“口头提醒任务规则”。</li><li><strong>物理交互支持</strong>：无障碍交互方面，考虑到幼儿本身的身体素质和发育情况，系统已扩大拖拽目标区域（略大于物体本身），适配精细运动不足，但无触屏经验或运动障碍儿童仍难完成操作。需看护者通过 “基础概念课程中的手势练习”“手对手引导” 帮助适应，同时建议系统增加 “触摸精度自定义” 功能，降低操作门槛。</li><li><strong>看护者照顾方法的指导和实时的监控</strong></li></ol><h2 id="4-反思与局限性">4 反思与局限性</h2><ul><li>传统设计原则与孤独症儿童场景下特殊需求的矛盾</li><li>家庭、父母照顾的重要性，弥补系统个性化的不足</li><li>个性化与可用性之间的矛盾</li><li>本研究着重考虑用户体验，没有在长期的干预效果上进行研究</li><li><strong>提出：技术用于自动化、照顾者用于个性化</strong></li></ul>]]></content>
    
    
    <categories>
      
      <category>ASD儿童干预</category>
      
      <category>调研</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VR</tag>
      
      <tag>AR</tag>
      
      <tag>HCI</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ASD儿童干预论文阅读（三）</title>
    <link href="/2025/10/31/ASD%E5%84%BF%E7%AB%A5%E5%B9%B2%E9%A2%84%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%EF%BC%88%E4%B8%89%EF%BC%89/"/>
    <url>/2025/10/31/ASD%E5%84%BF%E7%AB%A5%E5%B9%B2%E9%A2%84%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%EF%BC%88%E4%B8%89%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<table><thead><tr><th>标题</th><th>主题</th><th>提炼</th></tr></thead><tbody><tr><td>Caring for Children With Autism Spectrum Disorder, Part I: Prevalence, Etiology, and Core Features</td><td>分类、病因</td><td>ASD 可能是由多种因素引起的，包括遗传易感性和环境影响。治疗以药物治疗和心理辅导结合。所有 ASD 都具有三个定义特征：社交障碍、言语和非言语交流受限以及存在限制性和重复性行为和/或兴趣。ASD包括多种类型：经典自闭症（典型自闭症）、阿斯伯格综合征**（社交困难与兴趣狭窄，但语言和智力水平正常或超常（如机械记忆能力突出））**、儿童期崩解症以及待分类的广泛性发育障碍（PDD-NOS）</td></tr><tr><td>Parents’ Involvement in ASD Treatment: What Is Their Role?</td><td>父母的介入和情况的监控</td><td>亲社会行为疗法（PRT）：家长学习如何给予孩子清晰、不间断的指导；允许孩子选择活动或玩具；整合各种习得和维持任务；使用与孩子反应相关的自然强化物立即奖励适当的行为；以及奖励孩子在任务中的任何明确尝试或成功。 家长的干预效果在接受治疗师的指导后往往更有效。</td></tr><tr><td>Perception and Acoustic Features of Speech of Children with Autism Spectrum Disorders</td><td>ASD儿童的语音特征</td><td>正常人对于ASD儿童的语音辨识度明显低于正常儿童 ASD儿童在语音语调、高音会有所不同，不停重复某个词是正常现象</td></tr><tr><td>Temperament and Sensory Features of Children with Autism</td><td>ASD儿童的气质（行为特征）</td><td>自闭症儿童更内向、适应能力更差适应能力更差，坚持性更差，反应强度更低，对环境刺激的敏感性更低，积极情绪更低，消极情绪更高，注意力及行为控制能力更差，自我调节能力较差。 自闭症儿童异常感觉处理（视觉迷恋；听觉敏感） 高反应性、低反应性和感觉寻求。高反应性指的是表现出夸张的反应，导致对某些感觉刺激的回避或厌恶，而这些刺激通常不会被正常发育个体视为难以承受或具有威胁性（例如，捂住耳朵表示厌恶声音）。低反应性可能表现为缺乏行为反应或对感觉刺激反应迟钝（例如，忽略呼唤名字、对疼痛耐受力高）。感觉寻求行为是指儿童参与看似能提供强烈感觉输入的活动，表现为对特定刺激持续的兴趣和投入。 自闭症谱系障碍（ASD）中基于神经系统的刺激-奖赏系统差异可能在破坏支持趋近新感官刺激、产生积极情绪和增加探索行为的动机过程方面发挥核心作用</td></tr><tr><td>Sensory abnormalities in children with autism spectrum disorder</td><td>自闭症谱系障碍的感觉异常：干预措施</td><td>在感觉干预领域，感觉统合疗法（以儿童为中心）和感觉基础干预（以成人为主导）有所区别。 前者是在诊所进行的干预，通过游戏活动和感觉增强互动来改善儿童对感觉体验的适应性反应。这些干预通过激活前庭和<a href="https://www.sciencedirect.com/topics/neuroscience/somatosensory-system">躯体感觉系统的</a>粗大运动活动，旨在增强儿童整合感觉信息的能力，从而引导他们养成更有条理、更具适应性的行为，包括改善共同注意力、社交技能、运动计划能力和感知技能。在此过程中，治疗师会根据儿童正在发展的技能水平，选择一个“恰到好处的挑战”（<em>即</em>略高于儿童目前能够轻松完成的活动），并支持他们应对挑战的适应性反应。 相反，感觉统合干预是在课堂上进行的，使用单一感觉策略（例如治疗球或加重背心）来影响唤醒状态，其主要目的是降低高唤醒状态，这种状态在临床上可能表现为躁动不安、多动和自我刺激行为 感觉统合更有效</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>ASD儿童干预</category>
      
      <category>调研</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Medical</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ASD儿童干预论文阅读（一）</title>
    <link href="/2025/10/11/ASD%E5%84%BF%E7%AB%A5%E5%B9%B2%E9%A2%84%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%EF%BC%88%E4%B8%80%EF%BC%89/"/>
    <url>/2025/10/11/ASD%E5%84%BF%E7%AB%A5%E5%B9%B2%E9%A2%84%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<p><a href="https://dl.acm.org/doi/10.1145/3713043.3731502">PuppetVR: Towards Supporting Pretend Play through VR Storytelling for Neurodivergent Children</a></p><p><strong>VR</strong>在支持<strong>身体参与的创意表达和假装游戏</strong>方面的潜力。</p><ul><li>用户可录制自己扮演某一角色的动作与语音。</li><li>录制后，其他角色可自动播放之前录制内容，用户可与“过去的自己”互动。</li><li>支持多角色、多层级的表演叠加，形成完整的小剧场。</li></ul><p><a href="https://molecularautism.biomedcentral.com/articles/10.1186/2040-2392-5-37">Facing the challenge of teaching emotions to individuals with low and high-functioning autism using a new Serious game: a pilot study</a></p><p>教授情绪识别技能，包括面部表情、情绪性手势和社交场景中的情绪理解。</p><p><strong>手柄游戏。</strong></p><p>每个表情都与一个视觉非语言代码、一个相应的书面语言代码（包含情感词汇和惯用表达）和一个触觉模式相关联。</p><ul><li>玩家在虚拟城市中自由移动，与NPC互动触发社交场景。</li><li>每个场景后需要识别情绪，使用颜色、词语或习语作答。</li><li>正确回答可获得拼图碎片，集齐后可观看奖励动画并模仿情绪表情。</li></ul><p>类似的研究：<a href="https://www.researchgate.net/publication/288393928_LifeisGame_prototype_A_serious_game_about_emotions_for_children_with_autism_spectrum_disorders">LifeisGame prototype: A serious game about emotions for children with autism spectrum disorders</a></p><p><a href="https://www.sciencedirect.com/science/article/pii/S2468227620302520">Development of an affective-based e-healthcare system for autistic children</a></p><p>检测+应对孤独症患者的情绪</p><p><strong>完整的嵌入式系统。</strong></p><ul><li><strong>硬件部分（可穿戴设备）</strong>：监测交感神经系统活动；捕捉儿童的语音指令或情绪表达；</li><li><strong>软件部分</strong>：接收传感器数据；处理数据、进行情绪分类，基于Valence-Arousal（V-A）模型，将输入信号映射为7种情绪状态（如快乐、焦虑、厌恶、悲伤、无聊、注意、中性），当检测到情绪趋向崩溃时，自动播放音乐进行干预。</li><li><strong>电子健康模块</strong>：与专业治疗人士联系，统计数据，查看患者情绪数据、历史记录；安排视频会诊。</li></ul><p><a href="https://www.academia.edu/86206124/Designing_A_Virtual_Talking_Companion_to_Support_the_Social_Emotional_Learning_of_Children_with_ASD">Designing A Virtual Talking Companion to Support the Social-Emotional Learning of Children with ASD</a></p><p><strong>通过互动式讲故事提升其社交理解与情绪调节能力。</strong></p><p><strong>APP形式提供服务</strong></p><table><thead><tr><th>功能模块</th><th>实现方式</th></tr></thead><tbody><tr><td>🗣️ 对话交互</td><td>使用 <strong>自然语言界面</strong>（文本+语音），支持儿童输入，Amy 回应；<br>支持 <strong>开放域对话</strong> + <strong>选择题辅助</strong>（如答不上来，提供选项）</td></tr><tr><td>🔊 语音输出</td><td>集成 <strong>Google Text-to-Speech (TTS)</strong>，朗读故事与问题，适配阅读困难儿童</td></tr><tr><td>🧾 故事内容</td><td>基于 <strong>Carol Gray 的社交故事标准</strong> 编写，共12个主题，结构包括：引入 → 情境 → 冲突 → 正确行为 → 结论</td></tr><tr><td>🧠 理解评估</td><td>每段故事后提问 <strong>理解性问题</strong>（如“什么是轮流？”），使用 <strong>问题圈策略</strong>（提问-回答-反馈）</td></tr><tr><td>🧘 情绪调节</td><td>若检测到 <strong>连续答错或负面情绪</strong>，触发 <strong>呼吸训练模块</strong>；<br>使用 <strong>动画引导的方形呼吸法</strong>（Square Breathing）视频，时长 5–15 分钟</td></tr><tr><td>🖼️ 视觉界面</td><td>每段故事配有 <strong>插图</strong>，展示人物、场景、行为；<br>界面色彩丰富但避免过度刺激，考虑 ASD 儿童的感官敏感性</td></tr><tr><td>🧮 情绪识别</td><td>基于 <strong>Eren 系统</strong> 的方法，通过儿童输入内容判断情绪；<br>若识别失败，提供 <strong>情绪量表（Anger Scale）</strong> 让孩子选择当前情绪</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>ASD儿童干预</category>
      
      <category>调研</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VR</tag>
      
      <tag>AR</tag>
      
      <tag>HCI</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>产品规划随想——B站</title>
    <link href="/2025/09/11/%E4%BA%A7%E5%93%81%E8%A7%84%E5%88%92%E9%9A%8F%E6%83%B3%E2%80%94%E2%80%94B%E7%AB%99/"/>
    <url>/2025/09/11/%E4%BA%A7%E5%93%81%E8%A7%84%E5%88%92%E9%9A%8F%E6%83%B3%E2%80%94%E2%80%94B%E7%AB%99/</url>
    
    <content type="html"><![CDATA[<h1>哔哩哔哩——你感兴趣的视频都在B站</h1><p>一款软件产品的成功，不仅需要精湛的开发水平，更需要在规划阶段就有着长远的目光，以及在发展时不断迭代出新的功能且不偏离用户初心，让人们在使用一款软件产品时有一种与老朋友的熟识感和一种放松的归属感，又不失新鲜感。</p><p>哔哩哔哩作为一款国内年轻人的文化社区，被我们亲切地称为”B站“。在2009年刚上线时以动漫、游戏作为主要内容，在之后十几年间的发展中，逐渐扩大成为一个涵盖各个领域的创作者平台，如同一个中国版的Youtube。我将从这几个方面对这款软件产品做出介绍：</p><h2 id="主要功能">主要功能</h2><p>哔哩哔哩社区内容主要由个人内容创作者所创作的具有创造力的视频、文字内容所组成，这些原创内容博主被称为”UP主“。在B站，你可以是内容的<strong>浏览者</strong>，也可以是内容的<strong>创作者</strong>。社区拥有多个分区如生活、游戏、动漫、音乐、知识、娱乐等，用户可以在不同分区内选择视频内容进行观看，也可以通过平台提供的推荐算法依照个人的兴趣标签来获得视频内容的推荐。如果用户想自行进行内容创作，也没有任何门槛，只要视频内容质量及内容通过审核，就可以上线平台，并依照平台算法推荐给其他用户，真正达到社区内容共享。</p><p>除了视频等媒体内容浏览创作的功能，B站还提供了<strong>社交、购物</strong>等有意思的功能。在B站中，用户可以通过评论区、私信与其他用户进行沟通交流。另外B站也提供了与社区文化相符的动漫手办等的电商服务，以”会员购“的形式给用户提供有保障的商品。</p><h2 id="社区文化">社区文化</h2><p><strong>1.独特的激励机制，人人都可以成为大博主</strong>：B站内用户的地位都是平等的，每一个新创的账号粉丝量都是从零开始。用户可以发挥自己的才华与创意来创作有趣的内容，吸引其他用户来关注自己，逐渐成为一个有影响力的UP主。虽然这个过程没有那么容易，但平台会一直鼓励用户，如赠送粉丝数量牌、现金奖励、流量奖励、百大UP主评选等激励方法，使得整个社区呈现一个蒸蒸日上、不断良性竞争的氛围。</p><p><strong>2.独特的弹幕文化</strong>：B站首创的弹幕机制，实际上是一种漂浮于视频上方的评论系统，这些评论大多数非常简短易懂。这种非常简单的创意却解决了一个很现实的问题——以往视频评论区中评论与视频实时内容割裂的问题。引入简单的弹幕机制，使得人们在观看视频时犹如和很多同伴一起在观看这部视频，并一起交流各种有趣的看法，甚至弹幕文化有时超越了视频本身，形成了一种非常独特的观看氛围。</p><p><strong>3.浓厚的知识氛围</strong>：在十几年间社区规划的过程中，知识区逐渐吸引了众多来自各行各业的专业人士、行业精英等来分享高质量的视频教程，社区中也有热心搬运人士上传国内外优秀的高校课程，形成了互相促进、自由讨论的良好氛围，被用户亲切地成为”哔哩哔哩大学“。</p><p><strong>4.年轻潮流的社区文化</strong>：B站在社区主要用户的定义上将年轻、潮流、活力作为首要特征。平台中有很活力潮流的元素：进入APP后各种界面元素可以根据自己所选择的一些主题IP改变，富有个性；APP中很多功能使用更为新奇的方式来完成，比如奖励UP主用投币；每年愚人节时大会员会变成小会员；社区内流行的文化梗和虚拟偶像和有趣的”鬼畜“剪辑。每年B站还会举办相关的比赛来鼓励相关内容的创作。对于个人空间与社交形象，平台也提供评论卡片、头像挂件等多种方式来展现个人形象，增强集体归属感。</p><h2 id="商业模式与运营策略">商业模式与运营策略</h2><p><strong>B站是如何营利的？<strong>平台使用大会员的机制来向用户提供一些专属内容和服务如需要版权的电影、番剧和更高画质的视频，属于</strong>免费增值的商业模式</strong>；平台通过植入广告来收取广告宣传费，不过B站的广告植入较其他视频网站要好一些（没有视频开屏广告，在观看视频的过程中体验还算纯净）；平台直播也会从给UP主的打赏中收取一部分提成。</p><p>B站从一开始的单纯的动漫网站到现在涵盖直播、视频、游戏、商品等各种业务的大平台，通过外延的电竞、游戏、综艺来扩大自己的影响力与口碑，再通过自己平台的独特优势来提高自创IP的曝光度来反过来提高自己的收益，形成一个好的循环和模式。<strong>用户可以在平台上像在抖音一样刷短视频、像在网易公开课一样刷长视频、在爱奇艺一样刷电影电视剧、在AcFun一样刷番剧。<strong>这样一来大大提高了用户忠实度，一个平台解决很多问题，逐渐形成一个</strong>以视频为载体的、鼓励创意的文化社区和综合性平台</strong>。</p>]]></content>
    
    
    <categories>
      
      <category>产品分析</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Bilibili</tag>
      
      <tag>Product Analysis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Andrew Ng 大模型课程</title>
    <link href="/2025/01/09/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E8%AF%BE%E7%A8%8B/"/>
    <url>/2025/01/09/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E8%AF%BE%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h3 id="LLM">LLM</h3><ul><li>由监督学习训练而来</li><li>幻觉：LLM有时会编造一些知识</li><li>通用技术</li><li>web-based interface vs software-based applications</li><li>知识截止：只了解某一特定时间点前的知识</li><li>输入长度受限</li><li>处理结构化数据的能力不佳（如表格）</li><li>prompt有讲究</li><li>图像生成：扩散模型，噪声</li><li>RAG</li><li>微调：风格，领域知识，减小模型规模</li></ul><h3 id="CV">CV</h3><ul><li><p>边缘检测：</p><p>垂直/水平边缘检测：卷积，过滤器，正/负边缘</p></li><li><p>Padding : shrink,丢失图像边缘的信息</p><p>在周围再填充一层像素</p><p>valid/same convolutions</p></li><li><p>卷积步长</p></li><li><p>三维卷积 height*width*#channels</p></li><li><p>单层卷积网络</p></li><li><p>ConvNet</p></li><li><p>POOLING LAYER：保留关键特征，减小计算压力</p></li><li><p>FULLY-CONNECTED LAYER：类似神经网络中完整的一层</p></li><li><p>卷积的好处：参数共享（如边缘检测这样的参数可以多次利用）；稀疏链接（每个输出只与较少的几个输入有关）；平移不变性（图像平移不影响识别）</p></li><li><p>经典的网络架构：LeNet-5（识别数字），AlexNet ，VGG-16</p></li><li><p>Residual Net</p></li><li><p>1*1 convolution</p></li><li><p>Inception Network</p></li><li><p>迁移学习</p></li><li><p>数据增强（扩张数据集，计算机视觉很多受限于数据集不够）：镜像、反转、裁剪、色彩转换等方法</p></li><li><p>人工设计和数据量的平衡</p></li><li><p>建议：集成多个神经网络的预测结果；Multi-crop；使用开源代码，在此基础上迁移学习、微调。</p></li><li><p>Object localization</p></li><li><p>特征点检测：相应特征点对应的特征不能变</p></li><li><p>目标检测：卷积网络+图像上滑动窗口的截图：成本较高</p><p>解决：卷积的滑动窗口实现</p></li><li><p>bounding box的预测：YOLO算法</p></li><li><p>交并比：IoU，衡量对象检测的能力，用框的面积计算，阈值为0.5</p></li><li><p>非极大值抑制算法，看框内出现物体的概率pc，最终选择出一个代表单一物体的框</p></li><li><p>Anchor boxes</p></li><li><p>候选区域</p></li><li><p>face recognition / vertification</p></li><li><p>one-shot learning problem:similarity function</p></li><li><p>siamese Network:use to train similarity function</p></li></ul><h3 id="自然语言处理基础">自然语言处理基础</h3><ul><li><p>基础与应用：</p><ul><li>图灵测试</li><li>搜索引擎与广告投放：文本匹配、数据挖掘、信息检索</li><li>知识图谱</li><li>语言翻译、分析</li></ul></li><li><p>词表示与语言模型：</p><ul><li><p>词表示：计算词的相似度以及相关度</p><ul><li>近义词和上位词：操作性小</li><li>独热编码：用向量表示，基于上下文</li><li>低维向量表示</li></ul></li><li><p>语言模型：有能力根据前文预测下文的能力</p><ul><li><p>N-gram模型：只考虑前方有限的几个词，在大型数据集中计算概率（N一般只取2或3）；每一个词表示成一个符号</p></li><li><p>神经网络语言模型：每一个词表示成低维向量</p></li></ul></li></ul></li><li><p>预训练语言模型：参数和数据集的重要性</p><p>预训练-微调（筛选不需要的知识）</p></li></ul><h3 id="神经网络">神经网络</h3><ul><li>反向传播的思想计算梯度（梯度下降步骤中），链式法则</li><li>Word2Vec:skip-gram,CBOW,负例采样，灵活窗口采样，sub-sampling</li><li>循环神经网络RNN</li><li>门控循环单元GRU</li><li>长短期记忆网络LSTM</li><li>双向RNN</li><li>卷积神经网络CNN</li></ul><h3 id="Transformer和与训练语言模型">Transformer和与训练语言模型</h3><ul><li>注意力机制及其变体<ul><li>多向量输入</li><li>输出label/class</li><li>更复杂的CNN</li></ul></li><li>Transformer:<ul><li>Byte Pair Encoding</li><li>Position Encoding</li><li>Input = BPE + PE</li></ul></li></ul>]]></content>
    
    
    <categories>
      
      <category>人工智能</category>
      
    </categories>
    
    
    <tags>
      
      <tag>LLM</tag>
      
      <tag>NLP</tag>
      
      <tag>CV</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Andrew Ng 机器学习课程</title>
    <link href="/2024/11/29/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <url>/2024/11/29/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="Part1-Supervised-Machine-Learning-Regression-and-Classification">Part1 Supervised Machine Learning Regression and Classification</h2><h3 id="监督学习">监督学习</h3><ul><li>输入到输出 算法，给予正确的输入x和输出y对，使计算机可以正确或相近地预测相应输入后的正确输出。</li><li>分为回归和分类。</li><li>回归算法：数字预测如从房子面积的大小预测房价（y是连续的）</li><li>分类算法：（y是离散的）</li><li>多个参数进行分类或回归算法</li></ul><h3 id="非监督学习">非监督学习</h3><ul><li>集群</li><li>聚类算法：把不同的数据组分到不同的类中，算法自动决定分类依据，将相似的数据组到一组。</li><li>异常检测与降维</li></ul><h3 id="线性回归模式">线性回归模式</h3><ul><li><p>拟出直线</p></li><li><p>相关术语：训练集、输入变量/特征/输入特征（x）、输出变量/目标变量（y）、m（训练集的大小）。</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>:</mo><mtext>单个训练示例</mtext><mspace linebreak="newline"></mspace><mo stretchy="false">(</mo><msup><mi>x</mi><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup><mo separator="true">,</mo><msup><mi>y</mi><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup><mo stretchy="false">)</mo><mo>:</mo><mtext>第</mtext><mi>i</mi><mtext>个训练示例</mtext><mspace linebreak="newline"></mspace><mi>x</mi><mo>−</mo><mo>&gt;</mo><mi>f</mi><mo>−</mo><mo>&gt;</mo><mover accent="true"><mi>y</mi><mo>^</mo></mover><mo>:</mo><mtext>输入经过学习出的算法计算出预测值</mtext><mspace linebreak="newline"></mspace><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>w</mi><mi>x</mi><mo>+</mo><mi>b</mi><mo>:</mo><mtext>单变量线性回归</mtext></mrow><annotation encoding="application/x-tex">(x,y) :单个训练示例\\(x^{(i)},y^{(i)}):第i个训练示例\\x-&gt;f-&gt;\hat{y}:输入经过学习出的算法计算出预测值\\f(x)=wx+b:单变量线性回归</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">单个训练示例</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1.188em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">第</span><span class="mord mathnormal">i</span><span class="mord cjk_fallback">个训练示例</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mord">−</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord">−</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">输入经过学习出的算法计算出预测值</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">单变量线性回归</span></span></span></span></span></p></li></ul><h3 id="代价函数">代价函数</h3><ul><li><p>代价函数用于衡量一条直线与训练数据的拟合程度</p></li><li><p>平方误差成本函数：线性回归计算中最常用的成本函数</p></li><li><p>计算方式：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>J</mi><mo stretchy="false">(</mo><mi>w</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>1</mn><mrow><mn>2</mn><mi>m</mi></mrow></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><mrow><mo stretchy="false">(</mo><msup><mover accent="true"><mi>y</mi><mo>^</mo></mover><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup><mo>−</mo><msup><mi>y</mi><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow></mrow><annotation encoding="application/x-tex">J(w,b) = \frac{1}{2m}\sum_{i=1}^{m} {(\hat{y}^{(i)}-y^{(i)})^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord mathnormal">m</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen">(</span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></span></p></li><li><p>线性回归的目的是需要找到合适的w,b使J尽量小</p></li><li><p>使J最小的步骤：</p><ul><li>简化情况：让b = 0，计算J，现在J只是w的函数</li><li>非简化情况：w,b均会影响J，三维图，汤碗状</li></ul></li></ul><h3 id="梯度下降算法">梯度下降算法</h3><ul><li><p>适用于多种成本函数的最小化</p></li><li><p>如同下山一般每次寻找最佳方向直至局部最低点</p></li><li><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>r</mi><mi>e</mi><mi>p</mi><mi>e</mi><mi>a</mi><mi>t</mi><mo stretchy="false">{</mo><mspace linebreak="newline"></mspace><mi>w</mi><mo>=</mo><mi>w</mi><mo>−</mo><mi>α</mi><mfrac><mi mathvariant="normal">∂</mi><mrow><mi mathvariant="normal">∂</mi><mi>w</mi></mrow></mfrac><mi>J</mi><mo stretchy="false">(</mo><mi>w</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mi>b</mi><mo>=</mo><mi>b</mi><mo>−</mo><mi>α</mi><mfrac><mi mathvariant="normal">∂</mi><mrow><mi mathvariant="normal">∂</mi><mi>b</mi></mrow></mfrac><mi>J</mi><mo stretchy="false">(</mo><mi>w</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mo stretchy="false">}</mo><mspace linebreak="newline"></mspace><mi>α</mi><mo>:</mo><mtext>学习率，控制每一步下山的步幅</mtext><mspace linebreak="newline"></mspace><mi>α</mi><mtext>过大，摇摆严重；</mtext><mi>α</mi><mtext>过小，步骤过多，成本大</mtext></mrow><annotation encoding="application/x-tex">repeat\{\\w = w - \alpha \frac{\partial}{\partial{w}}J(w,b)\\b = b - \alpha \frac{\partial}{\partial b}J(w,b)\\\}\\\alpha:学习率，控制每一步下山的步幅\\\alpha过大，摇摆严重；\alpha过小，步骤过多，成本大</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">re</span><span class="mord mathnormal">p</span><span class="mord mathnormal">e</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mopen">{</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.0574em;vertical-align:-0.686em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.0574em;vertical-align:-0.686em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal">b</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mclose">}</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">学习率，控制每一步下山的步幅</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mord cjk_fallback">过大，摇摆严重；</span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mord cjk_fallback">过小，步骤过多，成本大</span></span></span></span></span></p></li><li><p>要更新w,b必须同时更新</p></li><li><p>线性回归中的梯度下降算法，只有单一的最小值，碗型凹函数</p></li><li><p>批量梯度下降：每次更新都使用整个训练集</p></li></ul><h3 id="多类特征">多类特征</h3><ul><li><p>上标标识是第几组训练示例，下标标识是第几个特征。</p></li><li><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mover accent="true"><mi>x</mi><mo>⃗</mo></mover><mo stretchy="false">)</mo><mo>=</mo><msub><mi>w</mi><mn>1</mn></msub><msub><mi>x</mi><mn>1</mn></msub><mo>+</mo><msub><mi>w</mi><mn>2</mn></msub><msub><mi>x</mi><mn>2</mn></msub><mo>+</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo>+</mo><msub><mi>w</mi><mi>n</mi></msub><msub><mi>x</mi><mi>n</mi></msub><mo>+</mo><mi>b</mi><mo>:</mo><mtext>多元线性回归</mtext><mspace linebreak="newline"></mspace><mover accent="true"><mi>w</mi><mo>⃗</mo></mover><mo>=</mo><mo stretchy="false">[</mo><msub><mi>w</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>w</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>w</mi><mn>3</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>w</mi><mi>n</mi></msub><mo stretchy="false">]</mo><mspace linebreak="newline"></mspace><mover accent="true"><mi>x</mi><mo>⃗</mo></mover><mo>=</mo><mo stretchy="false">[</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>3</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy="false">]</mo><mspace linebreak="newline"></mspace><mover accent="true"><mi>w</mi><mo>⃗</mo></mover><mtext>与</mtext><mi>b</mi><mtext>为这个训练模型的参数</mtext><mspace linebreak="newline"></mspace><msub><mi>f</mi><mrow><mover accent="true"><mi>w</mi><mo>⃗</mo></mover><mo separator="true">,</mo><mi>b</mi></mrow></msub><mo>=</mo><mover accent="true"><mi>w</mi><mo>⃗</mo></mover><mo>⋅</mo><mover accent="true"><mi>x</mi><mo>⃗</mo></mover><mo>+</mo><mi>b</mi><mspace linebreak="newline"></mspace><mi>n</mi><mtext>：特征的个数</mtext></mrow><annotation encoding="application/x-tex">f(\vec{x})=w_{1}x_{1}+w_{2}x_{2}+...+w_{n}x_{n}+b:多元线性回归\\\vec{w} = [w_{1},w_{2},w_{3},...,w_{n}]\\\vec{x} = [x_{1},x_{2},x_{3},...,x_{n}]\\\vec{w}与b为这个训练模型的参数\\f_{\vec{w},b} = \vec{w}\cdot\vec{x}+b\\n：特征的个数</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2077em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord">...</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">多元线性回归</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.714em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1522em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.714em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2077em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.714em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1522em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mord cjk_fallback">与</span><span class="mord mathnormal">b</span><span class="mord cjk_fallback">为这个训练模型的参数</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.9855em;vertical-align:-0.2911em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.545em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord accent mtight"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-2.714em;"><span class="pstrut" style="height:2.714em;"></span><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span><span style="top:-2.714em;"><span class="pstrut" style="height:2.714em;"></span><span class="accent-body" style="left:-0.1522em;"><span class="overlay mtight" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">b</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2911em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.714em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1522em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7973em;vertical-align:-0.0833em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2077em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">n</span><span class="mord cjk_fallback">：特征的个数</span></span></span></span></span></p></li><li><p>矢量化：NumPy库，相较循环速度更快（并行计算），使代码更短更易阅读</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np <br>f = np.dot(w,x) + b<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">w = np.array([...])<br>d = np.array([...]) (derivatives)<br>w = w - <span class="hljs-number">0.1</span> * d (此时<span class="hljs-number">0.1</span>为学习率)<br></code></pre></td></tr></table></figure><ul><li>多元线性回归中的梯度下降法</li></ul><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>r</mi><mi>e</mi><mi>p</mi><mi>e</mi><mi>a</mi><mi>t</mi><mo stretchy="false">{</mo><mspace linebreak="newline"></mspace><msub><mi>w</mi><mi>j</mi></msub><mo>=</mo><msub><mi>w</mi><mi>j</mi></msub><mo>−</mo><mi>α</mi><mfrac><mi mathvariant="normal">∂</mi><mrow><mi mathvariant="normal">∂</mi><msub><mi>w</mi><mi>j</mi></msub></mrow></mfrac><mi>J</mi><mo stretchy="false">(</mo><mover accent="true"><mi>w</mi><mo>⃗</mo></mover><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mi>b</mi><mo>=</mo><mi>b</mi><mo>−</mo><mi>α</mi><mfrac><mi mathvariant="normal">∂</mi><mrow><mi mathvariant="normal">∂</mi><mi>b</mi></mrow></mfrac><mi>J</mi><mo stretchy="false">(</mo><mover accent="true"><mi>w</mi><mo>⃗</mo></mover><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">repeat\{\\w_{j} = w_{j} - \alpha \frac{\partial}{\partial{w_{j}}}J(\vec{w},b)\\b = b - \alpha \frac{\partial}{\partial b}J(\vec{w},b)\\\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">re</span><span class="mord mathnormal">p</span><span class="mord mathnormal">e</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mopen">{</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.3435em;vertical-align:-0.9721em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9721em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1522em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.0574em;vertical-align:-0.686em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal">b</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1522em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mclose">}</span></span></span></span></span></p><ul><li>另一种算法适用于线性回归：Normal Equation——无迭代，速度慢</li></ul><h3 id="特征缩放">特征缩放</h3><ul><li><p>数据归一化</p></li><li><p>当特征数值差别较大时，梯度下降算法运行会明显变慢（抖动）；当数据进行适当变换后，速度会加快，这就是特征缩放。</p><img src="/2024/11/29/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-10-27%20171524.jpg" class="" title="数据归一化"></li><li><p>法一：将数据除以绝对值最大值，归到-1到1的范围内</p><p>法二：均值归一化。归到-1到1。</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub><mo>=</mo><mfrac><mrow><msub><mi>x</mi><mi>i</mi></msub><mo>−</mo><msub><mi>μ</mi><mi>i</mi></msub></mrow><mrow><msub><mi>x</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mo>−</mo><msub><mi>x</mi><mrow><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">x_{i} = \frac{x_{i}-\mu_{i}}{x_{max} - x_{min}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0963em;vertical-align:-0.836em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.2603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ma</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">min</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>法三：Z分数归一化。计算平均值和标准差来进行。</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub><mo>=</mo><mfrac><mrow><msub><mi>x</mi><mi>i</mi></msub><mo>−</mo><msub><mi>μ</mi><mi>i</mi></msub></mrow><msub><mi>σ</mi><mi>i</mi></msub></mfrac></mrow><annotation encoding="application/x-tex">x_{i} = \frac{x_{i}-\mu_{i}}{\sigma_{i}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0963em;vertical-align:-0.836em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.2603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p></li><li><p>学习曲线：成本J关于迭代次数的函数。达到收敛时需要的迭代次数不定。</p><p>选择合适的阈值来确定成本何时收敛。</p></li><li><p>选择优秀的学习率：成本应该随迭代次数增加而不断下降</p><p>某次迭代后成本上升：bug &amp; 学习率过大</p><p>可以先从很小的学习率开始尝试，逐渐增大来选取最佳值，尽量往大了选，可以提高效率。</p></li><li><p>洞察新的变量，改善模型。</p></li><li><p>多项式回归：此时特征缩放很重要，次方的存在会使值扩张很多</p></li></ul><h3 id="分类">分类</h3><ul><li><p>yes/no：二进制分类</p><p>negative/positive class</p></li><li><p>logistic回归</p><ul><li><p>sigmoid函数（logistic函数）</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>g</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>1</mn><mrow><mn>1</mn><mo>+</mo><msup><mi>e</mi><mrow><mo>−</mo><mi>z</mi></mrow></msup></mrow></mfrac><mspace linebreak="newline"></mspace><mi>z</mi><mo>=</mo><mover accent="true"><mi>w</mi><mo>⃗</mo></mover><mo>⋅</mo><mover accent="true"><mi>x</mi><mo>⃗</mo></mover><mo>+</mo><mi>b</mi><mspace linebreak="newline"></mspace><msub><mi>f</mi><mrow><mover accent="true"><mi>w</mi><mo>⃗</mo></mover><mo separator="true">,</mo><mi>b</mi></mrow></msub><mo>=</mo><mi>g</mi><mo stretchy="false">(</mo><mover accent="true"><mi>w</mi><mo>⃗</mo></mover><mo>⋅</mo><mover accent="true"><mi>x</mi><mo>⃗</mo></mover><mo>+</mo><mi>b</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>1</mn><mrow><mn>1</mn><mo>+</mo><msup><mi>e</mi><mrow><mo>−</mo><mo stretchy="false">(</mo><mover accent="true"><mi>w</mi><mo>⃗</mo></mover><mo>⋅</mo><mover accent="true"><mi>x</mi><mo>⃗</mo></mover><mo>+</mo><mi>b</mi><mo stretchy="false">)</mo></mrow></msup></mrow></mfrac></mrow><annotation encoding="application/x-tex">g(z) = \frac{1}{1+e^{-z}}\\z =\vec{w}\cdot\vec{x}+b\\f_{\vec{w},b} = g(\vec{w}\cdot\vec{x}+b) = \frac{1}{1+e^{-(\vec{w}\cdot\vec{x}+b)}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0908em;vertical-align:-0.7693em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6973em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.714em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1522em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7973em;vertical-align:-0.0833em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2077em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.9855em;vertical-align:-0.2911em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.545em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord accent mtight"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-2.714em;"><span class="pstrut" style="height:2.714em;"></span><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span><span style="top:-2.714em;"><span class="pstrut" style="height:2.714em;"></span><span class="accent-body" style="left:-0.1522em;"><span class="overlay mtight" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">b</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2911em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1522em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7973em;vertical-align:-0.0833em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2077em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.1088em;vertical-align:-0.7873em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.296em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.814em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mopen mtight">(</span><span class="mord accent mtight"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-2.714em;"><span class="pstrut" style="height:2.714em;"></span><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span><span style="top:-2.714em;"><span class="pstrut" style="height:2.714em;"></span><span class="accent-body" style="left:-0.1522em;"><span class="overlay mtight" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mbin mtight">⋅</span><span class="mord accent mtight"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-2.714em;"><span class="pstrut" style="height:2.714em;"></span><span class="mord mathnormal mtight">x</span></span><span style="top:-2.714em;"><span class="pstrut" style="height:2.714em;"></span><span class="accent-body" style="left:-0.2077em;"><span class="overlay mtight" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mathnormal mtight">b</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7873em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>outputs between 0 and 1</p><img src="/2024/11/29/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-10-28%20173522.jpg" class="" title="sigmoid"></li></ul></li></ul><p>将线性回归的结果，通过sigmoid函数转换到0-1的范围，实现分类（计算出为1的可能性）。</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>f</mi><mrow><mover accent="true"><mi>w</mi><mo>⃗</mo></mover><mo separator="true">,</mo><mi>b</mi></mrow></msub><mo stretchy="false">(</mo><mover accent="true"><mi>x</mi><mo>⃗</mo></mover><mo stretchy="false">)</mo><mo>=</mo><mi>P</mi><mo stretchy="false">(</mo><mi>y</mi><mo>=</mo><mn>1</mn><mi mathvariant="normal">∣</mi><mover accent="true"><mi>x</mi><mo>⃗</mo></mover><mo separator="true">;</mo><mover accent="true"><mi>w</mi><mo>⃗</mo></mover><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f_{\vec{w},b}(\vec{x}) = P(y = 1|\vec{x};\vec{w},b)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0411em;vertical-align:-0.2911em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.545em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord accent mtight"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-2.714em;"><span class="pstrut" style="height:2.714em;"></span><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span><span style="top:-2.714em;"><span class="pstrut" style="height:2.714em;"></span><span class="accent-body" style="left:-0.1522em;"><span class="overlay mtight" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">b</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2911em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2077em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1∣</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2077em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1522em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span></span></span></span></span></p><ul><li><p>决策边界（z = 0）:散点图分界线的形状</p><p>选择阈值</p></li></ul><h3 id="logistic回归中的代价函数">logistic回归中的代价函数</h3><ul><li>使用之前的平方误差代价函数不再合适，可能会陷入很多局部极小值</li><li>单个训练示例：</li></ul><img src="/2024/11/29/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-10-29%20163533.jpg" class="" title="代价函数"><p>​整个训练集的成本计算：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>J</mi><mo stretchy="false">(</mo><mi>w</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>1</mn><mi>m</mi></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><mrow><mi>L</mi><mo stretchy="false">(</mo><msub><mi>f</mi><mrow><mover accent="true"><mi>w</mi><mo>⃗</mo></mover><mo separator="true">,</mo><mi>b</mi></mrow></msub><mo stretchy="false">(</mo><msup><mover accent="true"><mi>x</mi><mo>⃗</mo></mover><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup><mo stretchy="false">)</mo><mo separator="true">,</mo><msup><mover accent="true"><mi>y</mi><mo>⃗</mo></mover><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup><mo stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex">J(w,b) = \frac{1}{m}\sum_{i=1}^{m} {L(f_{\vec{w},b}(\vec{x}^{(i)}),\vec{y}^{(i)})}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">m</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.545em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord accent mtight"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-2.714em;"><span class="pstrut" style="height:2.714em;"></span><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span><span style="top:-2.714em;"><span class="pstrut" style="height:2.714em;"></span><span class="accent-body" style="left:-0.1522em;"><span class="overlay mtight" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">b</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2911em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2077em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1799em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></span></p><ul><li>对该代价函数的梯度下降（与上面多元线性回归中的梯度下降法公式相同）：</li></ul><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>r</mi><mi>e</mi><mi>p</mi><mi>e</mi><mi>a</mi><mi>t</mi><mo stretchy="false">{</mo><mspace linebreak="newline"></mspace><msub><mi>w</mi><mi>j</mi></msub><mo>=</mo><msub><mi>w</mi><mi>j</mi></msub><mo>−</mo><mi>α</mi><mfrac><mi mathvariant="normal">∂</mi><mrow><mi mathvariant="normal">∂</mi><msub><mi>w</mi><mi>j</mi></msub></mrow></mfrac><mi>J</mi><mo stretchy="false">(</mo><mover accent="true"><mi>w</mi><mo>⃗</mo></mover><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mi>b</mi><mo>=</mo><mi>b</mi><mo>−</mo><mi>α</mi><mfrac><mi mathvariant="normal">∂</mi><mrow><mi mathvariant="normal">∂</mi><mi>b</mi></mrow></mfrac><mi>J</mi><mo stretchy="false">(</mo><mover accent="true"><mi>w</mi><mo>⃗</mo></mover><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">repeat\{\\w_{j} = w_{j} - \alpha \frac{\partial}{\partial{w_{j}}}J(\vec{w},b)\\b = b - \alpha \frac{\partial}{\partial b}J(\vec{w},b)\\\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">re</span><span class="mord mathnormal">p</span><span class="mord mathnormal">e</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mopen">{</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.3435em;vertical-align:-0.9721em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9721em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1522em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.0574em;vertical-align:-0.686em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal">b</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1522em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mclose">}</span></span></span></span></span></p><ul><li>学习曲线，特征缩放，矢量化等方法同样可以在logistic回归中应用。</li></ul><h3 id="过拟合">过拟合</h3><ul><li><p>欠拟合：偏差较大，不能很好适应训练集(high bias)</p></li><li><p>过拟合：太过符合训练集，不适宜推广到其他例子上，具有高方差(high variance)</p><ul><li>解决方法：；收集更多训练数据；减少特征的数量；<strong>正则化方法</strong></li></ul></li><li><p>正则化：</p><ul><li><p>线性回归中：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>J</mi><mo stretchy="false">(</mo><mover accent="true"><mi>w</mi><mo>⃗</mo></mover><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>1</mn><mrow><mn>2</mn><mi>m</mi></mrow></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><mo stretchy="false">(</mo><mrow><msub><mi>f</mi><mrow><mover accent="true"><mi>w</mi><mo>⃗</mo></mover><mo separator="true">,</mo><mi>b</mi></mrow></msub><mo stretchy="false">(</mo><msup><mover accent="true"><mi>x</mi><mo>⃗</mo></mover><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup><mo stretchy="false">)</mo><mo>−</mo><msup><mover accent="true"><mi>y</mi><mo>⃗</mo></mover><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup></mrow><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mfrac><mi>λ</mi><mrow><mn>2</mn><mi>m</mi></mrow></mfrac><mi>J</mi><mo stretchy="false">(</mo><mi>w</mi><mi mathvariant="normal">.</mi><mi>b</mi><mo stretchy="false">)</mo><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msubsup><mi>w</mi><mi>j</mi><mn>2</mn></msubsup><mspace linebreak="newline"></mspace><mi>λ</mi><mo>:</mo><mtext>正则化参数。过大时，欠拟合；过小时，过拟合。</mtext></mrow><annotation encoding="application/x-tex">J(\vec{w},b) =\frac{1}{2m}\sum_{i=1}^{m} ({f_{\vec{w},b}(\vec{x}^{(i)})-\vec{y}^{(i)}})^2+\frac{\lambda}{2m}J(w.b) \sum_{j=1}^{n}w_{j}^2\\\lambda:正则化参数。过大时，欠拟合；过小时，过拟合。</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1522em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord mathnormal">m</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.545em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord accent mtight"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-2.714em;"><span class="pstrut" style="height:2.714em;"></span><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span><span style="top:-2.714em;"><span class="pstrut" style="height:2.714em;"></span><span class="accent-body" style="left:-0.1522em;"><span class="overlay mtight" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">b</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2911em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2077em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1799em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:3.0652em;vertical-align:-1.4138em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord mathnormal">m</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord">.</span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.4138em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-2.453em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">λ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">正则化参数。过大时，欠拟合；过小时，过拟合。</span></span></span></span></span></p><p>​梯度下降公式等同于前</p></li><li><p>logistic回归中：</p></li></ul></li></ul><p>​</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>J</mi><mo stretchy="false">(</mo><mi>w</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>1</mn><mi>m</mi></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><mrow><mi>L</mi><mo stretchy="false">(</mo><msub><mi>f</mi><mrow><mover accent="true"><mi>w</mi><mo>⃗</mo></mover><mo separator="true">,</mo><mi>b</mi></mrow></msub><mo stretchy="false">(</mo><msup><mover accent="true"><mi>x</mi><mo>⃗</mo></mover><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup><mo stretchy="false">)</mo><mo separator="true">,</mo><msup><mover accent="true"><mi>y</mi><mo>⃗</mo></mover><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup><mo stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex">J(w,b) = \frac{1}{m}\sum_{i=1}^{m} {L(f_{\vec{w},b}(\vec{x}^{(i)}),\vec{y}^{(i)})}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">m</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.545em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord accent mtight"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-2.714em;"><span class="pstrut" style="height:2.714em;"></span><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span><span style="top:-2.714em;"><span class="pstrut" style="height:2.714em;"></span><span class="accent-body" style="left:-0.1522em;"><span class="overlay mtight" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">b</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2911em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2077em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1799em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></span></p><p>​梯度下降公式等同于前</p><h2 id="Part2-Advanced-learning-algorithms">Part2 Advanced learning algorithms</h2><h3 id="神经网络">神经网络</h3><ul><li><p>神经网络：起初用于模仿生物大脑而设计的算法，也被称为深度学习</p><p>语言识别、图像识别、文本识别（自然语言处理）</p></li><li><p>神经网络：接受一些数据，进行计算，输出数据给另一个神经元</p></li><li><p>需求预测：每个神经元进行小小的回归计算，输出a(activations)给另一个神经元</p><p>层(layer)：输入层，隐藏层，输出层</p><p>各个神经元自动选择需要哪些特征数据</p><p>多层神经网络：多层感知器</p></li><li><p>例子：图像识别</p></li></ul><h3 id="神经网络中的层">神经网络中的层</h3><ul><li><p>某层的参数在该字母左上方用方括号标识</p></li><li><p>输入层为第0层</p></li><li><p>逐层计算公式（activation function）：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>a</mi><mi>j</mi><mrow><mo stretchy="false">[</mo><mi>l</mi><mo stretchy="false">]</mo></mrow></msubsup><mo>=</mo><mi>g</mi><mo stretchy="false">(</mo><msubsup><mover accent="true"><mi>w</mi><mo>⃗</mo></mover><mi>j</mi><mrow><mo stretchy="false">[</mo><mi>l</mi><mo stretchy="false">]</mo></mrow></msubsup><mo>⋅</mo><msup><mover accent="true"><mi>a</mi><mo>⃗</mo></mover><mrow><mo stretchy="false">[</mo><mi>l</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo></mrow></msup><mo>+</mo><msubsup><mi>b</mi><mi>j</mi><mrow><mo stretchy="false">[</mo><mi>l</mi><mo stretchy="false">]</mo></mrow></msubsup><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mi>g</mi><mo>:</mo><mi>s</mi><mi>i</mi><mi>g</mi><mi>m</mi><mi>o</mi><mi>i</mi><mi>d</mi><mi>f</mi><mi>u</mi><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">a_{j}^{[l]} = g(\vec{w}_{j}^{[l]}\cdot\vec{a}^{[l-1]}+b_{j}^{[l]})\\g:sigmoid function</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4578em;vertical-align:-0.413em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.4231em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">[</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mclose mtight">]</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.413em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.4578em;vertical-align:-0.413em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1522em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.4231em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">[</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mclose mtight">]</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.413em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0213em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">a</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">[</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mclose mtight">]</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.4578em;vertical-align:-0.413em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.4231em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">[</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mclose mtight">]</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.413em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">m</span><span class="mord mathnormal">o</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.10764em;">df</span><span class="mord mathnormal">u</span><span class="mord mathnormal">n</span><span class="mord mathnormal">c</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span></span></span></span></span></p></li><li><p>向前传播（神经网络的预测）：从左到右进行激活值计算、传递。</p></li></ul><h3 id="代码中的推理">代码中的推理</h3><ul><li><p>常用的神经网络库：TensorFlow,Pytorch</p></li><li><p>TensorFlow中的数据处理，与NumPy中有所不同</p><p>tf.Tensor</p><p>numpy()</p><p>array</p></li><li><p>在TensorFlow中构建神经网络：</p><p>Sequential():将各个层串联在一起</p><p>model.compile(…):编译该模型</p><p>model.fit(x,y):使模型训练，适应训练示例</p><p>model.predict(x_new):用训练好的模型预测新的数据</p></li></ul><h3 id="向前传播">向前传播</h3><ul><li>单层中的向前传播（代码中的向前传播）</li><li>向前传播的一般实现：Forward prop in NumPy</li><li>大写字母指矩阵，小写字母指向量和标量</li></ul><h3 id="神经网络的矢量化">神经网络的矢量化</h3><ul><li>np.matmal()：NumPy中矩阵相乘，大幅度加快运算速度</li></ul><h3 id="训练神经网络">训练神经网络</h3><ul><li>TensorFlow实现：模型定义，编译模型（定义loss function），训练模型（梯度下降，定义梯度下降时迭代的次数）</li></ul><h3 id="激活函数">激活函数</h3><ul><li><p>sigmoid函数的替代：ReLU函数</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>g</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mo>=</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><mi>z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">g(z) = max(0,z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">)</span></span></span></span></span></p><p>激活值现在可以为0或任何非负值</p></li><li><p>选择适合的激活函数（线性激活函数，sigmoid函数，ReLU函数）</p><ul><li>输出层：二进制分类问题使用sigmoid函数；回归问题使用其他函数（看输出值的正负）</li><li>隐藏层：ReLU函数最为常用（速度快，且只在左边部分变得平坦——会影响梯度下降）；不要在隐藏层使用线性激活函数。</li></ul></li><li><p>激活函数的重要性：更复杂的线性回归无法描述的情景</p></li></ul><h3 id="多类分类">多类分类</h3><ul><li><p>y可以接受超过两个值</p></li><li><p>Softmax算法：Logistic回归算法的推广</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>z</mi><mi>i</mi></msub><mo>=</mo><mover accent="true"><msub><mi>w</mi><mi>i</mi></msub><mo>⃗</mo></mover><mo>⋅</mo><mover accent="true"><mi>x</mi><mo>⃗</mo></mover><mo>+</mo><msub><mi>b</mi><mi>i</mi></msub><mspace linebreak="newline"></mspace><msub><mi>a</mi><mi>i</mi></msub><mo>=</mo><mfrac><msup><mi>e</mi><msub><mi>z</mi><mi>i</mi></msub></msup><mrow><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msup><mi>e</mi><msub><mi>z</mi><mi>i</mi></msub></msup></mrow></mfrac><mo>=</mo><mi>P</mi><mo stretchy="false">(</mo><mi>y</mi><mo>=</mo><mi>i</mi><mi mathvariant="normal">∣</mi><mover accent="true"><mi>x</mi><mo>⃗</mo></mover><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mi>y</mi><mtext>可以取</mtext><mi>N</mi><mtext>个值；</mtext><mover accent="true"><msub><mi>w</mi><mi>i</mi></msub><mo>⃗</mo></mover><mo separator="true">,</mo><msub><mi>b</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi>i</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>N</mi><mo stretchy="false">)</mo><mtext>为这个算法的参数</mtext></mrow><annotation encoding="application/x-tex">z_{i} = \vec{w_{i}} \cdot \vec{x} + b_{i}\\a_{i} = \frac{e^{z_{i}}}{\sum_{j=1}^{N}e^{z_{i}}}=P(y = i|\vec{x})\\y可以取N个值；\vec{w_{i}},b_{i}(i=1,2,...,N)为这个算法的参数</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.864em;vertical-align:-0.15em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7973em;vertical-align:-0.0833em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2077em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.6484em;vertical-align:-1.307em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3414em;"><span style="top:-2.1288em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9812em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4358em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5904em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.044em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.044em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.307em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">i</span><span class="mord">∣</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2077em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord cjk_fallback">可以取</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord cjk_fallback">个值；</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mord cjk_fallback">为这个算法的参数</span></span></span></span></span></p><p>损失函数：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi><mo stretchy="false">(</mo><msub><mi>a</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>a</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>a</mi><mi>N</mi></msub><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><msub><mi>a</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>if y = 1</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><msub><mi>a</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>if y = 2</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><msub><mi>a</mi><mi>N</mi></msub><mo stretchy="false">)</mo><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>if y = N</mtext></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">loss(a_{1},a_{2},...a_{N},y)=\begin{cases}-log (a_{1}), &amp; \text{if y = 1}\\-log (a_{2}), &amp; \text{if y = 2}\\...\\-log (a_{N}), &amp; \text{if y = N}\\\end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">oss</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:5.76em;vertical-align:-2.63em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.95em;"><span style="top:-1.6em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎩</span></span></span><span style="top:-1.592em;"><span class="pstrut" style="height:3.15em;"></span><span style="height:0.916em;width:0.8889em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.8889em" height="0.916em" style="width:0.8889em" viewBox="0 0 888.89 916" preserveAspectRatio="xMinYMin"><path d="M384 0 H504 V916 H384z M384 0 H504 V916 H384z"/></svg></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎨</span></span></span><span style="top:-4.292em;"><span class="pstrut" style="height:3.15em;"></span><span style="height:0.916em;width:0.8889em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.8889em" height="0.916em" style="width:0.8889em" viewBox="0 0 888.89 916" preserveAspectRatio="xMinYMin"><path d="M384 0 H504 V916 H384z M384 0 H504 V916 H384z"/></svg></span></span><span style="top:-5.2em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎧</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.45em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.13em;"><span style="top:-5.13em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">−</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span></span></span><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">−</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">...</span></span></span><span style="top:-0.81em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">−</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.63em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.13em;"><span style="top:-5.13em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if y = 1</span></span></span></span><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if y = 2</span></span></span></span><span style="top:-0.81em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if y = N</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.63em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p></li><li><p>神经网络的Softmax输出：最后一层称为Softmax层，有多个输出神经元；每个激活值是所有zi的函数。</p></li><li><p>softmax优化：减少数据舍入时的误差，避免一些过大或过小的计算</p></li><li><p>多标签分类问题：同一个输入进行多个问题的预测</p><p>可以分开解决，或设计一个神经网络同时解决多个问题</p></li></ul><h3 id="高级优化算法">高级优化算法</h3><ul><li><p>Adam算法：自动调整学习率；对模型的每个参数使用独立的学习率。</p><p>若持续向同样方向靠，增大学习率；若发生震荡，则减小学习率。</p></li></ul><h3 id="更多其它种类的层">更多其它种类的层</h3><ul><li><p>卷积层：每个神经元只看前一层输入的某个部分</p><p>计算更快，更少的训练数据需求，更不易过拟合</p><p>参数：窗口大小，神经元个数</p></li></ul><h3 id="模型评估">模型评估</h3><ul><li><p>模型出现问题时努力的方向：数据集、参数、模型算法。</p></li><li><p>不要用数据集中的所有数据训练模型，将数据集分为训练集（用于训练）和测试集（用于评估）。</p><p>此时成本函数可以分为训练集成本与测试集成本（不包含正则化参数）。</p><p>分类问题中训练集/测试集成本函数可以用不匹配的测试例的比例来表示。</p></li><li><p>测试集成本往往是模型性能更好的指标。</p></li><li><p>更多：将数据集分为训练集、交叉验证集（防止只用测试集导致过于乐观地认为可以很好地推广到新数据）、测试集</p><p><strong>最佳实践：用jtrain优化参数，然后用cv选择了合适的模型，最后用jtest去客观的评估你模型的性能</strong>。提高泛化能力。</p></li></ul><h3 id="诊断偏差和方差">诊断偏差和方差</h3><ul><li>jtrain较高：高偏差，欠拟合；jcv远大于jtrain：方差较高，过拟合</li><li>可能同时出现高方差和高偏差的情况</li><li>正则化参数对算法性能的影响：过小过拟合，过大欠拟合</li><li>建立表现基准：可以从人类的表现、竞争算法的表现、以前的经验猜测建立评判标准，与jtrain进行比较</li><li>学习曲线：误差随着训练集示例数量mtrain的变化曲线。随着训练集训练示例的数量增加，jtrain逐渐增加，jcv逐渐减小</li></ul><p>​当算法本身偏差bias较大（欠拟合）时，使用再多的训练示例也没有很大的作用在降低jcv上；但过拟合时这样操作是有效果的，可能会低于预期误差。</p><ul><li><p>高方差问题：增加训练集规模，减少特征数量，增大正则化参数</p><p>高偏差问题：增加特征数量，添加额外的多项式特性（升高次数），减小正则化参数</p></li><li><p>偏差/方差与神经网络：当神经网络足够大时，训练集中等或更小大小，偏差bias会较低。</p><p>如何校准神经网络？：</p><img src="/2024/11/29/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-11-12%20133148.jpg" class="" title="偏差和方差"></li></ul><h3 id="机器学习开发">机器学习开发</h3><ul><li><p>机器学习开发的迭代循环步骤：选择架构（模型，数据集，等等）——训练模型——诊断（误差分析、方差分析、错误分析）——回到开头，循环往复。</p></li><li><p>错误分析：手动分析错误预测的交叉验证示例，寻找共同特征进行分类，找到问题大头所在。找到该类问题的更多数据，优化模型。对问题出现频率很低的，可以适度忽略。该种方法对于人类擅长的任务有较好的校准作用，对于人类不擅长的效果则不佳。</p></li><li><p>添加数据：添加更多类型的数据，针对预测性能较差的类型添加数据。</p></li><li><p>数据增强：从现有的训练示例创作新的训练示例。在音视频、图像学习上有较大作用。</p></li><li><p>数据合成：大杂烩，逼近现实中的情况。最可能用于计算机视觉工作。</p></li><li><p>AI=Code+Data。以模型为中心（传统）、以数据为中心（创新）两种研究模式。</p></li><li><p>迁移学习：预训练好的参数（较大数据集训练，开源）移植到新模型上再进行进一步学习调优参数（较小数据集）。（先监督预学习，再微调参数）自己替换输出层。</p><p>许多视觉识别的早期几层神经网络的作用是一样的，且可迁移的神经网络输入必须是相同的。</p></li><li><p>机器学习项目的完整周期：对项目范围进行划分；收集数据；训练模型；23两步循环往复；生产环境中部署维护，出现问题时及时改进。</p></li><li><p>机器学习模型的部署：客户端、服务端，api通信；监控运行，及时更新。MLOps。</p></li></ul><h3 id="机器学习的伦理问题">机器学习的伦理问题</h3><p>诸多建议。</p><h3 id="倾斜数据集">倾斜数据集</h3><ul><li><p>倾斜数据集：数据集的正负两类出现概率严重不对等。</p></li><li><p>误差测量：此时常用的误差测量方法不能很好的表示模型的性能。</p><p>Confusion Matrix。</p><p>此时使用精确度（预测罕见情况的准确率）和召回率（识别出罕见情况占所有罕见情况的比例）这两个指标来衡量。确保这两个指标足够高。</p></li><li><p>精确度（P）和召回率（R）之间的权衡：选择阈值时考虑。</p><p>在logistic回归中提高预测为1的阈值，慎言，使精确度升高，召回率降低；降低阈值，使精确度降低，召回率升高。</p></li><li><p>F1 score：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>F</mi><mn>1</mn></msub><mtext> </mtext><mi>s</mi><mi>c</mi><mi>o</mi><mi>r</mi><mi>e</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy="false">(</mo><mfrac><mn>1</mn><mi>P</mi></mfrac><mo>+</mo><mfrac><mn>1</mn><mi>R</mi></mfrac><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">F_{1} \ score = \frac{1}{\frac{1}{2}(\frac{1}{P}+\frac{1}{R})}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace"> </span><span class="mord mathnormal">score</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.4015em;vertical-align:-1.0801em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.2649em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.0801em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>以一个指标衡量模型。当P或R的任意一个比较小时该指标也会较小。</p></li></ul><h3 id="决策树">决策树</h3><ul><li><p>不同于神经网络。决策树为一步步从根走到叶，在叶结点做出预测。</p></li><li><p>构建决策树的过程，几个关键决定：</p><ol><li>如何决定每个节点使用的特性：纯度最大化。</li><li>什么时候停止分裂：当一个节点百分百是某个类时 或 当进一步拆分会导致树超过提前决定的最大深度（防止树过大、过拟合） 或 分裂一个节点导致的纯度的增加量小于某个阈值收益较低 或 某个节点中的示例个数小于某个阈值。</li></ol></li><li><p>测量某个节点纯度：利用熵来衡量。当两类各占一半时熵最高，为1。当完全为某一类时，熵最低，为0。</p></li><li><p>如何选择每个节点的分裂特征：上级节点的熵减去加权平均左右节点的熵（这个值叫做信息增益），进行比较，谁大选谁（熵减最多，信息增益最大）。当某一步分裂熵减过少，则可以不分裂了。</p></li><li><p>构建决策树的总体过程：从根节点开始，拆分节点，直至停止分裂。在其中0log0视为0。总体是一个递归过程。</p></li><li><p>当特性的选择值不止两个时：使用热编码，使用一般疑问句而非特殊疑问句，创建若干个二进制特性，“这个特征的值是这个吗？”</p><p>热编码技术同样可以用于神经网络的训练。</p></li><li><p>特性的选择值为连续而非离散时的情况：选择该值的划分阈值，选择使信息增益最大的阈值。</p></li><li><p>回归树：决策树在回归问题中的应用（预测一个数字而非类别）</p><p>走到叶节点的实例值得平均值作为预测值。</p><p>如何选择分裂？：使每个节点上的数据方差尽量小。使用左右节点的方差的加权平均来比较哪种分裂方法好，选择较小的。或使用方差减小值。</p></li><li><p>Tree Ensemble（*）：树会对数据小小的变化做出很大的反应。</p><p>使用多棵决策树，再让他们进行投票。</p><ul><li>替换取样：用于构建Tree Ensemble。随机选择训练示例，构造新的训练集，生成一棵树；如此循环往复生成多棵树。</li><li>随机森林算法：使每棵树尽量不同，尽量减小小变化对于整棵树的影响。</li></ul></li><li><p>XGBoost算法/Boosted Trees：在后续替换取样时取出已得到决策树识别能力较差的示例。</p></li><li><p><strong>何时使用决策树？</strong>：决策树可以较好地解决结构化数据/表格化数据；不建议文本、视频、音频的训练；训练速度快（较神经网络来说）；小决策树基本上是人类可解释、可准确理解的；</p><p><strong>何时使用神经网络？</strong>：适用于所有类型的数据；可以适用于迁移学习；训练速度可能较慢；适用多个机器学习模型协同工作。</p></li></ul><h2 id="Part3-Unsupervised-Learning-Recommender-Systems-and-Reinforcement-Learning">Part3 Unsupervised Learning,Recommender Systems and Reinforcement Learning</h2><h3 id="无监督学习——聚类">无监督学习——聚类</h3><ul><li>在数据中寻找特定类型的结构，看看是否可以分组为集群。</li><li>K-means算法：聚类的一种方法。<ol><li>随机初始化k个聚簇中心</li><li>寻找每个点到中心的最短距离，记下该中心的序号</li><li>更新中心为每个中心邻近点集的中心点</li><li>重复2、3两步</li></ol></li><li>优化目标：K-means的算法过程实际上就是在优化某个成本函数（平均的距离平方，失真函数）</li><li>初始化K-means：随机选取k个训练示例，将这k个示例作为初始的k个聚簇中心位置。为防止出现局部极小值而非最小值，最好多次运行K-means算法再找最佳（达到最小成本时的聚簇中心的选择）。</li><li>如何选择聚簇的数量k？：Elbow method，或根据后续的实际需要决定k（推荐）</li></ul><h3 id="无监督学习——异常检测">无监督学习——异常检测</h3><ul><li><p>训练集为大量数据，再判断新数据是正常与否</p></li><li><p>密度估计：阶梯密度等级（为正常的概率），检测是否小于某阈值</p></li><li><p>例子：异常活动检测，数据中心的计算时使用监测</p></li><li><p>绘制数据集的高斯分布（正态分布）：均值、标准差，分布</p></li><li><p>异常检测算法：各分量通过正态分布估计出来概率的乘积</p></li><li><p>开发和评估异常检测系统：交叉验证集和测试集含有少量几个异常的训练示例</p><img src="/2024/11/29/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-11-18%20122827.jpg" class="" title="异常检测"></li></ul><p>​或不使用测试集，只在交叉验证集上评估。</p><p>​可以使用前面的精确度、召回率、F1 score等指标来评估模型的好坏。</p><ul><li><p>异常检测与监督学习的比较：</p><table><thead><tr><th>异常检测</th><th>监督学习</th></tr></thead><tbody><tr><td>非常少的的positive example（y=1）;有许多的出错方式时的训练示例，未来出错时也不清楚异常情况时使用；</td><td>大量的positive example和negative example；异常情况确定；</td></tr></tbody></table></li><li><p>选择要使用的特征：</p><ul><li><p>对于非高斯的特征，将其高斯化（正态化）</p></li><li><p>异常检测系统的错误分析与修正</p><p>如果对于一个p较大但是异常的训练示例，可以考虑是否加入其他特征使其更容易被检测为异常</p></li><li><p>可以组合旧特性（乘积、比值等等运算组合）来形成新特性</p></li></ul></li></ul><h3 id="推荐系统——协同过滤算法">推荐系统——协同过滤算法</h3><ul><li><p>推荐系统含有用户、内容、评价。</p></li><li><p>前提假设：我们知道每个内容的特征，如电影是爱情片还是动作片，有一个概率数字。</p></li><li><p>预测用户对某项内容的评价，生成成本函数（所有已评分的与预测评分之间差距的衡量）。每个用户都要训练出一组参数。（根据内容的特征和用户评分来判断用户偏好）</p></li><li><p>没有每个内容的特征指标的情况：根据每位用户对每项内容的评分和参数，推测每项内容特征指标的值。（根据用户偏好和用户评分来判断内容的特征）</p></li><li><p>协同（从多个用户处收集数据来进行预测）过滤算法：上面两点同时考虑，生成一个成本函数J(w,b,x)，类似线性回归，后面是正则化项</p><img src="/2024/11/29/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-11-23%20113246.jpg" class="" title="协同过滤算法"></li></ul><p>​最小化这个综合的成本函数可以使用梯度下降算法。</p><ul><li><p>协同过滤算法中的二进制标签情况（上面是评分情况）：例如是否喜欢？是否花时间浏览？是否购买？是否点击？</p><p>用logistic回归来解决，生成预测为1的可能性。</p><p>Loss function.Cost Function.</p></li><li><p>均值归一化：对于未对任何内容或对极少数内容进行评价的用户，如何定义其评价值。将问号定义为该项内容的评价平均值。</p></li><li><p>协同过滤的TensorFlow实现：可以自动计算出成本函数的导数。</p></li><li><p>推荐相关内容的情景：寻找特征指标相近的内容，用特征向量的距离来衡量</p></li><li><p>协同过滤的限制：冷启动问题，“不会给你一个自然的方式来使用附带信息或有关项或用户的其他信息”。</p></li></ul><h3 id="推荐系统——基于内容过滤的算法">推荐系统——基于内容过滤的算法</h3><ul><li><p>需要用户的特性和内容的特性来决定推荐内容，找到好的匹配。</p></li><li><p>该算法中需要用到神经网络架构：将用户特征向量和内容特征向量剪裁</p><img src="/2024/11/29/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-11-25%20111129.jpg" class="" title="推荐系统"></li><li><p>可以借此寻找相似的内容（vm相近）</p></li><li><p>从大目录中选择：进行检索（涵盖有较大可能推荐给用户的内容，再筛选掉一部分不会推荐给用户的内容项）和排名（用神经网络来进行预测评级，将排名列表展示给用户）</p></li><li><p>推荐系统中的伦理问题。</p></li><li><p>在TensorFlow中的实现。</p></li></ul><h3 id="强化学习">强化学习</h3><ul><li><p>应用于机器人控制、工厂优化、金融股票交易、游戏</p></li><li><p>reward function：做好和做坏时给予反馈，让算法自己找出如何选择好的动作</p></li><li><p>状态映射到行动</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo separator="true">,</mo><mi>R</mi><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><msup><mi>s</mi><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mo stretchy="false">(</mo><mtext>状态，行动，奖励，新状态</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(s,a,R(s),s^{&#x27;})\\(状态，行动，奖励，新状态)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2425em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9925em;"><span style="top:-2.9925em;margin-right:0.05em;"><span class="pstrut" style="height:2.5795em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8278em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord cjk_fallback">状态，行动，奖励，新状态</span><span class="mclose">)</span></span></span></span></span></p></li><li><p>discount factor：折现率(γ)</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>R</mi><mi>e</mi><mi>t</mi><mi>u</mi><mi>r</mi><mi>n</mi><mo>=</mo><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mrow><msup><mi>γ</mi><mrow><mi>j</mi><mo>−</mo><mn>1</mn></mrow></msup><msub><mi>R</mi><mi>j</mi></msub></mrow></mrow><annotation encoding="application/x-tex">Return=\sum_{j=1}^{n}{\gamma^{j-1}R_{j}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal">e</span><span class="mord mathnormal">t</span><span class="mord mathnormal">u</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3.0652em;vertical-align:-1.4138em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.4138em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.05556em;">γ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8747em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span></span></p></li><li><p>policy π：强化学习的目标</p><p>what action(a=π(s)) to take in every state(s) so as to maximize the return</p></li><li><p>Markov Decision Process：未来只取决于当前状态，而非到达当前状态前的任何事情。强化学习的内核想法。</p><img src="/2024/11/29/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-11-26%20133707.jpg" class="" title="强化学习"></li><li><p>状态动作价值函数：Optimal Q function(Q*)</p><p>Q(s,a)=Return if you</p><ul><li><p>start in state s;</p></li><li><p>take action a (once);</p></li><li><p>then behave optimally after that</p></li></ul><p>在一个状态中选择得到回报最大的动作a:π(s)=a。</p></li><li><p>Bellman方程：计算状态动作价值函数的方法</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>Q</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo>=</mo><mi>R</mi><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo><mo>+</mo><mi>γ</mi><munder><mrow><mi>max</mi><mo>⁡</mo></mrow><msup><mi>a</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></munder><mi>Q</mi><mo stretchy="false">(</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo separator="true">,</mo><msup><mi>a</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Q(s,a) = R(s) + \gamma\max_{a&#x27;} Q(s&#x27;,a&#x27;)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Q</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.5459em;vertical-align:-0.744em;"></span><span class="mord mathnormal" style="margin-right:0.05556em;">γ</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4306em;"><span style="top:-2.356em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">max</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.744em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">Q</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><p>s’,a’指下一步的状态和动作</p></li><li><p>随机环境：预期收益最大化（平均的收益回报）</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>Q</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo>=</mo><mi>R</mi><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo><mo>+</mo><mi>γ</mi><mi>E</mi><mo stretchy="false">[</mo><munder><mrow><mi>max</mi><mo>⁡</mo></mrow><msup><mi>a</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></munder><mi>Q</mi><mo stretchy="false">(</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo separator="true">,</mo><msup><mi>a</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">Q(s,a) = R(s) + \gamma E[\max_{a&#x27;} Q(s&#x27;,a&#x27;)]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Q</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.5459em;vertical-align:-0.744em;"></span><span class="mord mathnormal" style="margin-right:0.05556em;">γ</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mopen">[</span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4306em;"><span style="top:-2.356em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">max</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.744em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">Q</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">)]</span></span></span></span></span></p></li></ul><h3 id="连续状态空间下的强化学习">连续状态空间下的强化学习</h3><ul><li><p>状态可能包含多个变量，为向量，每个变量均为连续值而非离散。</p></li><li><p>深度强化学习：可以先用监督学习训练出得到Q(s,a)的神经网络。</p></li><li><p>收集第二点中监督学习所说的训练样本。</p><img src="/2024/11/29/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-11-28%20175108.jpg" class="" title="连续状态空间下的强化学习"></li><li><p>算法优化：改进的神经网络结构，同时输出各动作的Q(s,a)，再选择最大的那个值。</p></li><li><p>算法优化：ε-贪婪策略，让强化学习系统探索最常用的动作，即使收益并非最大。</p></li><li><p>强化学习对于参数的挑剔程度比监督学习更大。</p></li><li><p>小批处理的思想：可以加快监督学习和强化学习的训练速度。</p><p>在监督学习中，梯度下降时不使用所有训练示例，使用子集。</p><p>（此时梯度下降的每一步可能不是最好的方向，但最后趋于最小。此时每一小步计算代价会小的多。）</p><p>在强化学习中，每次训练时也只选择一个子集来训练神经网络。</p></li><li><p>软更新：避免某一步中参数变得很糟糕。每次只变动一点点。</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>原来：</mtext><mi>w</mi><mo>=</mo><msub><mi>w</mi><mrow><mi>n</mi><mi>e</mi><mi>w</mi></mrow></msub><mspace linebreak="newline"></mspace><mtext>现在：</mtext><mi>w</mi><mo>=</mo><mn>0.01</mn><msub><mi>w</mi><mrow><mi>n</mi><mi>e</mi><mi>w</mi></mrow></msub><mo>+</mo><mn>0.99</mn><mi>w</mi></mrow><annotation encoding="application/x-tex">原来：w=w_{new}\\现在：w=0.01w_{new}+0.99w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">原来：</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">现在：</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7944em;vertical-align:-0.15em;"></span><span class="mord">0.01</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.99</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span></span></p></li></ul><h3 id="强化学习的限制">强化学习的限制</h3><ul><li>移植到真实环境下的难度较大。</li><li>监督学习更常用，强化学习使用不常见。</li></ul><p><strong>2024.11.29 完结撒花</strong></p><img src="/2024/11/29/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-11-29%20114646.jpg" class="" title="完结撒花">]]></content>
    
    
    <categories>
      
      <category>人工智能</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Machine Learning</tag>
      
      <tag>Supervised Machine Learning</tag>
      
      <tag>Advanced learning</tag>
      
      <tag>Unsupervised Learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>XR论文阅读（一）</title>
    <link href="/2024/09/21/XR%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%EF%BC%88%E4%B8%80%EF%BC%89/"/>
    <url>/2024/09/21/XR%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h1>文1：A Systematic Review of Virtual Reality Features for Skill Training</h1><p>探讨了专业培训环境中使用的各种虚拟现实功能之间的内在联系以及它对于学习成果的影响，还仔细研究了在各种学习场景中衡量VR应用效果的评估技术。</p><h2 id="1-导言">1 导言</h2><p>VR从最初的娱乐功能发展到包括教育和培训在内的多种创新用途。</p><p>行业有航空、加工、医疗保健、能源、航天、工业机器人编程和海员培训。</p><h3 id="1-1-背景">1.1 背景</h3><ul><li><p>VR能够影响学习过程的理论基础：体验式学习、情景学习、自我效能、建构主义学习理论等；Kraiger的学习成果框架。</p></li><li><p>以上为旧理论。</p><p>新理论：两种学习途径：情感学习、认知学习。</p><p>情感学习：目标设定的完成；</p><p>认知学习：3D，良好的交互性，沉浸感，临场感、体验式学习。</p></li></ul><h3 id="1-2-研究目的">1.2 研究目的</h3><p>阐明不同的虚拟现实特征如何影响专业领域内的各种学习成果和技能培训；</p><p>基于VR培训中的各种评估方法。</p><p>怎么影响，如何评估影响？</p><h2 id="2-方法">2 方法</h2><p>筛选文献，选择了50篇文章进行最终的分析。</p><h2 id="3-成果">3 成果</h2><h3 id="3-1-VR功能">3.1 VR功能</h3><ul><li><p>医疗保健，教育，警察，体育，加工业，驾驶，语言，组织培训。</p></li><li><p>特征：</p><p>技术特征——硬件特征（如立体显示、触觉反馈、3D视觉、用户互动、沉浸感、高保真环境、多感官整合、计算机生成的实时反馈、更宽的视野和虚拟化身）</p><p>体验特征——用户感知（用户自主性、更强的临场感、用户化身、练习可重复性和安全环境）</p></li><li><p>触觉反馈，立体显示使用最多，其次是交互功能和3D视觉效果</p><p>HMD：头戴式显示器</p></li></ul><h3 id="3-2-用于各种学习成果技能培训的虚拟现实技术">3.2 用于各种学习成果技能培训的虚拟现实技术</h3><ul><li>大多用于运动技能培训</li><li>学习成果分为技能类，认知类，情感类。技能类成果VR影响最显著，认知类次之，情感类最少。</li></ul><p>表一：指出了HMD与非HMD下各个VR功能使用的大小关系，包括横向对比和纵向对比。</p><p>表二：VR对不同技能训练的影响程度。</p><h2 id="4-讨论">4 讨论</h2><h3 id="4-1-虚拟现实的技术特点及其对技能培训的影响">4.1 虚拟现实的技术特点及其对技能培训的影响</h3><ul><li><p>讨论了 HMD与非HMD vr 分别的技术特征：</p><p>HMD：立体显示，更宽的视野</p><p>非HMD：交互性，触觉反馈，适合增强运动体验。</p></li><li><p>Table4：VR特征与所训练技能之间的关系。</p><p>Table5：对每种特定技能，在HMD和非HMD条件下支持其技能训练的技术特征。</p></li><li><table><thead><tr><th>技术特征/Technical features</th><th>作用</th></tr></thead><tbody><tr><td>立体显示/Stereoscopic displays</td><td>提高模拟环境沉浸感<br/>与触觉力反馈相结合，便于用于运动技能训练</td></tr><tr><td>触觉反馈/Haptic feedback</td><td>引导减轻用户信息处理负担,避免不必要的操作<br>在腹腔手术中作用明显<br>增强临场感<br>阅读任务在促进用户的具象化</td></tr><tr><td>三维视觉呈现/3D visual presentations</td><td>建立更完整的心理模型<br>引起用户共鸣<br>与其他VR功能结合可以对HMD环境下的技能培训有很多积极作用<br>极少数情况下会对非HMD环境下运动技能训练产生负面影响</td></tr><tr><td>互动特征/Interactive features</td><td>小型虚拟现实环境中，互动功能更能提高运动能力</td></tr><tr><td>沉浸感/Immersivity</td><td>HMD独有<br>对任何技能培训均有积极影响，通过提高临场感来提升效果</td></tr><tr><td>高保真/High-Fidelity</td><td>对任何技能培训均有积极影响，通过提高临场感来提升效果<br>并非必要</td></tr><tr><td>多感官融合/Multisensory integration</td><td>VR环境中学习场景有大作用</td></tr><tr><td>更宽的视野/Wider field of view</td><td>HMD的独特特征<br>对NTS，问题解决技能，语言训练有积极影响</td></tr></tbody></table></li></ul><h3 id="4-2-虚拟现实的体验特点及其对技能培训的影响">4.2 虚拟现实的体验特点及其对技能培训的影响</h3><ul><li><p>虚拟现实技术特征对学习产出的影响往往受其他体验特征的影响。</p></li><li><p>临场感是vr学习的主要体验特征之一和首要心理因素</p></li></ul><h3 id="4-3-衡量虚拟现实效果">4.3 衡量虚拟现实效果</h3><p>不同方法来衡量学习效果。</p><h3 id="4-4-本次审查的影响">4.4 本次审查的影响</h3><p>对揭示虚拟现实技术特征与培训情景之间错综复杂的关系具有重要意义。</p><h4 id="4-4-1-理论意义">4.4.1 理论意义</h4><ul><li><p>特定VR功能与不同学习成果之间的联系：</p><p>三维表现与高阶学习有关，触觉与互动元素与主动学习有关。</p></li><li><p>虚拟化身有助于情感结果，临场感和沉浸感等体验属性是学习过程的基础</p></li><li><p>研究了不同环境不同VR功能对学习效果的影响，并揭示了一些关系，将效果分为积极的、消极的、中性的、混合的。</p></li><li><p>也强调了外部因素在虚拟现实学习环境中的重要性，如HMD/非HMD。</p><p>解释了不同VR功能对技能训练的非线性影响。</p></li></ul><h4 id="4-4-2-方法论影响">4.4.2 方法论影响</h4><p>确定了沉浸元素与沉浸体验特征的映射关系。</p><h4 id="4-4-3-对教学的影响">4.4.3 对教学的影响</h4><p>在技能和能力培训中使用虚拟现实可能比概念教学更有优势。</p><p>让学生感到有趣、新奇。</p><p>依据不同人群的特点来定制化不同技术特征的VR教学，能优化培训效果。</p><p>过多的VR介入可能会分散注意力，影响学习效果，所以优先考虑必要的虚拟显示现实功能。选择要与实际的特定情境相匹配。</p><h3 id="4-5-未来研究方向">4.5 未来研究方向</h3><p>应努力发现创新的、可广泛部署的功能和教学上合适的VR培训解决方案。同时减轻负面的生理影响。</p><p>主观客观相结合的方式改进评估技术。</p><p>以教学为重点调查相关关键问题（见原文）</p><h3 id="4-6-本研究的局限性">4.6 本研究的局限性</h3><p>仅关注了专业培训；</p><p>未考虑潜在的中介因素；</p><p>质量概念不一；</p><p>出版偏差；</p><p>范围广，涵盖多个系统模拟，导致对单个VR系统直接适用性受限。</p><h2 id="5-结论">5 结论</h2><p>解构每项研究中采用的VR功能。阐明VR个中各特征与技能训练之间的关联。</p><p>VR对认知、情感学习成果的影响较弱。</p><p>创新评估方法。</p><p>以用户为中心的适应性学习方法。</p><p>引申：</p><ul><li><p>更安全，也有助于培训状况下的情感稳定</p></li><li><p>节约时间：在全球疫情期间，辉瑞面临着生产比以往更多疫苗的艰巨任务。他们需要更有效地培训数千人来完成这项任务。他们转向 VR 培训。VR使辉瑞能够将新任务培训时间缩短高达 40%。</p></li><li><p>提高留存率</p></li><li><p>节约成本</p></li></ul><h1>文2：Augmented reality in vocational training: A systematic review of research and applications</h1><p>回顾了20年期间（2000-2021） AR技术在各行业培训中的应用</p><p>从职业技能提升（包括 应用领域、目标受众、培训目标和效果）和AR培训技术（包括AR应用、AR培训系统和设备）两个角度筛选出80篇相关研究进行最终分析。</p><p>AR培训在工业、职业 教育和医疗领域得到广泛应用。其中，AR最常用于医疗培训、工业维护和装配。</p><h2 id="1-简介">1 简介</h2><ul><li><p>AR技术简介</p><p>AR是对现实的补充而不是完全取代他。</p></li><li><p>近年来，AR在职业培训和在职培训中应用广泛</p><p>VET 是一种以实践为导向的教 育方法，强调获得的技能和学习成果在工作场所的体现。此外，VET更注重职前教育和培训，学生准备好满足特定职 业劳动力市场的需求。与 VET 不同，在职培训是一种提高 个人和组织知识、技能和态度的教育和培训方法。在职培 训涵盖工作现场的所有工具和任务。在职培训通过高级会 员的直接指导，更多地关注知识、职能和技能，从而提高 员工的能力。</p><p>与传统培训相比，AR培训通过真实与虚拟场 景的无缝融合，实现更专业的沉浸感。 AR技术是沉浸式 的，可以带来很高的参与度，让学员通过边做边学获得真 实的感受。此外，通过 AR 简化了复杂的培训手册，这有 助于减轻学员在任务中的认知负担</p></li><li><p>研究问题：</p><ol><li>AR在职业培训中的应用热点和研究趋势是什么？</li><li>AR 技术应用于哪些行业提供职业培训？</li><li>职业培训中常用的 AR技术有哪些具体应用？</li><li>在职业教育培训中，AR技术 对培训效果有影响吗？</li></ol></li></ul><h2 id="2-方法-2">2 方法</h2><p>此略</p><h2 id="3-结果">3 结果</h2><h3 id="3-1-ARVT研究热点及趋势">3.1 ARVT研究热点及趋势</h3><h4 id="3-1-1-ARVT相关研究的全国分布">3.1.1 ARVT相关研究的全国分布</h4><p>职业教育科技化理念 已在北美、欧洲、东亚等地区得到落实。</p><p>ARVT的研究主要在美国和德国进行，其中美国与加拿 大、西班牙等国家有着密切的合作关系。</p><h4 id="3-1-2-关键词-共现主题分析">3.1.2 关键词 共现主题分析</h4><ol><li>AR培训主要集中在制造、手术训练、维护、装配任务、事 故防御机制、伤口缝合等领域。</li><li>AR培训。培训对象主要 是学生、成人和学徒，通常采用AR技术为他们提供个性化培训。</li><li>职业培训常用的工具或方法包括计算机接口、AR系 统、虚拟仿真系统、人机交互培训或计算机辅助教学 （CAI）。</li></ol><h4 id="3-1-3-ARVT研究趋势分析">3.1.3. ARVT研究趋势分析</h4><ul><li>2014年AR技术首次 应用于职业教育培训</li><li>AR职业培训相关研究分为三个阶段：起步阶段、发展阶段、成熟崛起阶段。（详见原文）</li></ul><h3 id="3-2-ARVT研究现状">3.2 ARVT研究现状</h3><h4 id="3-2-1-AR职业培训的应用范围">3.2.1 AR职业培训的应用范围</h4><ul><li>工业培训最为广泛</li><li>AR头戴式显示器是应用最广泛的AR眼镜</li></ul><h4 id="3-2-2-AR在职业培训中的优势">3.2.2. AR在职业培训中的优势</h4><p>获得自我效能感；降低培训所需计划和运营成本；显著影响成绩，提高培训有效性；对长期记忆产生影响；减少试错成本；注重实践。</p><h3 id="3-3-AR技术或设备在职业培训中的应用">3.3. AR技术或设备在职业培训中的应用</h3><p>支持AR系统运行的关键技术是交互技术、显示技术和跟踪注册技术。</p><p>具体可见表4</p><h3 id="3-4-AR-对职业培训的影响：荟萃分析">3.4. AR 对职业培训的影响：荟萃分析</h3><p>保证了研究分析结果的有效性。</p><h2 id="4-结论与建议">4 结论与建议</h2><ul><li>提高危险环境中培训的安全性，易于实施</li><li>真实的体验</li><li>ARVT三个阶段</li><li>&quot;绩效与参与&quot;等研究成果相对有限</li><li>AR在职业培训中的优势：<ul><li>提高相关职业技能</li><li>提高参与度</li><li>提高学习动机（注意力、信心、满意度）和自我调节学习能力</li><li>学习成绩提高</li><li>认知负荷减少</li><li>缩短训练时间</li><li>降低操作错误率</li></ul></li><li>大多数技能都得到了提高，但与空间认知相关的技能没有受到积极影响</li><li>AR技术对职业培训的整体效 果有较高的促进作用</li><li>AR作为一种训练工具也存在一些担 忧，比如人们对AR技术的适应和熟练程度、AR装备的定制成 本、视觉限制、外界环境的干扰以及对互联网连接的依赖</li><li>AR硬件、软件、系统平台均有应用</li></ul><h2 id="5-限制">5 限制</h2><p>此略</p><h1>文3： A Review on Virtual Reality Skill Training Applications</h1><p>如何使用当前的软件和硬件创建和提供 VR 培训体验；</p><p>将 VR 培训应用于不同应用领域的挑战和解决方案；</p><p>用于验证 VR 培训效果的常见评估测试和评估方法</p><p>VR 技术 进步来开发新颖的培训体验的未来可能的方向。</p><h2 id="1-简介-2">1 简介</h2><ul><li>VR成本的降低，在不同领域日益普及。</li><li>VR 培训是企业内最常 见的 VR 使用方式。</li><li>现实训练存在一定限制，VR训练存在对应的诸多好处（成本低，舒适安全，隐私保护）</li><li>VR体验的要素</li><li>介绍创建和提供 VR 培训体验的主要技术（第 2 节）； 概述 不同领域的 VR 培训（第 3 节）；讨论评估 VR 培训有效性的 评估方法（第 4 节）； 确定开放问题和有前景的研究方向VR 培训（第 5 节）</li></ul><h2 id="2-VR培训体验的创作流程">2 VR培训体验的创作流程</h2><ul><li>VR培训 应用程序通常是根据特定任务创建的，其特征是固 定程序和针对特定培训目标的实际目的。</li><li>构建了创建VR培训体验的通 用框架。</li><li>总体而 言，VR训练的创作流程大致可分为三个阶段：<ul><li>1） 任务分析：任务分析的目的是确 定特定训练任务的信息需求，并总结设计过程中训 练系统应涉及的所有因素。<ul><li>不仅有身体行为还有认知任务</li><li>层次任务 分析（HTA）和认知任务分析（CTA）是最著名、 应用最广泛的。一般来说，HTA不是仅仅关注简单 的任务，而是描述由不同单元组成的&quot;目标&quot;，而 CTA则更关注于目标。关于处理意外情况。</li></ul></li><li>2）训练场景草图：也称为场景设计，目的是获得人们如何完成某项任务的 详细描述。</li><li>3）实施：<ul><li>软件——开发工具：VRML等编程语言淡出，Unity3D和UnrealEngine最为流行。3D建模。虚拟现实外围网络 (VRPN)。</li><li>软件——程序生成：程序生成技术（虚拟环 境、3D 模型和游戏关卡设计）。基本上，一般过程从指 定训练场景开始，包括训练任务、环境、基线和随机性 级别。然后，基于参数化和预先描述的场景，构建了程 序生成框架，该框架应用自动过程（例如随机优化过 程）来生成整个训练场景。</li><li>硬件：头戴式显示器 (HMD) 等可用的 VR 设备可以帮助训练技能。跟踪和交互设备， 例如 LeapMotion 和 Kinect 传感器。PrioVR、TESLASUIT 和 HoloSuit 等 商业产品都使用嵌入式传感器和触觉设备来提供用户的 全身跟踪和触觉反馈。VR 运动设备。移动 VR 耳机。</li></ul></li></ul></li></ul><h2 id="3-虚拟现实训练领域">3 虚拟现实训练领域</h2><p><em>约 54% 的作品在其框架中使用了头戴式显 示器（HMD），6% 使用了移动 VR，10% 使用了类 似 CAVE 的 VR 显示器，还有 27% 没有具体说明是哪 一个他们使用的 VR 设备。</em></p><p><em>2% 的工作使用了 额外的跟踪器或传感器，例如深度传感器来捕获手势信 息。 10% 使用跑步机或运动平台等先进设备来提供身 临其境的导航体验。 21% 的作品使用 Arduino 等定制 硬件或其他 3D 打印部件来满足任务需求。</em></p><h3 id="3-1-急救人员培训">3.1 急救人员培训</h3><ul><li>如警察、消防员和紧急医疗服务人员</li><li>培训设置可以高度定制，以培训急救人员有效处理关 键事件。</li><li>急救人员领域的另一个 重要的 VR 培训项目是消防。</li><li>不能适用于大范围的追逐训练</li><li>模拟对象的反应也是难题</li><li>与传 统模式相比，VR培训具有低成本、快速部署的特点，适合 刚刚入门的培训新手。传统培训模式可以作为培训完成后的 考核方式。</li></ul><h3 id="3-2-医疗培训">3.2 医疗培训</h3><ul><li>使用正确设计的基于模拟的培训 可以显着减少医护人员的错误并提高患者的安全</li><li>手术指导、视力障碍与治疗、减轻疼痛、医疗保健培训、PTSD治疗</li></ul><h3 id="3-3-军事训练">3.3 军事训练</h3><ul><li>军队 开始使用模拟软件或严肃游戏作为训练工具。</li><li>VR 训练以相对较低的成本为军队提供了 一个安全、受控的虚拟环境，以练习他们的技术技能并提高他们的认知功能</li><li>对于所需场景范围较大但运动范围较小的情况，VR可以很好地利用起来。</li><li>VR技 术在技术训练中显示出显着的效果。这些技术通过用经济实惠的 VR 设备取代部分昂贵的设备，大大降低了军事训练费用。 VR设 备不会完全取代传统设备，但可以作为一种更实惠的培训替代 品。</li><li>提高某些军事装备使用的熟练程度。</li></ul><h3 id="3-4-交通">3.4 交通</h3><ul><li>车辆模拟器提供了一个安全、受控的培训环境</li><li>让人们在 沉浸式的情况下进行模拟危险场景的练习。个性化VR驾驶系统改 善了驾驶员的不良驾驶习惯。</li><li>VR还应用于针对身体或认知障碍人士的辅助交通训 练</li></ul><h3 id="3-5-员工培训">3.5 员工培训</h3><ul><li>VR 可以减少培训期间生产力的损失，并解决合格培训讲师的缺乏问 题。</li><li>VR职 业培训可以通过提供各种实践经验和工作场所探索来重新培训劳动力， 从而减少失业。</li><li>提供了低成本且可复制的培训来满足此类需求，同时提供了容 错环境来缓解新员工可能面临的压力</li><li>员工和 雇主都可以从工作场所 VR 培训中受益。一方面，新员工可以通过可复 制、容错的VR培训来熟悉工作环境和操作。雇主可以根据培训结果来 评估员工是否做好了上岗准备。</li><li>多用户集体VR培训仍是挑战。</li><li>期待VR手套的普及。</li></ul><h3 id="3-6-人际交往能力培训">3.6 人际交往能力培训</h3><ul><li>&quot;身临其境&quot;的心理体验</li><li>鉴于开放性 的本质，VR环境提供了独特的培训机会，使学习者能够 充分体验有争议的问题和话题，从而使他们能够反思自 己的个人信念和观点，从而培养开放的能力。</li><li>VR 可以增加对他人的亲社会 行为。增强开放性，同时增强历史同理心。</li><li>确保 VR 允许参 与者使用基于暴露体验和当前环境的非语言交流。言语交流对于跨文化能力也至关 重要。</li></ul><h2 id="4-评估与评价方法">4 评估与评价方法</h2><p>定量测量（生理状态，生物识别技术被定义为使用 独特的、可测量的物理特征来描述个体，可以实时提供有 关受训者的情绪和注意力状态的有价值的信息，而 不受语言或偏见的限制）</p><p>定性评价（自我报告的 参与者反思是一种常用的定性方法，可以通过口头或文 本方式进行）</p><h2 id="5-总结和未来方向">5 总结和未来方向</h2><ul><li>开发最新的、多样的VR设备</li><li>联网 VR 使多个用户能够在共享虚拟空间中同时进行训 练。让 VR 培训变得更加可用、易于访问且可扩 展。</li><li>多用户 VR。一组人员共同培训。除了应急培训之外，多用户 VR 培训还可以激励和吸引学习者群体。多用户培训可以引 发积极的同伴压力，即个人在培训过程中互相支持。</li><li>增强现实 (AR)培训。与沉浸式 VR 场景相比，用户在使用 AR 设备时可以更好地控 制物理世界。</li></ul><h1>文4：Augmented Reality in Professional Training: A Review of the Literature from 2001 to 2020</h1><p>使用包含五个相互关联的方面的编码方案对关键研究结果进行分析和合成：基本信息、教学上下文、技术特征、教学设计和研究结果。</p><p>评论结果描述了 AR 支持的专业训练在发布、研究范式和技术可供性方面的趋势模式，并报告了 AR 教学功能和教学功能随时间变化的上下文差异。</p><p>促进和调查 AR 支持的专业培训的建议。</p><p>A total of 49 articles published between 2001 and 2020 were selected.</p><h2 id="1-简介-3">1 简介</h2><ul><li>AR 的三个技术特征：现实世界和虚拟世界的组合、实时交互以及虚拟和真实对象的准确 3D 配准。</li><li>专业训练更强调直接指导、试错时间，涉及培训计划的成本效益。</li><li>AR具有巨大潜力：<ul><li>AR 能够将虚拟教学内容自然整合到实际工作环境中，可以促进情境认知和经验学习。</li><li>AR 可以在符号、文本、动画或 3D 对象的数字形式中提供各种视觉线索，这些线索已知有助于专业培训中的程序学习。</li><li>由于虚拟内容的可见性增加，AR可以促进组中的共享学习体验。</li><li>AR 提供的数字伪影允许轻松创建、修改和复制，这可以大大减少试错实践的训练成本。</li></ul></li><li>研究的问题：<ul><li>AR支持的专业培训的出版物和研究类型的趋势是什么。</li><li>支持专业培训的 AR 的基本技术特征和可供性是什么，以及它们如何随着时间的推移而演变。</li><li>AR支持的专业培训采用了哪些教学策略。</li><li>AR应用在专业培训中的整体有效性和调节因素是什么？</li></ul></li></ul><h2 id="2-方法-3">2 方法</h2><p>此略</p><h2 id="3-结果-2">3 结果</h2><h3 id="3-1-出版趋势">3.1 出版趋势</h3><p>在过去的二十年里总体上升趋势。结果表明，AR在专业训练中的应用在过去并没有引起研究者的广泛关注;然而，该领域的前景是希望的。</p><p>实证研究一直是2011年以来的主流研究，以研究AR在专业培训中的使用。</p><h3 id="3-2-教学上下文（环境）">3.2 教学上下文（环境）</h3><p>工程、健康、医学，其他。</p><h3 id="3-3-技术特性和可供性">3.3 技术特性和可供性</h3><ul><li><p>输入设备：用户输入对于与 AR 接口的交互至关重要：分为自然输入（自然输入使用户能够以更直观的方式与 AR 对象交互，通常不依赖于附件设备。）（语音命令、磁传感器、运动跟踪器和触觉传感器）和人工输入（输入依赖于使用外围设备来实现与 AR 系统不自然的交互）（全球定位系统 (GPS)、鼠标和键盘、扫描仪和按钮压缩控制器）。</p><p>逐渐从自然输入转为人工输入</p></li><li><p>输出设备：输出设备简单，包括三种常见类型：通过监视器、视频和光学输出输出输出。前两种类型主要用于专业训练，后一种用于K-16教育。</p></li><li><p>计算设备：AR 系统中的数据由三种主要类型的设备处理：桌面或笔记本电脑、移动设备（包括平板电脑、手机和其他手持设备）和可穿戴设备。</p><p>桌面的下降趋势和移动设备的增加。</p></li><li><p>媒体展现：3D 对象（是最常见的媒体表示），视频，文本（这二者也比较重要），数据，标志，动画，2D图片</p></li></ul><h3 id="3-4-教学设计">3.4 教学设计</h3><ul><li>AR 技术主要服务于两种教学：试错和经验学习。</li><li>学习成果的体现：学生的行为/技能受到最多的关注，还有学生的知识水平、情感结果或者以上三个的综合结果。</li><li>指导功能的变化，交互性的变化（练习成分减少，内容交付成分增加，交互性逐渐降低）</li></ul><h3 id="3-5-荟萃分析">3.5 荟萃分析*</h3><p>上文不同方面因素的具体分析。</p><h2 id="4-讨论与结论">4 讨论与结论</h2><ul><li>AR 支持的专业培训的出版物见证了整体上升趋势，设计案例和实证研究是 2015 年前后的主要研究类型。</li><li>大多数研究是在工程和健康和医学的背景下实现的。</li><li>计算设备的可移植性增加，人工方法（例如扫描仪、鼠标和键盘）在过去几年的输入方面超过了自然方法（例如运动跟踪器）</li><li>试错和经验学习，这是面向实践的专业训练的有效方法。</li><li>内容交付已成为 AR 的主要教学功能，用于专业培训。</li><li>AR 对专业训练结果有整体小影响，学科、教学功能、教学功能、输入、输出、计算设备和媒体表示的因素在一定程度上调节了有效性。</li></ul><h3 id="4-1-对实践的意义">4.1 对实践的意义</h3><ul><li>技术功能和教学设计<ul><li>进一步提高人机交互机制以允许 AR 更自然的输入</li><li>增加可穿戴设备用作 AR 的计算设备</li><li>多个媒体表示的共同存在是专业训练的更好的 AR 显示，数字文本覆盖结合其他媒体类型使用</li></ul></li><li>教学设计：<ul><li>尽管试错和经验学习很受欢迎，但多种策略的灵活使用似乎产生了最好的教学效果。</li><li>建议主要使用 AR 进行内容交付，而不是专业培训中的实践。（成本，实践并非真实性）</li></ul></li></ul><h3 id="4-2-对未来研究的意义">4.2 对未来研究的意义</h3><p>更多的实证研究，扩展AR对专业培训支持的研究范围（其他领域），正确报告荟萃分析所需的完整汇总统计数据，AR专业培训成本的准确分析与报告。</p>]]></content>
    
    
    <categories>
      
      <category>XR</category>
      
      <category>调研</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VR</tag>
      
      <tag>AR</tag>
      
      <tag>HCI</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
